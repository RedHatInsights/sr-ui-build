/*! For license information please see 9896.a3c8ae3a.js.LICENSE.txt */
"use strict";(self.webpackChunk_apicurio_registry_ui=self.webpackChunk_apicurio_registry_ui||[]).push([[9896],{35067:()=>{},85029:(t,e,r)=>{r.d(e,{C:()=>O});var a,n=r(93264),i=r.n(n),o=r(99922),s=r(37799),l=r(54287),c=r(27297),p=r(11635),d=r(73685),u=r(23311),f=r(67219),m=r(79824),h=r(47809),g=r(99926),v=r(45745),y=(r(35067),r(18338)),E=r(25108),b=function(t){var e=t.isOpen,r=t.onClose,a=t.currentOwner,s=t.onChangeOwner,l=(0,n.useState)(!1),c=l[0],p=l[1],d=(0,n.useState)(),u=d[0],f=d[1],m=(0,n.useState)(!1),h=m[0],v=m[1],b=g.K9.getConfigService().principals(),C="function"==typeof b?b:function(){return b||[]};(0,n.useEffect)((function(){u&&u.trim().length>0&&u!==a?p(!0):p(!1)}),[e,u]);return i().createElement(o.Modal,{title:"Change owner",variant:"medium",isOpen:e,onClose:r,onEscapePress:function(){h||r()},className:"change-owner pf-m-redhat-font",actions:[i().createElement(o.Button,{key:"edit",variant:"primary","data-testid":"modal-btn-edit",onClick:function(){s(u||"")},isDisabled:!c},"Change owner"),i().createElement(o.Button,{key:"cancel",variant:"link","data-testid":"modal-btn-cancel",onClick:r},"Cancel")]},i().createElement(o.Form,null,i().createElement(o.FormGroup,{label:"Current owner",fieldId:"form-current-owner"},i().createElement(o.Text,null,a)),i().createElement(o.FormGroup,{label:"New owner",fieldId:"form-new-owner",isRequired:!0},b?i().createElement(y.jx,{id:u,onToggle:function(t){v(t)},onIdUpdate:function(t){E.debug("=====> ID update: ",t),f(t)},isUsersOnly:!1,initialOptions:C,isUpdateAccess:!1}):i().createElement(o.TextInput,{isRequired:!0,type:"text",id:"form-new-owner","data-testid":"form-new-owner",name:"form-new-owner","aria-describedby":"form-new-owner-helper",value:u,onChange:f}))))},C=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},a(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),S=function(){return S=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},S.apply(this,arguments)},D=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var a=Array(t),n=0;for(e=0;e<r;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,n++)a[n]=i[o];return a};var O=function(t){function e(e){var r=t.call(this,e)||this;return r.handleTabClick=function(t,e){r.setSingleState("activeTabKey",e)},r.onUploadVersion=function(){r.setSingleState("isUploadModalOpen",!0)},r.onDeleteArtifact=function(){r.setSingleState("isDeleteModalOpen",!0)},r.doEnableRule=function(t){g.K9.getLoggerService().debug("[ArtifactVersionPage] Enabling rule:",t);var e="FULL";"COMPATIBILITY"===t&&(e="BACKWARD"),g.K9.getGroupsService().createArtifactRule(r.groupId(),r.artifactId(),t,e).catch((function(e){r.handleServerError(e,'Error enabling "'+t+'" artifact rule.')})),r.setSingleState("rules",D(r.rules(),[{config:e,type:t}]))},r.doDisableRule=function(t){g.K9.getLoggerService().debug("[ArtifactVersionPage] Disabling rule:",t),g.K9.getGroupsService().deleteArtifactRule(r.groupId(),r.artifactId(),t).catch((function(e){r.handleServerError(e,'Error disabling "'+t+'" artifact rule.')})),r.setSingleState("rules",r.rules().filter((function(e){return e.type!==t})))},r.doConfigureRule=function(t,e){g.K9.getLoggerService().debug("[ArtifactVersionPage] Configuring rule:",t,e),g.K9.getGroupsService().updateArtifactRule(r.groupId(),r.artifactId(),t,e).catch((function(e){r.handleServerError(e,'Error configuring "'+t+'" artifact rule.')})),r.setSingleState("rules",r.rules().map((function(r){return r.type===t?{config:e,type:r.type}:r})))},r.doDownloadArtifact=function(){var t,e,a,n,i,o=r.state.artifactContent,s=h.ContentTypes.APPLICATION_JSON,l="json";(null===(t=r.state.artifact)||void 0===t?void 0:t.type)===h.ArtifactTypes.PROTOBUF&&(s=h.ContentTypes.APPLICATION_PROTOBUF,l="proto"),(null===(e=r.state.artifact)||void 0===e?void 0:e.type)===h.ArtifactTypes.WSDL&&(s=h.ContentTypes.APPLICATION_XML,l="wsdl"),(null===(a=r.state.artifact)||void 0===a?void 0:a.type)===h.ArtifactTypes.XSD&&(s=h.ContentTypes.APPLICATION_XML,l="xsd"),(null===(n=r.state.artifact)||void 0===n?void 0:n.type)===h.ArtifactTypes.XML&&(s=h.ContentTypes.APPLICATION_XML,l="xml"),(null===(i=r.state.artifact)||void 0===i?void 0:i.type)===h.ArtifactTypes.GRAPHQL&&(s=h.ContentTypes.APPLICATION_JSON,l="graphql");var c=r.artifactNameOrId()+"."+l;g.K9.getDownloaderService().downloadToFS(o,s,c)},r.onUploadFormValid=function(t){r.setSingleState("isUploadFormValid",t)},r.onUploadFormChange=function(t){r.setSingleState("uploadFormData",t)},r.onUploadModalClose=function(){r.setSingleState("isUploadModalOpen",!1)},r.onDeleteModalClose=function(){r.setSingleState("isDeleteModalOpen",!1)},r.doUploadArtifactVersion=function(){if(r.onUploadModalClose(),r.pleaseWait(!0,"Uploading new version, please wait..."),null!==r.state.uploadFormData){var t={content:r.state.uploadFormData,type:r.artifactType()};g.K9.getGroupsService().createArtifactVersion(r.groupId(),r.artifactId(),t).then((function(t){var e=t.groupId?t.groupId:"default",a="/artifacts/"+encodeURIComponent(e)+"/"+encodeURIComponent(t.id)+"/versions/"+t.version;g.K9.getLoggerService().info("[ArtifactVersionPage] Artifact version successfully uploaded.  Redirecting to details: ",a),r.navigateTo(r.linkTo(a))()})).catch((function(t){r.pleaseWait(!1,""),!t||400!==t.error_code&&409!==t.error_code?r.handleServerError(t,"Error uploading artifact version."):r.handleInvalidContentError(t),r.setMultiState({uploadFormData:null,isUploadFormValid:!1})}))}},r.doDeleteArtifact=function(){r.onDeleteModalClose(),r.pleaseWait(!0,"Deleting artifact, please wait..."),g.K9.getGroupsService().deleteArtifact(r.groupId(),r.artifactId()).then((function(){r.pleaseWait(!1,""),r.navigateTo(r.linkTo("/artifacts"))()}))},r.openEditMetaDataModal=function(){r.setSingleState("isEditModalOpen",!0)},r.openChangeOwnerModal=function(){r.setSingleState("isChangeOwnerModalOpen",!0)},r.onEditModalClose=function(){r.setSingleState("isEditModalOpen",!1)},r.onChangeOwnerModalClose=function(){r.setSingleState("isChangeOwnerModalOpen",!1)},r.doEditMetaData=function(t){g.K9.getGroupsService().updateArtifactMetaData(r.groupId(),r.artifactId(),r.versionParam(),t).then((function(){r.state.artifact&&r.setSingleState("artifact",S(S({},r.state.artifact),t))})).catch((function(t){r.handleServerError(t,"Error editing artifact metadata.")})),r.onEditModalClose()},r.doChangeOwner=function(t){g.K9.getGroupsService().updateArtifactOwner(r.groupId(),r.artifactId(),t).then((function(){r.state.artifact&&r.setSingleState("artifact",S(S({},r.state.artifact),{createdBy:t}))})).catch((function(t){r.handleServerError(t,"Error changing artifact ownership.")})),r.onChangeOwnerModalClose()},r.closeInvalidContentModal=function(){r.setSingleState("isInvalidContentModalOpen",!1)},r.pleaseWait=function(t,e){r.setMultiState({isPleaseWaitModalOpen:t,pleaseWaitMessage:e})},r}return C(e,t),e.prototype.renderPage=function(){var t,e=this.state.artifact?this.state.artifact:new h.ArtifactMetaData,r=[i().createElement(o.Tab,{eventKey:0,title:"Overview",key:"overview",tabContentId:"tab-info"},i().createElement(l.fP,{artifact:e,isLatest:"latest"===this.versionParam(),rules:this.rules(),onEnableRule:this.doEnableRule,onDisableRule:this.doDisableRule,onConfigureRule:this.doConfigureRule,onDownloadArtifact:this.doDownloadArtifact,onEditMetaData:this.openEditMetaDataModal,onChangeOwner:this.openChangeOwnerModal})),i().createElement(o.Tab,{eventKey:1,title:"Documentation",key:"documentation"},i().createElement(l.pX,{artifactContent:this.state.artifactContent,artifactType:e.type})),i().createElement(o.Tab,{eventKey:2,title:"Content",key:"content"},i().createElement(l.IK,{artifactContent:this.state.artifactContent,artifactType:e.type}))];this.showDocumentationTab()||r.splice(1,1);var a=this.groupIdParam(),n="default"!=a,s=i().createElement(o.Breadcrumb,null,i().createElement(o.BreadcrumbItem,null,i().createElement(d.Link,{to:this.linkTo("/artifacts"),"data-testid":"breadcrumb-lnk-artifacts"},"Artifacts")),i().createElement(o.BreadcrumbItem,null,i().createElement(d.Link,{to:this.linkTo("/artifacts?group="+encodeURIComponent(a)),"data-testid":"breadcrumb-lnk-group"},a)),i().createElement(o.BreadcrumbItem,{isActive:!0},this.artifactId()));return n||(s=i().createElement(o.Breadcrumb,null,i().createElement(o.BreadcrumbItem,null,i().createElement(d.Link,{to:"/artifacts","data-testid":"breadcrumb-lnk-artifacts"},"Artifacts")),i().createElement(o.BreadcrumbItem,{isActive:!0},this.artifactId()))),i().createElement(i().Fragment,null,i().createElement(m.QT,{feature:"breadcrumbs",is:!0},i().createElement(o.PageSection,{className:"ps_header-breadcrumbs",variant:o.PageSectionVariants.light,children:s})),i().createElement(o.PageSection,{className:"ps_artifact-version-header",variant:o.PageSectionVariants.light},i().createElement(c.p,{title:this.nameOrId(),versions:this.versions(),version:this.versionParam(),onUploadVersion:this.onUploadVersion,onDeleteArtifact:this.onDeleteArtifact,groupId:a,artifactId:this.artifactId()})),i().createElement(o.PageSection,{variant:o.PageSectionVariants.light,isFilled:!0,padding:{default:"noPadding"},className:"artifact-details-main"},i().createElement(o.Tabs,{className:"artifact-page-tabs",id:"artifact-page-tabs",unmountOnExit:!0,isFilled:!1,activeKey:this.state.activeTabKey,children:r,onSelect:this.handleTabClick})),i().createElement(o.Modal,{title:"Upload Artifact Version",variant:"large",isOpen:this.state.isUploadModalOpen,onClose:this.onUploadModalClose,className:"upload-artifact-modal pf-m-redhat-font",actions:[i().createElement(o.Button,{key:"upload",variant:"primary","data-testid":"modal-btn-upload",onClick:this.doUploadArtifactVersion,isDisabled:!this.state.isUploadFormValid},"Upload"),i().createElement(o.Button,{key:"cancel",variant:"link","data-testid":"modal-btn-cancel",onClick:this.onUploadModalClose},"Cancel")]},i().createElement(p.G,{onChange:this.onUploadFormChange,onValid:this.onUploadFormValid})),i().createElement(o.Modal,{title:"Delete Artifact",variant:"small",isOpen:this.state.isDeleteModalOpen,onClose:this.onDeleteModalClose,className:"delete-artifact-modal pf-m-redhat-font",actions:[i().createElement(o.Button,{key:"delete",variant:"primary","data-testid":"modal-btn-delete",onClick:this.doDeleteArtifact},"Delete"),i().createElement(o.Button,{key:"cancel",variant:"link","data-testid":"modal-btn-cancel",onClick:this.onDeleteModalClose},"Cancel")]},i().createElement("p",null,"Do you want to delete this artifact and all of its versions?  This action cannot be undone.")),i().createElement(u.XT,{name:this.artifactName(),description:this.artifactDescription(),labels:this.artifactLabels(),properties:this.artifactProperties(),isOpen:this.state.isEditModalOpen,onClose:this.onEditModalClose,onEditMetaData:this.doEditMetaData}),i().createElement(b,{isOpen:this.state.isChangeOwnerModalOpen,onClose:this.onChangeOwnerModalClose,currentOwner:(null===(t=this.state.artifact)||void 0===t?void 0:t.createdBy)||"",onChangeOwner:this.doChangeOwner}),i().createElement(f.R,{error:this.state.invalidContentError,isOpen:this.state.isInvalidContentModalOpen,onClose:this.closeInvalidContentModal}),i().createElement(v.j,{message:this.state.pleaseWaitMessage,isOpen:this.state.isPleaseWaitModalOpen}))},e.prototype.initializePageState=function(){return{activeTabKey:0,artifact:null,artifactContent:"",artifactIsText:!0,invalidContentError:null,isDeleteModalOpen:!1,isEditModalOpen:!1,isChangeOwnerModalOpen:!1,isInvalidContentModalOpen:!1,isPleaseWaitModalOpen:!1,isUploadFormValid:!1,isUploadModalOpen:!1,pleaseWaitMessage:"",rules:null,uploadFormData:null,versions:null}},e.prototype.groupIdParam=function(){return this.getPathParam("groupId")},e.prototype.artifactIdParam=function(){return this.getPathParam("artifactId")},e.prototype.versionParam=function(){return this.getPathParam("version")},e.prototype.createLoaders=function(){var t=this,e=this.groupIdParam();"default"==e&&(e=null);var r=this.artifactIdParam();return g.K9.getLoggerService().info("Loading data for artifact: ",r),[g.K9.getGroupsService().getArtifactMetaData(e,r,this.versionParam()).then((function(e){return t.setSingleState("artifact",e)})),g.K9.getGroupsService().getArtifactContent(e,r,this.versionParam()).then((function(e){return t.setSingleState("artifactContent",e)})).catch((function(e){if(g.K9.getLoggerService().warn("Failed to get artifact content: ",e),!function(t){if("string"==typeof t)try{var e=JSON.parse(t);if(e&&e.error_code&&404===e.error_code)return!0}catch(t){}return!1}(e))throw e;t.setSingleState("artifactContent","Artifact version content not available (404 Not Found).")})),g.K9.getGroupsService().getArtifactRules(e,r).then((function(e){return t.setSingleState("rules",e)})),g.K9.getGroupsService().getArtifactVersions(e,r).then((function(e){return t.setSingleState("versions",e.reverse())}))]},e.prototype.showDocumentationTab=function(){return!!this.state.artifact&&(("OPENAPI"===this.state.artifact.type||"ASYNCAPI"===this.state.artifact.type)&&"DISABLED"!==this.state.artifact.state)},e.prototype.rules=function(){return this.state.rules?this.state.rules:[]},e.prototype.nameOrId=function(){return this.state.artifact?this.state.artifact.name?this.state.artifact.name:this.state.artifact.id:""},e.prototype.versions=function(){return this.state.versions?this.state.versions:[]},e.prototype.artifactId=function(){return this.state.artifact?this.state.artifact.id:""},e.prototype.groupId=function(){return this.state.artifact?this.state.artifact.groupId:null},e.prototype.artifactType=function(){return this.state.artifact?this.state.artifact.type:""},e.prototype.artifactNameOrId=function(){return this.state.artifact?this.state.artifact.name?this.state.artifact.name:this.state.artifact.id:""},e.prototype.artifactName=function(){return this.state.artifact&&this.state.artifact.name?this.state.artifact.name:""},e.prototype.artifactDescription=function(){return this.state.artifact&&this.state.artifact.description?this.state.artifact.description:""},e.prototype.artifactLabels=function(){return this.state.artifact&&this.state.artifact.labels?this.state.artifact.labels:[]},e.prototype.artifactProperties=function(){var t;return(null===(t=this.state.artifact)||void 0===t?void 0:t.properties)||{}},e.prototype.handleInvalidContentError=function(t){g.K9.getLoggerService().info("INVALID CONTENT ERROR",t),this.setMultiState({invalidContentError:t,isInvalidContentModalOpen:!0})},e}(s.I)},47230:(t,e,r)=>{r.d(e,{X:()=>u});var a,n=r(93264),i=r.n(n),o=(r(35067),r(79824)),s=r(99922),l=r(68470),c=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},a(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p=function(){return p=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},p.apply(this,arguments)},d=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var a=Array(t),n=0;for(e=0;e<r;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,n++)a[n]=i[o];return a},u=function(t){function e(e){var r=t.call(this,e)||this;return r.doEdit=function(){var t=p(p({},r.state.metaData),{properties:(0,l.WJ)(r.state.properties)});r.props.onEditMetaData(t)},r.onNameChange=function(t){r.setSingleState("metaData",p(p({},r.state.metaData),{name:t}),(function(){r.validate()}))},r.onLabelsChange=function(t){var e=[];t&&t.trim().length>0&&(e=t.trim().split(",").map((function(t){return t.trim()}))),r.setMultiState({labels:t,metaData:p(p({},r.state.metaData),{labels:e})},(function(){r.validate()}))},r.onDescriptionChange=function(t){r.setSingleState("metaData",p(p({},r.state.metaData),{description:t}),(function(){r.validate()}))},r.onPropertiesChange=function(t){r.setSingleState("properties",t,(function(){r.validate()}))},r.validate=function(){var t=d(r.state.properties),e=!0;if(t){var a=[];t.forEach((function(t){t.nameValidated="default",""!==t.name&&void 0!==t.name||""===t.value?""!==t.name&&void 0!==t.name&&(a.includes(t.name)&&(t.nameValidated="error",e=!1),a.push(t.name)):(t.nameValidated="error",e=!1)}))}r.setMultiState({isValid:e,properties:t})},r}return c(e,t),e.prototype.render=function(){return i().createElement(s.Modal,{title:"Edit version metadata",variant:"large",isOpen:this.props.isOpen,onClose:this.props.onClose,className:"edit-artifact-metaData pf-m-redhat-font",actions:[i().createElement(s.Button,{key:"edit",variant:"primary","data-testid":"modal-btn-edit",onClick:this.doEdit,isDisabled:!this.state.isValid},"Save"),i().createElement(s.Button,{key:"cancel",variant:"link","data-testid":"modal-btn-cancel",onClick:this.props.onClose},"Cancel")]},i().createElement(s.Form,null,i().createElement(s.Grid,{hasGutter:!0,md:6},i().createElement(s.GridItem,{span:12},i().createElement(s.FormGroup,{label:"Name",fieldId:"form-name"},i().createElement(s.TextInput,{isRequired:!1,type:"text",id:"form-name","data-testid":"form-name",name:"form-name","aria-describedby":"form-name-helper",value:this.state.metaData.name,placeholder:"Name of the artifact",onChange:this.onNameChange}))),i().createElement(s.GridItem,{span:12},i().createElement(s.FormGroup,{label:"Description",fieldId:"form-description"},i().createElement(s.TextArea,{isRequired:!1,id:"form-description","data-testid":"form-description",name:"form-description","aria-describedby":"form-description-helper",value:this.state.metaData.description,placeholder:"Description of the artifact",onChange:this.onDescriptionChange}))),i().createElement(s.GridItem,{span:12},i().createElement(s.FormGroup,{label:"Labels",fieldId:"form-labels",helperText:"A comma-separated list of labels to apply to the artifact."},i().createElement(s.TextInput,{isRequired:!1,type:"text",id:"form-labels","data-testid":"form-labels",name:"form-labels","aria-describedby":"form-labels-helper",value:this.state.labels,placeholder:"Artifact labels",onChange:this.onLabelsChange}))),i().createElement(l.yU,{properties:this.state.properties,onChange:this.onPropertiesChange}))))},e.prototype.componentDidUpdate=function(t){this.props.isOpen&&!t.isOpen&&this.setMultiState({labels:this.props.labels.join(", "),properties:(0,l.Np)(this.props.properties),metaData:{description:this.props.description,labels:this.props.labels,properties:this.props.properties,name:this.props.name},isValid:!0})},e.prototype.initializeState=function(){return{labels:"",properties:[],isValid:!0,metaData:{description:"",labels:[],properties:{},name:""}}},e}(o.Vx)},68470:(t,e,r)=>{r.d(e,{Np:()=>l,WJ:()=>c,yU:()=>p});var a=r(93264),n=r.n(a),i=r(99922),o=r(67646),s=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var a=Array(t),n=0;for(e=0;e<r;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,n++)a[n]=i[o];return a};function l(t){return Object.keys(t).filter((function(t){return void 0!==t})).map((function(e){return{name:e,value:t[e],nameValidated:"default",valueValidated:"default"}}))}function c(t){var e={};return t.forEach((function(t){t.name&&(e[t.name]=t.value)})),e}var p=function(t){var e=t.properties,r=t.onChange;return n().createElement(n().Fragment,null,n().createElement(i.GridItem,{span:12},n().createElement("label",{className:"pf-c-form__label"},n().createElement("span",{className:"pf-c-form__label-text"},"Properties"))),e.map((function(t,a){return n().createElement(n().Fragment,{key:a},n().createElement(i.FormGroup,{fieldId:"form-properties-key-"+a,isRequired:!0,label:0===a?"Key":""},n().createElement(i.TextInput,{type:"text",placeholder:"Enter key",id:"form-properties-key-"+a,name:"form-properties-key-"+a,validated:t.nameValidated,value:t.name,onChange:function(a){t.name=a,r(s(e))}})),n().createElement(i.FormGroup,{fieldId:"form-properties-value-"+a,label:0===a?"Value":"",validated:t.valueValidated,helperTextInvalid:""},n().createElement("div",{className:"prop-value-group"},n().createElement(i.TextInput,{type:"text",id:"form-properties-value-"+a,placeholder:"Enter value",name:"form-properties-value-"+a,validated:t.valueValidated,value:t.value,onChange:function(a){t.value=a,r(s(e))}}),n().createElement(i.Button,{key:"remove-button-new",variant:"link",icon:n().createElement(o.MinusCircleIcon,null),iconPosition:"right",className:"pf-m-plain",onClick:function(){var a,n;a=t,n=e.filter((function(t){return t!==a})),r(n)}}))))})),n().createElement(i.GridItem,{span:12},n().createElement(i.Button,{variant:"link",icon:n().createElement(o.PlusCircleIcon,null),className:"add-property-button",onClick:function(){return t=s(e,[{name:"",value:"",nameValidated:"default",valueValidated:"default"}]),void r(t);var t}},"Add property")," "))}},72896:(t,e,r)=>{r.d(e,{p:()=>d});var a,n=r(93264),i=r.n(n),o=r(99922),s=r(79824),l=r(85654),c=r(26068),p=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},a(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=function(t){function e(e){return t.call(this,e)||this}return p(e,t),e.prototype.render=function(){return i().createElement(o.Flex,{className:"example-border"},i().createElement(o.FlexItem,null,i().createElement(o.TextContent,null,i().createElement(o.Text,{component:o.TextVariants.h1},this.props.title))),i().createElement(o.FlexItem,{align:{default:"alignRight"}},i().createElement(l.Q,{version:this.props.version,versions:this.props.versions,groupId:this.props.groupId,artifactId:this.props.artifactId}),i().createElement(s.No,{isDeveloper:!0},i().createElement(c.Q,{feature:"readOnly",isNot:!0},i().createElement(o.Button,{id:"delete-artifact-button",variant:"secondary","data-testid":"header-btn-delete",onClick:this.props.onDeleteArtifact},"Delete"),i().createElement(o.Button,{id:"upload-version-button",variant:"primary","data-testid":"header-btn-upload-version",onClick:this.props.onUploadVersion},"Upload new version")))))},e.prototype.initializeState=function(){return{}},e}(s.Vx)},85654:(t,e,r)=>{r.d(e,{Q:()=>m});var a,n=r(93264),i=r.n(n),o=r(99922),s=r(79824),l=r(67646),c=r(47645),p=r.n(c),d=r(73685),u=r(99926),f=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},a(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),m=function(t){function e(e){var r=t.call(this,e)||this;return r.onToggle=function(t){r.setSingleState("isOpen",t)},r}return f(e,t),e.prototype.render=function(){var t=this;return i().createElement(o.Dropdown,{className:this.dropdownClasses(),toggle:i().createElement(o.DropdownToggle,{"data-testid":"versions-toggle",onToggle:this.onToggle},"Version: ",this.props.version),isOpen:this.state.isOpen},i().createElement("div",{className:"version-filter",style:{display:"none"}},i().createElement(o.InputGroup,null,i().createElement(o.TextInput,{name:"filter",id:"versionFilter",type:"search","data-testid":"versions-form-filter","aria-label":"Version filter"}),i().createElement(o.Button,{variant:o.ButtonVariant.control,"data-testid":"versions-form-btn-search","aria-label":"search button for search input"},i().createElement(l.SearchIcon,null)))),i().createElement("div",{className:"version-header"},i().createElement("div",{className:"version-item"},i().createElement("span",{className:"name"},"Version"),i().createElement("span",{className:"date"},"Created On"))),i().createElement("div",{className:"version-list"},i().createElement(d.Link,{key:"latest","data-testid":"versions-lnk-latest",to:this.linkTo("/artifacts/"+encodeURIComponent(this.props.groupId)+"/"+encodeURIComponent(this.props.artifactId)+"/versions/latest"),className:"version-item latest"},i().createElement("span",{className:"name"},"latest"),i().createElement("span",{className:"date"})),this.props.versions.map((function(e,r){return i().createElement(d.Link,{key:e.version,"data-testid":"versions-lnk-"+r,to:t.linkTo("/artifacts/"+encodeURIComponent(t.props.groupId)+"/"+encodeURIComponent(t.props.artifactId)+"/versions/"+e.version),className:"version-item"},i().createElement("span",{className:"name"},e.version),i().createElement("span",{className:"date"},i().createElement(p(),{date:e.createdOn,fromNow:!0})))}))))},e.prototype.initializeState=function(){return{isOpen:!1}},e.prototype.dropdownClasses=function(){var t=["version-selector-dropdown"];return u.K9.getConfigService().featureReadOnly()&&t.push("dropdown-align-right"),t.join(" ")},e}(s.Vx)},29646:(t,e,r)=>{r.d(e,{I:()=>m});var a,n=r(93264),i=r.n(n),o=r(79824),s=r(99922),l=r(99926),c=r(29515),p=r.n(c),d=(r(90252),r(12477),r(12501),r(13202),r(62568),r(42270),r(64724)),u=r.n(d),f=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},a(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),m=function(t){function e(e){var r=t.call(this,e)||this;return r.switchJsonYaml=function(t){return function(){if(t!==r.state.editorMode){var e="Error formatting code to: "+t;try{e="yaml"===t?u().stringify(JSON.parse(r.props.artifactContent),null,4):JSON.stringify(u().parse(r.props.artifactContent),null,2)}catch(t){r.handleInvalidContentError(t)}r.setState({editorMode:t,content:e})}}},r}return f(e,t),e.prototype.componentDidMount=function(){var t=document.getElementById("ace-wrapper");if(t){var e=t.clientHeight;e&&this.setSingleState("editorHeight",e+"px")}},e.prototype.compactYamlJson=function(){var t=document.getElementById("ace-wrapper");if(t){var e=t.clientWidth;if(e&&e>500)return!1}return!0},e.prototype.handleInvalidContentError=function(t){l.K9.getLoggerService().info("[Content] Invalid content error:",t)},e.prototype.render=function(){return i().createElement("div",{className:"ace-wrapper",id:"ace-wrapper"},"json"!==this.state.editorMode&&"yaml"!==this.state.editorMode?null:i().createElement(s.ToggleGroup,{"aria-label":"Switch Json to Yaml",isCompact:this.compactYamlJson(),className:"formatting-buttons"},i().createElement(s.ToggleGroupItem,{text:"JSON",buttonId:"json",isSelected:"json"===this.state.editorMode,onChange:this.switchJsonYaml("json"),isDisabled:"json"===this.state.editorMode}),i().createElement(s.ToggleGroupItem,{text:"YAML",buttonId:"yaml",isSelected:"yaml"===this.state.editorMode,onChange:this.switchJsonYaml("yaml"),isDisabled:"yaml"===this.state.editorMode})),i().createElement(p(),{"data-testid":"ace-content",mode:this.state.editorMode,theme:"monokai",name:"artifactContent",className:"artifactContent",width:this.state.editorWidth,height:this.state.editorHeight,fontSize:14,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!1,value:this.state.content,readOnly:!0,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2,useWorker:!1}}))},e.prototype.initializeState=function(){return{content:this.formatContent(),editorMode:this.editorMode(),editorHeight:"500px",editorWidth:"100%"}},e.prototype.editorMode=function(){return"PROTOBUF"===this.props.artifactType?"protobuf":"WSDL"===this.props.artifactType||"XSD"===this.props.artifactType||"XML"===this.props.artifactType?"xml":"GRAPHQL"===this.props.artifactType?"graphqlschema":"json"},e.prototype.formatContent=function(){try{var t=JSON.parse(this.props.artifactContent);if(t)return JSON.stringify(t,null,2)}catch(t){}return this.props.artifactContent},e}(o.Vx)},72627:(t,e,r)=>{r.d(e,{p:()=>f});var a,n=r(93264),i=r.n(n),o=(r(32237),r(79824)),s=r(69468),l=r(24838),c=r.n(l),p=r(4080),d=r(99926),u=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},a(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e){return t.call(this,e)||this}return u(e,t),e.prototype.render=function(){if(this.isError())return i().createElement(p.L,{error:{errorMessage:"Artifact isn't a valid OpenAPI structure",error:this.state.error}});var t=null;if("OPENAPI"===this.props.artifactType&&(t=i().createElement(s.RedocStandalone,{spec:this.state.parsedContent})),"ASYNCAPI"===this.props.artifactType){t=i().createElement(c(),{schema:this.state.parsedContent,config:{show:{sidebar:!1}}})}return null!==t?t:i().createElement("h1",null,"Unsupported Type: ",this.props.artifactType)},e.prototype.initializeState=function(){try{return{parsedContent:JSON.parse(this.props.artifactContent),error:void 0}}catch(t){return d.K9.getLoggerService().warn("Failed to parse content:"),d.K9.getLoggerService().error(t),{parsedContent:void 0,error:t}}},e.prototype.isError=function(){return!!this.state.error},e}(o.Vx)},4080:(t,e,r)=>{r.d(e,{L:()=>u});var a,n=r(93264),i=r.n(n),o=r(79824),s=r(29515),l=r.n(s),c=(r(79253),r(42557),r(99922)),p=r(67646),d=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},a(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){var r=t.call(this,e)||this;return r.showDetails=function(){r.setSingleState("isShowDetails",!0)},r}return d(e,t),e.prototype.render=function(){return i().createElement("div",{className:"centerizer"},i().createElement(c.EmptyState,{variant:c.EmptyStateVariant.large},i().createElement(c.EmptyStateIcon,{icon:p.ExclamationTriangleIcon}),i().createElement(c.Title,{headingLevel:"h5",size:"lg"},this.errorMessage()),i().createElement(c.EmptyStateBody,null,this.errorDescription()),i().createElement(c.EmptyStateSecondaryActions,null,i().createElement(c.Button,{variant:"link","data-testid":"error-btn-details",onClick:this.showDetails},"Show details"))),i().createElement("div",{className:"separator"}," "),this.state.isShowDetails?i().createElement("div",{className:"ace-wrapper pf-c-empty-state pf-m-lg",id:"ace-wrapper"},i().createElement(l(),{"data-testid":"ace-details",mode:"json",theme:"tomorrow",name:"errorDetail",className:"errorDetail",width:this.state.editorWidth,height:this.state.editorHeight,fontSize:14,showPrintMargin:!1,showGutter:!1,highlightActiveLine:!1,value:this.errorDetail(),readOnly:!0,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2,useWorker:!1}})):i().createElement("div",null))},e.prototype.initializeState=function(){return{editorHeight:"250px",editorWidth:"100%",isShowDetails:!1}},e.prototype.errorMessage=function(){return this.props.error?this.props.error.errorMessage:"Internal server error"},e.prototype.errorDescription=function(){return this.props.children?this.props.children:"The content you are trying to visualize is not valid (we could not parse it).  If possible, we'll try to provide you with some more information about the problem (see below)."},e.prototype.errorDetail=function(){return this.props.error&&this.props.error.error&&this.props.error.error.detail?this.props.error.error.detail:this.props.error&&this.props.error.error&&this.props.error.error.message?this.props.error.error.message:this.props.error&&this.props.error.error?JSON.stringify(this.props.error.error,null,3):"Error info not available"},e}(o.Vx)},74789:(t,e,r)=>{r.d(e,{f:()=>m});var a,n=r(93264),i=r.n(n),o=r(79824),s=r(99922),l=r(67646),c=r(47645),p=r.n(c),d=r(26068),u=r(8556),f=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},a(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),m=function(t){function e(e){var r=t.call(this,e)||this;return r.isArtifactInGroup=function(){var t=r.props.artifact.groupId;return null!=t&&"default"!==t},r}return f(e,t),e.prototype.render=function(){return i().createElement("div",{className:"artifact-tab-content"},i().createElement("div",{className:"artifact-basics"},i().createElement(s.Card,null,i().createElement(s.CardTitle,null,i().createElement("div",{className:"title-and-type"},i().createElement(s.Split,null,i().createElement(s.SplitItem,{className:"type"},i().createElement(o.fN,{type:this.props.artifact.type})),i().createElement(s.SplitItem,{className:"title",isFilled:!0},"Version metadata"),i().createElement(s.SplitItem,{className:"actions"},i().createElement(o.No,{isDeveloper:!0},i().createElement(d.Q,{feature:"readOnly",isNot:!0},i().createElement(s.Button,{id:"edit-action","data-testid":"artifact-btn-edit",onClick:this.props.onEditMetaData,variant:"link"},i().createElement(l.PencilAltIcon,null)," ","Edit"))))))),i().createElement(s.Divider,null),i().createElement(s.CardBody,null,i().createElement(s.DescriptionList,{className:"metaData",isCompact:!0},i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"Name"),i().createElement(s.DescriptionListDescription,{className:this.props.artifact.name?"":"empty-state-text"},this.artifactName())),i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"ID"),i().createElement(s.DescriptionListDescription,null,this.props.artifact.id)),i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"Description"),i().createElement(s.DescriptionListDescription,{className:this.props.artifact.description?"":"empty-state-text"},this.description())),i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"Status"),i().createElement(s.DescriptionListDescription,null,this.props.artifact.state)),i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"Created"),i().createElement(s.DescriptionListDescription,null,i().createElement(p(),{date:this.props.artifact.createdOn,fromNow:!0}))),i().createElement(u.If,{condition:void 0!==this.props.artifact.createdBy&&""!==this.props.artifact.createdBy},i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"Owner"),i().createElement(s.DescriptionListDescription,null,i().createElement("span",null,this.props.artifact.createdBy),i().createElement("span",null,i().createElement(o.No,{isAdminOrOwner:!0,owner:this.props.artifact.createdBy},i().createElement(d.Q,{feature:"readOnly",isNot:!0},i().createElement(s.Button,{id:"edit-action","data-testid":"artifact-btn-edit",onClick:this.props.onChangeOwner,variant:"link"},i().createElement(l.PencilAltIcon,null)))))))),i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"Modified"),i().createElement(s.DescriptionListDescription,null,i().createElement(p(),{date:this.props.artifact.modifiedOn,fromNow:!0}))),i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"Global ID"),i().createElement(s.DescriptionListDescription,null,this.props.artifact.globalId)),i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"Content ID"),i().createElement(s.DescriptionListDescription,null,this.props.artifact.contentId)),i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"Labels"),this.labels().length?i().createElement(s.DescriptionListDescription,null,this.labels().map((function(t){return i().createElement(s.Label,{key:"label-"+t,color:"blue",style:{marginBottom:"2px",marginLeft:"5px"}},i().createElement(s.Truncate,{className:"label-truncate",content:t}))}))):i().createElement(s.DescriptionListDescription,{className:"empty-state-text"},"No labels")),i().createElement(s.DescriptionListGroup,null,i().createElement(s.DescriptionListTerm,null,"Properties"),this.props.artifact.properties&&Object.keys(this.props.artifact.properties).length?i().createElement(s.DescriptionListDescription,null,Object.entries(this.props.artifact.properties).map((function(t){var e=t[0],r=t[1];return i().createElement(s.Label,{key:"property-"+e,color:"purple",style:{marginBottom:"2px",marginLeft:"5px"}},i().createElement(s.Truncate,{className:"property-truncate",content:e+"="+r}))}))):i().createElement(s.DescriptionListDescription,{className:"empty-state-text"},"No properties"))),i().createElement("div",{className:"actions"},i().createElement(s.Button,{id:"download-action","data-testid":"artifact-btn-download",title:"Download artifact content",onClick:this.props.onDownloadArtifact,variant:"secondary"},i().createElement(l.DownloadIcon,null)," Download"))))),i().createElement("div",{className:"artifact-rules"},i().createElement(s.Card,null,i().createElement(s.CardTitle,null,i().createElement("div",{className:"rules-label"},"Content rules")),i().createElement(s.Divider,null),i().createElement(s.CardBody,null,i().createElement(o.RB,{rules:this.props.rules,onEnableRule:this.props.onEnableRule,onDisableRule:this.props.onDisableRule,onConfigureRule:this.props.onConfigureRule})))))},e.prototype.initializeState=function(){return{}},e.prototype.nameOrId=function(){return this.props.artifact.name?this.props.artifact.name:this.props.artifact.id},e.prototype.labels=function(){return this.props.artifact.labels||[]},e.prototype.description=function(){return this.props.artifact.description||"No description"},e.prototype.artifactName=function(){return this.props.artifact.name||"No name"},e}(o.Vx)},75602:(t,e,r)=>{r.d(e,{G:()=>c});var a,n=r(93264),i=r.n(n),o=r(79824),s=r(99922),l=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},a(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e){var r=t.call(this,e)||this;return r.onContentChange=function(t,e,a){r.setSingleState("content",t,(function(){r.fireOnChange(),r.checkValid()}))},r.onFileReadStarted=function(){r.setSingleState("contentIsLoading",!0)},r.onFileReadFinished=function(){r.setSingleState("contentIsLoading",!1)},r}return l(e,t),e.prototype.render=function(){return i().createElement(s.Form,null,i().createElement(s.FormGroup,{label:"Artifact",isRequired:!0,fieldId:"form-artifact"},i().createElement(s.FileUpload,{id:"artifact-content","data-testid":"form-upload",type:"text",filename:this.state.contentFilename,value:this.state.content,isRequired:!0,allowEditingUploadedText:!0,onChange:this.onContentChange,onReadStarted:this.onFileReadStarted,onReadFinished:this.onFileReadFinished,isLoading:this.state.contentIsLoading})))},e.prototype.initializeState=function(){return{content:"",contentFilename:"",contentIsLoading:!1,valid:!1}},e.prototype.checkValid=function(){var t=this,e=this.currentData(),r=this.state.valid,a=this.isValid(e),n=r!==a;this.setState({valid:a},(function(){n&&t.fireOnValid()}))},e.prototype.isValid=function(t){return!!t},e.prototype.currentData=function(){return this.state.content},e.prototype.fireOnChange=function(){this.props.onChange&&this.props.onChange(this.currentData())},e.prototype.fireOnValid=function(){this.props.onValid&&this.props.onValid(this.state.valid)},e}(o.Vx)}}]);
