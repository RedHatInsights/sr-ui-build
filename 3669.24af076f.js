"use strict";(self.webpackChunk_apicurio_registry_ui=self.webpackChunk_apicurio_registry_ui||[]).push([[3669],{37799:(e,t,r)=>{r.d(t,{I:()=>E});var n,a,o=r(93264),i=r.n(o),s=r(79824),c=r(99926),l=r(99922),p=(r(45898),r(67646)),u=(r(79253),r(42557),r(30798)),h=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(e){function t(t){var r=e.call(this,t)||this;return r.navigateBack=function(){window.history.back()},r}return h(t,e),t.prototype.render=function(){return i().createElement(i().Fragment,null,i().createElement(l.PageSection,{className:"ps_error",variant:l.PageSectionVariants.light},i().createElement("div",{className:"centerizer"},i().createElement(l.EmptyState,{variant:l.EmptyStateVariant.large},i().createElement(l.EmptyStateIcon,{icon:p.LockedIcon}),i().createElement(l.Title,{headingLevel:"h5",size:"lg"},"Access permissions needed"),i().createElement(l.EmptyStateBody,null,"To access this Service Registry instance, contact your organization administrators."),i().createElement(l.EmptyStateSecondaryActions,null,i().createElement(l.Button,{variant:"link","data-testid":"error-btn-back",onClick:this.navigateBack},"Return to previous page"))))))},t}(u.m),g=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),m=function(e){function t(t){var r=e.call(this,t)||this;return r.navigateBack=function(){window.history.back()},r}return g(t,e),t.prototype.render=function(){return i().createElement(i().Fragment,null,i().createElement(l.PageSection,{className:"ps_error",variant:l.PageSectionVariants.light},i().createElement("div",{className:"centerizer"},i().createElement(l.EmptyState,{variant:l.EmptyStateVariant.large},i().createElement(l.EmptyStateIcon,{icon:p.ExclamationCircleIcon}),i().createElement(l.Title,{headingLevel:"h5",size:"lg"},"Current usage is too high"),i().createElement(l.EmptyStateBody,null,"This Service Registry instance is throttled due to a high request rate. Ensure that existing applications are properly configured to cache the schemas."),i().createElement(l.EmptyStateSecondaryActions,null,i().createElement(l.Button,{variant:"link","data-testid":"error-btn-back",onClick:this.navigateBack},"Return to previous page"))))))},t}(u.m),d=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),y=function(){return y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},y.apply(this,arguments)},v=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)n[a]=o[i];return n};!function(e){e[e.React=0]="React",e[e.Server=1]="Server"}(a||(a={}));var E=function(e){function t(t){var r=e.call(this,t)||this;return setTimeout((function(){r.loadPageData()}),10),r}return d(t,e),t.prototype.initializeState=function(){return y(y({},this.initializePageState()),{isLoading:!0})},t.prototype.componentDidCatch=function(e,t){this.handleError(a.React,e,t)},t.prototype.render=function(){return this.isError()?this.is403Error()?i().createElement(f,{error:this.state.error}):this.is419Error()?i().createElement(m,{error:this.state.error}):i().createElement(s.mf,{error:this.state.error}):this.isLoading()?i().createElement(i().Fragment,null,i().createElement(l.PageSection,{variant:l.PageSectionVariants.default,isFilled:!0},i().createElement(l.Flex,null,i().createElement(l.FlexItem,null,i().createElement(l.Spinner,{size:"lg"})),i().createElement(l.FlexItem,null,i().createElement("span",null,"Loading..."))))):this.renderPage()},t.prototype.postConstruct=function(){s.Vx.setHistory(this.props.history),e.prototype.postConstruct.call(this)},t.prototype.createLoaders=function(){return null},t.prototype.handleServerError=function(e,t){this.handleError(a.Server,e,t)},t.prototype.getPathParam=function(e){var t=this.props.match.params[e];return decodeURIComponent(t)},t.prototype.isLoading=function(){return!!this.state.isLoading},t.prototype.loadPageData=function(){var e=this,t=this.createLoaders();null==t&&(t=[]),Array.isArray(t)||(t=[t]),0===(t=v([c.K9.getUsersService().updateCurrentUser()],t)).length?this.setSingleState("isLoading",!1):(this.setSingleState("isLoading",!0),Promise.all(t).then((function(){e.setSingleState("isLoading",!1)})).catch((function(t){c.K9.getLoggerService().debug("[PageComponent] Page data load failed, retrying.");var r=e.getRetries();r<1?(e.incrementRetries(),setTimeout((function(){e.loadPageData()}),100*Math.pow(2,r))):e.handleServerError(t,"Error loading page data.")})))},t.prototype.getRetries=function(){return void 0!==this.state.pageLoadRetries?this.state.pageLoadRetries:0},t.prototype.incrementRetries=function(){var e=this.getRetries()+1;this.setSingleState("pageLoadRetries",e)},t.prototype.isError=function(){return!!this.state.isError},t.prototype.is403Error=function(){return this.state.error&&this.state.error.error.status&&403==this.state.error.error.status},t.prototype.is419Error=function(){return this.state.error&&this.state.error.error.status&&419==this.state.error.error.status},t.prototype.handleError=function(e,t,r){c.K9.getLoggerService().error("[PageComponent] Handling an error of type: ",e),c.K9.getLoggerService().error("[PageComponent] ",r),c.K9.getLoggerService().error("[PageComponent] ",t),this.setMultiState({error:{error:t,errorMessage:r,type:e},isError:!0})},t}(s.Vx)},93669:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var n,a=r(93264),o=r.n(a),i=r(99922),s=r(37799),c=r(99926),l=r(79824),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t){var r=e.call(this,t)||this;return r.handleInputChange=function(e){var t=r.state.isValid,n=r.validate(e);r.setMultiState({currentValue:e,isDirty:e!==r.props.value,isValid:n},(function(){t!==n&&r.props.onValid(n),r.props.onChange(e)}))},r.handleKeyPress=function(e){"Escape"===e.code&&r.props.onCancel(),"Enter"===e.code&&r.state.isDirty&&r.state.isValid&&r.props.onSave()},r}return p(t,e),t.prototype.render=function(){return o().createElement(i.InputGroup,null,o().createElement(i.TextInput,{name:this.props.name,value:this.state.currentValue,validated:this.validated(),onChange:this.handleInputChange,onKeyDown:this.handleKeyPress,"aria-label":"configuration property input"}))},t.prototype.initializeState=function(){return{currentValue:this.props.value,isDirty:!1,isValid:!0}},t.prototype.validated=function(){return this.state.isValid?"default":"error"},t.prototype.validate=function(e){if("text"===this.props.type)return e.trim().length>0;if("number"===this.props.type){if(0===e.trim().length)return!1;var t=Number(e);return Number.isInteger(t)}return!0},t}(l.Vx),h=r(8556),f=r(67646),g=function(e){var t=e.property,r=e.onChange,n=(e.onReset,(0,a.useState)(!1)),s=n[0],c=n[1],l=(0,a.useState)(t.value),p=l[0],g=l[1],m=(0,a.useState)(!0),d=m[0],y=m[1],v=function(e){r(t,e?"true":"false")},E=function(e){g(e)},S=function(e){y(e)},C=function(){g(t.value),c(!1)},P=function(){y(!0),c(!0)},_=function(){r(t,p),c(!1)},b=function(e){return o().createElement(i.Flex,{className:"configuration-property string-property",flexWrap:{default:"nowrap"}},o().createElement(i.FlexItem,{grow:{default:"grow"}},o().createElement("div",{className:"property-name"},o().createElement("span",{className:"name"},t.label)),o().createElement("div",{className:"property-description"},t.description),o().createElement(h.If,{condition:!s},o().createElement("div",{className:"property-value"},t.value)),o().createElement(h.If,{condition:s},o().createElement("div",{className:"property-editor"},o().createElement(u,{name:t.name,value:t.value,type:e,onChange:E,onValid:S,onCancel:C,onSave:_})))),o().createElement(i.FlexItem,{className:"actions",align:{default:"alignRight"}},o().createElement(h.If,{condition:!s},o().createElement(i.Button,{variant:"plain",className:"action single",onClick:P},o().createElement(f.PencilAltIcon,null))),o().createElement(h.If,{condition:s},o().createElement(i.Button,{variant:"plain",className:"action",onClick:_,isDisabled:!d},o().createElement(f.CheckIcon,null)),o().createElement(i.Button,{variant:"plain",className:"action",onClick:C},o().createElement(f.CloseIcon,null)))))};return"java.lang.Boolean"===t.type?o().createElement(i.Flex,{className:"configuration-property boolean-property",flexWrap:{default:"nowrap"}},o().createElement(i.FlexItem,{grow:{default:"grow"}},o().createElement("div",{className:"property-name"},o().createElement("span",{className:"name"},t.label),o().createElement("span",{className:"sep"},":"),o().createElement("span",{className:"value"},"true"===t.value?"On":"Off")),o().createElement("div",{className:"property-description"},t.description)),o().createElement(i.FlexItem,{className:"actions",align:{default:"alignRight"}},o().createElement(i.Switch,{id:t.name,"aria-label":t.label,className:"action",isChecked:"true"===t.value,onChange:v}))):"java.lang.Integer"===t.type||"java.lang.Long"===t.type?b("number"):b("text")},m=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),d=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)n[a]=o[i];return n},y=[{id:"authn",label:"Authentication settings",propertyNames:["registry.auth.basic-auth-client-credentials.enabled"]},{id:"authz",label:"Authorization settings",propertyNames:["registry.auth.owner-only-authorization","registry.auth.owner-only-authorization.limit-group-access","registry.auth.anonymous-read-access.enabled","registry.auth.authenticated-read-access.enabled"]},{id:"compatibility",label:"Compatibility settings",propertyNames:["registry.ccompat.legacy-id-mode.enabled"]},{id:"console",label:"Web console settings",propertyNames:["registry.download.href.ttl","registry.ui.features.readOnly"]}],v=function(e){function t(t){var r=e.call(this,t)||this;return r.acceptProperty=function(e){if(!r.state.searchCriteria||0===r.state.searchCriteria.trim().length)return!0;var t=r.state.searchCriteria.toLocaleLowerCase();return e.label.toLocaleLowerCase().indexOf(t)>=0||e.description.toLocaleLowerCase().indexOf(t)>=0},r.onSearchCriteria=function(e){r.setSingleState("searchCriteria",e)},r.onSearchSettings=function(){r.filterProperties()},r.onSearchClear=function(){r.setMultiState({searchCriteria:""},r.onSearchSettings)},r.onPropertyChange=function(e,t){e.value=t,c.K9.getAdminService().setConfigurationProperty(e.name,t).then((function(){r.createLoaders(),c.K9.getAlertsService().settingChanged(e,t)})).catch((function(e){r.handleServerError(e,"Error setting configuration property")}))},r.onPropertyReset=function(e){c.K9.getAdminService().resetConfigurationProperty(e.name).then((function(){r.createLoaders()})).catch((function(e){r.handleServerError(e,"Error resetting configuration property")}))},r}return m(t,e),t.prototype.renderPage=function(){var e=this;return o().createElement(o().Fragment,null,o().createElement(i.PageSection,{className:"ps_settings-header",variant:i.PageSectionVariants.light,padding:{default:"noPadding"}},o().createElement(l.N4,{tabKey:3})),o().createElement(i.PageSection,{className:"ps_settings-description",variant:i.PageSectionVariants.light},o().createElement(i.TextContent,null,"Configure global settings for this Service Registry instance."),o().createElement(i.TextContent,{style:{marginTop:"10px",marginBottom:"5px",maxWidth:"450px"}},o().createElement(i.SearchInput,{placeholder:"Filter by keyword","aria-label":"Filter by keyword",value:this.state.searchCriteria,onChange:this.onSearchCriteria,onSearch:this.onSearchSettings,onClear:this.onSearchClear}))),o().createElement(i.PageSection,{variant:i.PageSectionVariants.default,isFilled:!0},o().createElement(l.Ng,{collection:this.state.searchedProperties,emptyStateMessage:"No settings found matching your search criteria."},this.propertyGroups().map((function(t){var r;return o().createElement(h.If,{key:t.id,condition:void 0!==t.properties&&t.properties.length>0},o().createElement(i.Card,{key:t.id,className:"config-property-group"},o().createElement(i.CardTitle,{className:"title"},t.label),o().createElement(i.CardBody,{className:"config-properties"},null===(r=t.properties)||void 0===r?void 0:r.map((function(t){return o().createElement(g,{key:t.name,property:t,onChange:e.onPropertyChange,onReset:e.onPropertyReset})})))))})))))},t.prototype.initializePageState=function(){return{searchCriteria:""}},t.prototype.createLoaders=function(){var e=this;return c.K9.getAdminService().listConfigurationProperties().then((function(t){e.setMultiState({isLoading:!1,properties:t}),e.filterProperties()}))},t.prototype.groupFor=function(e,t){for(var r=0,n=e;r<n.length;r++){var a=n[r];if(a.propertyNames.indexOf(t.name)>=0)return a}return e[e.length-1]},t.prototype.propertyGroups=function(){var e,t=this,r=d(y);r.forEach((function(e){return e.properties=[]}));return r.push({id:"additional",label:"Additional properties",properties:[],propertyNames:[]}),null===(e=this.state.searchedProperties)||void 0===e||e.forEach((function(e){var n;null===(n=t.groupFor(r,e).properties)||void 0===n||n.push(e)})),r.forEach((function(e){var t;e.properties=null===(t=e.properties)||void 0===t?void 0:t.sort((function(e,t){return e.label.localeCompare(t.label)}))})),r},t.prototype.filterProperties=function(){var e,t=null===(e=this.state.properties)||void 0===e?void 0:e.filter(this.acceptProperty);this.setSingleState("searchedProperties",t)},t}(s.I),E=r(2331),S=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const C=function(e){function t(t){return e.call(this,t)||this}return S(t,e),t.prototype.postConstruct=function(){E.m.updateConfiguration(this.props),e.prototype.postConstruct.call(this)},t}(v)}}]);
