/*! For license information please see 8115.520c0978.js.LICENSE.txt */
"use strict";(self.webpackChunk_apicurio_registry_ui=self.webpackChunk_apicurio_registry_ui||[]).push([[8115,2752],{35374:(e,t,n)=>{n.d(t,{N:()=>c});var r,i=n(93264),o=n.n(i),l=n(81167),a=n(29227),s=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.render=function(){return this.accept()?o().createElement(o().Fragment,{children:this.props.children}):o().createElement(o().Fragment,null)},t.prototype.initializeState=function(){return{}},t.prototype.accept=function(){var e=a.K9.getAuthService(),t=!0;return void 0!==this.props.enabled&&(t=t&&e.isAuthenticationEnabled()===this.props.enabled),void 0!==this.props.isAuthenticated&&(t=t&&e.isAuthenticated()===this.props.isAuthenticated),void 0!==this.props.isAdmin&&(t=t&&e.isUserAdmin()===this.props.isAdmin),void 0!==this.props.isDeveloper&&(t=t&&e.isUserDeveloper(this.props.owner)===this.props.isDeveloper),void 0!==this.props.isOwner&&this.props.owner&&(t=this.props.isOwner?t&&e.isUserId(this.props.owner):t&&!e.isUserId(this.props.owner)),!0===this.props.isAdminOrOwner&&this.props.owner&&(t=t&&(!0===e.isUserAdmin()||e.isUserId(this.props.owner))),t},t}(l.V)},26068:(e,t,n)=>{n.d(t,{Q:()=>c});var r,i=n(93264),o=n.n(i),l=n(81167),a=n(29227),s=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.render=function(){return this.accept()?o().createElement(o().Fragment,{children:this.props.children}):o().createElement(o().Fragment,null)},t.prototype.initializeState=function(){return{}},t.prototype.accept=function(){var e=a.K9.getConfigService().features()[this.props.feature];return void 0!==this.props.is?e===this.props.is:void 0!==this.props.isNot?e!==this.props.isNot:void 0!==e},t}(l.V)},98227:(e,t,n)=>{n.d(t,{N:()=>l});var r=n(93264),i=n.n(r),o=n(99922),l=function(e){var t=e.collection,n=e.emptyState,r=e.emptyStateTitle,l=e.emptyStateMessage,a=e.children,s=n||i().createElement(o.EmptyState,{variant:o.EmptyStateVariant.xs},i().createElement(o.Title,{headingLevel:"h4",size:"md"},r||"None found"),i().createElement(o.EmptyStateBody,null,l||"No items found."));return t&&0!==t.length?i().createElement(i().Fragment,{children:a}):i().createElement(i().Fragment,{children:s})}},66092:(e,t,n)=>{n.d(t,{N:()=>g});var r,i=n(93264),o=n.n(i),l=(n(3195),n(99922)),a=n(43221),s=n(81167),c=n(35374),p=n(46022),u=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=(function(e){function t(t){return e.call(this,t)||this}u(t,e),t.prototype.render=function(){var e;return e=o().createElement(l.PageHeaderTools,{className:"header-toolbar"},o().createElement(l.PageHeaderToolsGroup,null,o().createElement(l.PageHeaderToolsItem,{id:"avatar"},o().createElement(c.N,{enabled:!0},o().createElement(p.K,null))))),o().createElement(l.PageHeader,{logo:o().createElement(l.Brand,{onClick:this.navigateTo(this.linkTo("/artifacts")),src:a.Z,alt:"Apicurio Registry"}),showNavToggle:!1,headerTools:e})},t.prototype.initializeState=function(){return{}}}(s.V),n(83847),n(8876)),h=n(29227),f=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(e){function t(t){var n=e.call(this,t)||this;return n.handleTabClick=function(e,t){t!==n.props.tabKey&&(0===t&&n.navigateTo(n.linkTo("/artifacts"))(),1===t&&n.navigateTo(n.linkTo("/rules"))(),2===t&&n.navigateTo(n.linkTo("/roles"))(),3===t&&n.navigateTo(n.linkTo("/settings"))())},n}return f(t,e),t.prototype.render=function(){var e=[o().createElement(l.Tab,{key:0,eventKey:0,title:o().createElement(l.TabTitleText,null,"Artifacts")}),o().createElement(l.Tab,{key:1,eventKey:1,title:o().createElement(l.TabTitleText,null,"Global rules")})];return h.K9.getConfigService().featureRoleManagement()&&e.push(o().createElement(l.Tab,{key:2,eventKey:2,title:o().createElement(l.TabTitleText,null,"Access")})),h.K9.getConfigService().featureSettings()&&e.push(o().createElement(l.Tab,{key:3,eventKey:3,title:o().createElement(l.TabTitleText,null,"Settings")})),o().createElement("div",null,o().createElement(d.No,{isAdmin:!0},o().createElement(l.Tabs,{activeKey:this.props.tabKey,onSelect:this.handleTabClick,children:e})))},t.prototype.initializeState=function(){return{}},t}(s.V)},72058:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var r,i=n(56550),o=n(2331),l=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});const a=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.postConstruct=function(){o.m.updateConfiguration(this.props),e.prototype.postConstruct.call(this)},t}(i.F)},89872:(e,t,n)=>{n.d(t,{C0:()=>o.C,gx:()=>r.g,jx:()=>o.j,st:()=>i.s});var r=n(55194),i=n(51680),o=n(95101)},58306:(e,t,n)=>{n.d(t,{s:()=>S});var r,i=n(93264),o=n.n(i),l=(n(77685),n(99922)),a=n(67646),s=n(37799),c=n(29227),p=n(89872),u=n(79824),d=n(8556),h=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},g=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],l=0,a=o.length;l<a;l++,i++)r[i]=o[l];return r},m=["Account","Role"],S=function(e){function t(t){var n=e.call(this,t)||this;return n.onRoleFilterToggle=function(e){n.setSingleState("roleListFilterOpened",e)},n.onRoleFilterSelectToggle=function(e){n.setSingleState("roleFilterSelectInputOpened",e)},n.onRoleFilterSelect=function(e,t,r){n.setMultiState({roleFilterSelected:t,roleListFilterOpened:!1})},n.onRoleFilterInputChange=function(e){n.setSingleState("roleFilterTextInputValue",e)},n.onRoleFilterTextInputKeydown=function(e){"Enter"===e.key&&n.onRoleFilterApplyClick()},n.onRoleFilterApplyClick=function(){var e,t,r={principalId:n.state.roleFilterSelected==m[0]?n.state.roleFilterTextInputValue:null===(e=n.state.roleFilter)||void 0===e?void 0:e.principalId,role:n.state.roleFilterSelected==m[1]?n.state.roleFilterSelectInputValue:n.state.roleFilter.role,principalName:n.state.roleFilterSelected==m[0]?n.state.roleFilterTextInputValue:null===(t=n.state.roleFilter)||void 0===t?void 0:t.principalId};n.setMultiState({roleFilter:r,roleFilterTextInputValue:""})},n.onCreateRoleMapping=function(){n.setSingleState("isCreateRoleMappingModalOpen",!0)},n.isAccountFilterSelected=function(){return n.state.roleFilterSelected==m[0]},n.isRoleFilterSelected=function(){return n.state.roleFilterSelected==m[1]},n.onRoleFilterSelectChange=function(e,t,r){n.setMultiState({roleFilterSelectInputValue:t,roleFilterSelectInputOpened:!1},(function(){return n.onRoleFilterApplyClick()}))},n.closeRoleMappingModal=function(){n.setMultiState({selectedRole:void 0,isRoleMappingUpdate:!1,isCreateRoleMappingModalOpen:!1})},n.onEditRoleMapping=function(e){n.setMultiState({selectedRole:e,isRoleMappingUpdate:!0}),n.onCreateRoleMapping()},n.updateRoleMapping=function(e,t){n.pleaseWait(!0,"Granting access, please wait..."),c.K9.getAdminService().updateRoleMapping(e.id,t).then((function(t){var r=n.state.roles;r.forEach((function(n,i){n.principalId===t.principalId&&(r[i]=f(f({},t),{principalName:e.displayName}))})),n.pleaseWait(!1,""),n.setSingleState("roles",g(r))})).catch((function(e){return n.handleServerError(e,"Error updating access.")}))},n.createRoleMapping=function(e,t,r){n.closeRoleMappingModal(),r?n.updateRoleMapping(e,t):(n.pleaseWait(!0,"Granting access, please wait..."),c.K9.getAdminService().createRoleMapping(e.id,t,e.displayName).then((function(e){n.pleaseWait(!1,""),n.setSingleState("roles",g([e],n.state.roles))})).catch((function(r){409===(null==r?void 0:r.error_code)?n.updateRoleMapping(e,t):n.handleServerError(r,"Error granting access.")})))},n.onRevokeRoleMapping=function(e){n.pleaseWait(!0,"Revoking access for "+e+", please wait..."),c.K9.getAdminService().deleteRoleMapping(e).then((function(){n.pleaseWait(!1,""),n.removeMapping(e)})).catch((function(e){return n.handleServerError(e,"Error revoking access.")}))},n.pleaseWait=function(e,t){n.setMultiState({isPleaseWaitModalOpen:e,pleaseWaitMessage:t})},n}return h(t,e),t.prototype.renderPage=function(){var e=this;return o().createElement(o().Fragment,null,o().createElement(l.PageSection,{className:"ps_roles-header",variant:l.PageSectionVariants.light,padding:{default:"noPadding"}},o().createElement(u.N4,{tabKey:2})),o().createElement(l.PageSection,{variant:l.PageSectionVariants.default,isFilled:!0,className:"ps_role-section"},0===this.state.roles.length?o().createElement(p.gx,{onCreateRoleMapping:this.onCreateRoleMapping}):o().createElement(o().Fragment,null,o().createElement(l.Toolbar,{id:"toolbar",clearAllFilters:function(){e.setSingleState("roleFilter",{principalId:"",role:"",principalName:""})}},o().createElement(l.ToolbarContent,null,o().createElement(l.ToolbarGroup,null,o().createElement(l.ToolbarItem,{className:"ps_role-filter-select-toolbar-item"},o().createElement(l.Select,{variant:l.SelectVariant.single,"aria-label":"Filter On",onToggle:this.onRoleFilterToggle,onSelect:this.onRoleFilterSelect,selections:this.state.roleFilterSelected,isOpen:this.state.roleListFilterOpened},m.map((function(e,t){return o().createElement(l.SelectOption,{key:t,value:e})})))),o().createElement(l.ToolbarItem,null,o().createElement(l.InputGroup,null,this.isRoleFilterSelected()?o().createElement(l.Select,{variant:l.SelectVariant.single,"aria-label":"Role",onToggle:this.onRoleFilterSelectToggle,onSelect:this.onRoleFilterSelectChange,isOpen:this.state.roleFilterSelectInputOpened,placeholderText:"Filter by role"},o().createElement(l.SelectOption,{key:1,value:"Administrator"}),o().createElement(l.SelectOption,{key:2,value:"Manager"}),o().createElement(l.SelectOption,{key:3,value:"Viewer"})):o().createElement(l.TextInput,{value:this.state.roleFilterTextInputValue,placeholder:"Filter by account",name:"roleFilterInput",id:"roleFilterInput",type:"search","aria-label":"role filter input",onKeyDown:this.onRoleFilterTextInputKeydown,onChange:this.onRoleFilterInputChange}),o().createElement(d.If,{condition:this.isAccountFilterSelected},o().createElement(l.Button,{variant:l.ButtonVariant.control,"aria-label":"search button for search input",onClick:this.onRoleFilterApplyClick},o().createElement(a.SearchIcon,null))))),o().createElement(l.ToolbarItem,null,o().createElement(l.Button,{variant:"primary","data-testid":"btn-grant-access",onClick:this.onCreateRoleMapping},"Grant access")),o().createElement(l.ToolbarFilter,{chips:this.state.roleFilter.principalId.length>0?[this.state.roleFilter.principalId]:void 0,deleteChip:function(){e.setSingleState("roleFilter",{principalId:"",role:e.state.roleFilter.role,principalName:""})},categoryName:"Account"}," "),o().createElement(l.ToolbarFilter,{chips:this.state.roleFilter.role.length>0?[this.state.roleFilter.role]:void 0,deleteChip:function(){e.setSingleState("roleFilter",{principalId:e.state.roleFilter.principalId,role:"",principalName:e.state.roleFilter.principalName})},categoryName:"Role"}," ")))),o().createElement(p.st,{roles:this.state.roles,roleFilter:this.state.roleFilter,onRevoke:this.onRevokeRoleMapping,onEditRoleMapping:this.onEditRoleMapping}))),o().createElement(p.C0,{isOpen:this.state.isCreateRoleMappingModalOpen,isUpdateAccess:this.state.isRoleMappingUpdate,onClose:this.closeRoleMappingModal,onGrant:this.createRoleMapping,roles:this.state.isRoleMappingUpdate?this.state.roles:null,defaultRole:this.state.selectedRole}),o().createElement(u.jb,{message:this.state.pleaseWaitMessage,isOpen:this.state.isPleaseWaitModalOpen}))},t.prototype.initializePageState=function(){return{isCreateRoleMappingModalOpen:!1,isPleaseWaitModalOpen:!1,isRoleMappingUpdate:!1,pleaseWaitMessage:"",selectedRole:void 0,roles:[],roleFilter:{principalId:"",role:"",principalName:""},roleListFilterOpened:!1,roleFilterSelected:m[0],roleFilterTextInputValue:"",roleFilterSelectInputValue:"",roleFilterSelectInputOpened:!1}},t.prototype.createLoaders=function(){var e=this;return c.K9.getAdminService().getRoleMappings().then((function(t){e.setMultiState({isLoading:!1,roles:t})}))},t.prototype.removeMapping=function(e){var t=this.state.roles.filter((function(t){return t.principalId!==e}));this.setSingleState("roles",t)},t}(s.I)},6142:(e,t,n)=>{n.d(t,{_:()=>r});var r=function(){}},38780:(e,t,n)=>{n.d(t,{R:()=>r});var r=function(){function e(){}return e.AVRO="AVRO",e.PROTOBUF="PROTOBUF",e.JSON="JSON",e.OPENAPI="OPENAPI",e.ASYNCAPI="ASYNCAPI",e.GRAPHQL="GRAPHQL",e.KCONNECT="KCONNECT",e.WSDL="WSDL",e.XSD="XSD",e.XML="XML",e}()}}]);
//# sourceMappingURL=8115.520c0978.js.map