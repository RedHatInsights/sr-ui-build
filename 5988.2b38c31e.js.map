{"version":3,"file":"5988.2b38c31e.js","mappings":"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","sources":["webpack://@apicurio/registry-ui/./src/app/pages/artifacts/artifacts.federated.tsx","webpack://@apicurio/registry-ui/./src/app/pages/basePage.tsx","webpack://@apicurio/registry-ui/./src/app/components/errorPage/accessErrorPage.tsx","webpack://@apicurio/registry-ui/./src/app/components/errorPage/rateLimitErrorPage.tsx"],"sourcesContent":["/**\n * @license\n * Copyright 2021 Red Hat\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ArtifactsPage, ArtifactsPageProps } from \"./artifacts\";\nimport { FederatedComponentProps, FederatedUtils } from \"../../federated\";\n\nexport interface FederatedArtifactsPageProps extends ArtifactsPageProps, FederatedComponentProps {\n}\n\nexport default class FederatedArtifactsPage extends ArtifactsPage {\n\n    constructor(props: Readonly<FederatedArtifactsPageProps>) {\n        super(props);\n    }\n\n    protected postConstruct(): void {\n        FederatedUtils.updateConfiguration(this.props as FederatedComponentProps);\n        super.postConstruct();\n    }\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { ErrorPage, PageError, PureComponent, PureComponentProps, PureComponentState } from \"../components\";\nimport { Services } from \"../../services\";\nimport { Flex, FlexItem, PageSection, PageSectionVariants, Spinner } from \"@patternfly/react-core\";\nimport { AccessErrorPage } from \"../components/errorPage/accessErrorPage\";\nimport { RateLimitErrorPage } from \"../components/errorPage/rateLimitErrorPage\";\n\n// TODO this should be configurable via standard UI config settings\nconst MAX_RETRIES: number = 1;\n\nexport enum PageErrorType {\n    React, Server\n}\n\n/**\n * Properties\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface PageProps extends PureComponentProps {\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface PageState extends PureComponentState {\n    pageLoadRetries?: number;\n    isLoading?: boolean;\n    isError?: boolean;\n    error?: PageError;\n}\n\n\n/**\n * The artifacts page.\n */\nexport abstract class PageComponent<P extends PageProps, S extends PageState> extends PureComponent<P, S> {\n\n    protected constructor(props: Readonly<P>) {\n        super(props);\n        setTimeout(() => {\n            this.loadPageData();\n        }, 10);\n    }\n\n    protected initializeState(): S {\n        return {\n            ...this.initializePageState(),\n            isLoading: true\n        };\n    }\n\n    protected abstract initializePageState(): S;\n\n    public componentDidCatch(error: Error, errorInfo: React.ErrorInfo): void {\n        this.handleError(PageErrorType.React, error, errorInfo);\n    }\n\n    public render(): React.ReactElement {\n        if (this.isError()) {\n            if (this.is403Error()) {\n                return (\n                    <AccessErrorPage error={this.state.error}/>\n                );\n            } else if (this.is419Error()) {\n                return (\n                    <RateLimitErrorPage error={this.state.error}/>\n                );\n            } else {\n                return (\n                    <ErrorPage error={this.state.error}/>\n                );\n            }\n        } else if (this.isLoading()) {\n            return (\n                <React.Fragment>\n                    <PageSection variant={PageSectionVariants.default} isFilled={true}>\n                        <Flex>\n                            <FlexItem><Spinner size=\"lg\"/></FlexItem>\n                            <FlexItem><span>Loading...</span></FlexItem>\n                        </Flex>\n                    </PageSection>\n                </React.Fragment>\n            );\n        } else {\n            return this.renderPage();\n        }\n    }\n\n    /**\n     * Renders the page content.  Subclasses should implement this instead of render() so that\n     * errors are handled/displayed properly.\n     */\n    protected abstract renderPage(): React.ReactElement;\n\n    protected postConstruct(): void {\n        // @ts-ignore\n        PureComponent.setHistory(this.props.history);\n        super.postConstruct();\n    }\n\n    // @ts-ignore\n    protected createLoaders(): Promise | Promise[] | null {\n        return null;\n    }\n\n    protected handleServerError(error: any, errorMessage: string): void {\n        this.handleError(PageErrorType.Server, error, errorMessage);\n    }\n\n    protected getPathParam(paramName: string): string {\n        // @ts-ignore\n        const paramValue: string = this.props.match.params[paramName];\n        const paramValueDecoded: string = decodeURIComponent(paramValue);\n        return paramValueDecoded;\n    }\n\n    protected isLoading(): boolean {\n        return this.state.isLoading ? true : false;\n    }\n\n    private loadPageData(): void {\n        // @ts-ignore\n        let loaders: Promise | Promise[] | null = this.createLoaders();\n\n        // If not loading anything, convert from null to empty array\n        if (loaders == null) {\n            loaders = [];\n        }\n\n        // Convert to array if not already\n        if (!Array.isArray(loaders)) {\n            loaders = [ loaders ];\n        }\n\n        // Always add the \"update current user\" loader\n        loaders = [\n            Services.getUsersService().updateCurrentUser(),\n            ...loaders\n        ];\n\n        if (loaders.length === 0) {\n            this.setSingleState(\"isLoading\", false);\n        } else {\n            this.setSingleState(\"isLoading\", true);\n            Promise.all(loaders).then(() => {\n                this.setSingleState(\"isLoading\", false);\n            }).catch(error => {\n                Services.getLoggerService().debug(\"[PageComponent] Page data load failed, retrying.\");\n                const retries: number = this.getRetries();\n                if (retries < MAX_RETRIES) {\n                    this.incrementRetries();\n                    setTimeout(() => {\n                        this.loadPageData();\n                    }, Math.pow(2, retries) * 100);\n                } else {\n                    this.handleServerError(error, \"Error loading page data.\");\n                }\n            });\n        }\n    }\n\n    private getRetries(): number {\n        return this.state.pageLoadRetries !== undefined ? this.state.pageLoadRetries as number : 0;\n    }\n\n    private incrementRetries(): void {\n        const retries: number = this.getRetries() + 1;\n        this.setSingleState(\"pageLoadRetries\", retries);\n    }\n\n    private isError(): boolean {\n        return this.state.isError ? true : false;\n    }\n\n    private is403Error(): boolean {\n        return this.state.error && this.state.error.error.status && (this.state.error.error.status == 403);\n    }\n\n    private is419Error(): boolean {\n        return this.state.error && this.state.error.error.status && (this.state.error.error.status == 419);\n    }\n\n    private handleError(errorType: PageErrorType, error: any, errorMessage: any): void {\n        Services.getLoggerService().error(\"[PageComponent] Handling an error of type: \", errorType);\n        Services.getLoggerService().error(\"[PageComponent] \", errorMessage);\n        Services.getLoggerService().error(\"[PageComponent] \", error);\n        this.setMultiState({\n            error: {\n                error,\n                errorMessage,\n                type: errorType\n            },\n            isError: true\n        });\n    }\n}\n","/**\n * @license\n * Copyright 2021 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport \"./errorPage.css\";\nimport {\n    Button,\n    EmptyState,\n    EmptyStateBody,\n    EmptyStateIcon,\n    EmptyStateSecondaryActions,\n    EmptyStateVariant,\n    PageSection,\n    PageSectionVariants,\n    Title\n} from \"@patternfly/react-core\";\nimport { LockedIcon } from \"@patternfly/react-icons\";\nimport \"ace-builds/src-noconflict/mode-text\";\nimport \"ace-builds/src-noconflict/theme-tomorrow\";\nimport { ErrorPage, ErrorPageProps } from \"./errorPage\";\n\n\nexport class AccessErrorPage extends ErrorPage {\n\n    constructor(props: Readonly<ErrorPageProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <React.Fragment>\n                <PageSection className=\"ps_error\" variant={PageSectionVariants.light}>\n                    <div className=\"centerizer\">\n                        <EmptyState variant={EmptyStateVariant.large}>\n                            <EmptyStateIcon icon={LockedIcon} />\n                            <Title headingLevel=\"h5\" size=\"lg\">Access permissions needed</Title>\n                            <EmptyStateBody>\n                                To access this Service Registry instance, contact your organization administrators.\n                            </EmptyStateBody>\n                            <EmptyStateSecondaryActions>\n                                <Button variant=\"link\"\n                                        data-testid=\"error-btn-back\"\n                                        onClick={this.navigateBack}>Return to previous page</Button>\n                            </EmptyStateSecondaryActions>\n                        </EmptyState>\n                    </div>\n                </PageSection>\n            </React.Fragment>\n        );\n    }\n\n    protected navigateBack = (): void => {\n        window.history.back();\n    };\n\n}\n","/**\n * @license\n * Copyright 2022 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport \"./errorPage.css\";\nimport {\n    Button,\n    EmptyState,\n    EmptyStateBody,\n    EmptyStateIcon,\n    EmptyStateSecondaryActions,\n    EmptyStateVariant,\n    PageSection,\n    PageSectionVariants,\n    Title\n} from \"@patternfly/react-core\";\nimport { ExclamationCircleIcon } from \"@patternfly/react-icons\";\nimport \"ace-builds/src-noconflict/mode-text\";\nimport \"ace-builds/src-noconflict/theme-tomorrow\";\nimport { ErrorPage, ErrorPageProps } from \"./errorPage\";\n\n\nexport class RateLimitErrorPage extends ErrorPage {\n\n    constructor(props: Readonly<ErrorPageProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <React.Fragment>\n                <PageSection className=\"ps_error\" variant={PageSectionVariants.light}>\n                    <div className=\"centerizer\">\n                        <EmptyState variant={EmptyStateVariant.large}>\n                            <EmptyStateIcon icon={ExclamationCircleIcon} />\n                            <Title headingLevel=\"h5\" size=\"lg\">Current usage is too high</Title>\n                            <EmptyStateBody>\n                                This Service Registry instance is throttled due to a high request rate. Ensure\n                                that existing applications are properly configured to cache the schemas.\n                            </EmptyStateBody>\n                            <EmptyStateSecondaryActions>\n                                <Button variant=\"link\"\n                                        data-testid=\"error-btn-back\"\n                                        onClick={this.navigateBack}>Return to previous page</Button>\n                            </EmptyStateSecondaryActions>\n                        </EmptyState>\n                    </div>\n                </PageSection>\n            </React.Fragment>\n        );\n    }\n\n    protected navigateBack = (): void => {\n        window.history.back();\n    };\n\n}\n"],"names":["props","postConstruct","this","PageErrorType","navigateBack","window","history","back","render","PageSection","className","variant","PageSectionVariants","EmptyState","EmptyStateVariant","EmptyStateIcon","icon","LockedIcon","Title","headingLevel","size","EmptyStateBody","EmptyStateSecondaryActions","Button","onClick","ExclamationCircleIcon","setTimeout","loadPageData","initializeState","initializePageState","isLoading","componentDidCatch","error","errorInfo","handleError","React","isError","is403Error","AccessErrorPage","state","is419Error","RateLimitErrorPage","isFilled","Flex","FlexItem","Spinner","renderPage","createLoaders","handleServerError","errorMessage","Server","getPathParam","paramName","paramValue","match","params","decodeURIComponent","loaders","Array","isArray","updateCurrentUser","length","setSingleState","Promise","all","then","catch","debug","retries","getRetries","incrementRetries","Math","pow","undefined","pageLoadRetries","status","errorType","setMultiState","type"],"sourceRoot":""}