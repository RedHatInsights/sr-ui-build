{"version":3,"file":"982.bundle.dc3118930f80fdf683ac.js","mappings":";0eAuCA,cAEI,WAAYA,UACR,YAAMA,IAAM,KAuBpB,OA1BwB,OAMb,YAAAC,OAAP,WACI,OAAIC,KAAKC,SACE,kBAAC,aAAc,CAACC,SAAUF,KAAKF,MAAMI,WAErC,kBAAC,aAAc,OAIpB,YAAAC,gBAAV,WACI,MAAO,IAGH,YAAAF,OAAR,WACI,MAAoC,kBAAzBD,KAAKF,MAAMM,UACXJ,KAAKF,MAAMM,UAEXJ,KAAKF,MAAMM,aAI9B,EA1BA,CAAwB,g4BC+CxB,kBAEI,WAAYN,GAAZ,MACI,YAAMA,IAAM,YA2KR,EAAAO,eAAiB,SAACC,EAAYC,GAClC,EAAKC,eAAe,eAAgBD,IAGhC,EAAAE,gBAAkB,WACtB,EAAKD,eAAe,qBAAqB,IAGrC,EAAAE,iBAAmB,WACvB,EAAKF,eAAe,qBAAqB,IAerC,EAAAG,aAAe,SAACC,GACpB,EAAAC,SAAA,mBAA4BC,MAAM,uCAAwCF,GAC1E,IAAIG,EAAiB,OACJ,kBAAbH,IACAG,EAAS,YAEb,EAAAF,SAAA,mBAA4BG,mBAAmB,EAAKC,UAAW,EAAKC,aAAcN,EAAUG,GAAQI,OAAM,SAAAC,GACtG,EAAKC,kBAAkBD,EAAO,mBAAoBR,EAAQ,uBAE9D,EAAKJ,eAAe,QAAS,EAAI,EAAKc,QAAS,EAACP,OAAM,EAAEQ,KAAMX,OAG1D,EAAAY,cAAgB,SAACZ,GACrB,EAAAC,SAAA,mBAA4BC,MAAM,wCAAyCF,GAC3E,EAAAC,SAAA,mBAA4BY,mBAAmB,EAAKR,UAAW,EAAKC,aAAcN,GAAUO,OAAM,SAAAC,GAC9F,EAAKC,kBAAkBD,EAAO,oBAAqBR,EAAQ,uBAE/D,EAAKJ,eAAe,QAAS,EAAKc,QAAQI,QAAO,SAAAC,GAAK,OAAAA,EAAEJ,OAASX,OAG7D,EAAAgB,gBAAkB,SAAChB,EAAkBG,GACzC,EAAAF,SAAA,mBAA4BC,MAAM,0CAA2CF,EAAUG,GACvF,EAAAF,SAAA,mBAA4BgB,mBAAmB,EAAKZ,UAAW,EAAKC,aAAcN,EAAUG,GAAQI,OAAM,SAAAC,GACtG,EAAKC,kBAAkBD,EAAO,sBAAuBR,EAAQ,uBAEjE,EAAKJ,eAAe,QAAS,EAAKc,QAAQQ,KAAI,SAAAH,GAC1C,OAAIA,EAAEJ,OAASX,EACJ,CAACG,OAAM,EAAEQ,KAAMI,EAAEJ,MAEjBI,OAKX,EAAAI,mBAAqB,yBACnBC,EAAkB,EAAKC,MAAMC,gBAE/BC,EAAsB,EAAAC,aAAA,iBACtBC,EAAe,QACI,QAAnB,IAAKJ,MAAMK,gBAAQ,eAAEf,QAAS,EAAAgB,cAAA,WAC9BJ,EAAc,EAAAC,aAAA,qBACdC,EAAO,UAEY,QAAnB,IAAKJ,MAAMK,gBAAQ,eAAEf,QAAS,EAAAgB,cAAA,OAC9BJ,EAAc,EAAAC,aAAA,gBACdC,EAAO,SAEY,QAAnB,IAAKJ,MAAMK,gBAAQ,eAAEf,QAAS,EAAAgB,cAAA,MAC9BJ,EAAc,EAAAC,aAAA,gBACdC,EAAO,QAEY,QAAnB,IAAKJ,MAAMK,gBAAQ,eAAEf,QAAS,EAAAgB,cAAA,MAC9BJ,EAAc,EAAAC,aAAA,gBACdC,EAAO,QAEY,QAAnB,IAAKJ,MAAMK,gBAAQ,eAAEf,QAAS,EAAAgB,cAAA,UAC9BJ,EAAc,EAAAC,aAAA,iBACdC,EAAO,WAGX,IAAMG,EAAgB,EAAKC,mBAAqB,IAAMJ,EACtD,EAAAxB,SAAA,uBAAgC6B,aAAaV,EAASG,EAAaK,IAkD/D,EAAAG,kBAAoB,SAACC,GACzB,EAAKpC,eAAe,oBAAqBoC,IAGrC,EAAAC,mBAAqB,SAACC,GAC1B,EAAKtC,eAAe,iBAAkBsC,IAGlC,EAAAC,mBAAqB,WACzB,EAAKvC,eAAe,qBAAqB,IAGrC,EAAAwC,mBAAqB,WACzB,EAAKxC,eAAe,qBAAqB,IAGrC,EAAAyC,wBAA0B,WAG9B,GAFA,EAAKF,qBACL,EAAKG,YAAW,EAAM,yCACY,OAA9B,EAAKjB,MAAMkB,eAAyB,CACpC,IAAML,EAA0B,CAC5Bd,QAAS,EAAKC,MAAMkB,eACpB5B,KAAM,EAAK6B,gBAEf,EAAAvC,SAAA,mBAA4BwC,sBAAsB,EAAKpC,UAAW,EAAKC,aAAc4B,GAAMQ,MAAK,SAAAC,GAC5F,IAAMtC,EAAkBsC,EAAgBtC,QAAUsC,EAAgBtC,QAAU,UACtEuC,EAAkC,cAAeC,mBAAmBxC,GAAQ,IAAMwC,mBAAmBF,EAAgBG,IAAG,aAAcH,EAAgBI,QAC5J,EAAA9C,SAAA,mBAA4B+C,KAAK,0FAA2FJ,GAC5H,EAAKK,WAAW,EAAKC,OAAON,GAA5B,MACDrC,OAAO,SAAAC,GACN,EAAK8B,YAAW,EAAO,KACnB9B,GAA+B,MAArBA,EAAM2C,YAA2C,MAArB3C,EAAM2C,WAG5C,EAAK1C,kBAAkBD,EAAO,qCAF9B,EAAK4C,0BAA0B5C,GAInC,EAAK6C,cAAc,CAACd,eAAgB,KAAMe,mBAAmB,SAKjE,EAAAC,iBAAmB,WACvB,EAAKnB,qBACL,EAAKE,YAAW,EAAM,qCACtB,EAAArC,SAAA,mBAA4BuD,eAAe,EAAKnD,UAAW,EAAKC,cAAcoC,MAAM,WAChF,EAAKJ,YAAW,EAAO,IACvB,EAAKW,WAAW,EAAKC,OAAO,cAA5B,OAIA,EAAAO,sBAAwB,WAC5B,EAAK7D,eAAe,mBAAmB,IAGnC,EAAA8D,iBAAmB,WACvB,EAAK9D,eAAe,mBAAmB,IAGnC,EAAA+D,eAAiB,SAACC,GACtB,EAAA3D,SAAA,mBAA4B4D,uBAAuB,EAAKxD,UAAW,EAAKC,aAAc,EAAKwD,eAAgBF,GAAUlB,MAAM,WACnH,EAAKrB,MAAMK,UACX,EAAK9B,eAAe,WAAY,EAAF,KACvB,EAAKyB,MAAMK,UACXkC,OAGZrD,OAAO,SAAAC,GACN,EAAKC,kBAAkBD,EAAO,uCAElC,EAAKkD,oBAGD,EAAAK,yBAA2B,WAC/B,EAAKnE,eAAe,6BAA6B,IAG7C,EAAA0C,WAAa,SAAC0B,EAAiBC,GACnC,EAAKZ,cAAc,CACfa,sBAAuBF,EACvBG,kBAAmBF,OAY/B,OAhZyC,OAM9B,YAAAG,WAAP,WACI,IAAM1C,EAA6BtC,KAAKiC,MAAMK,SAAWtC,KAAKiC,MAAMK,SAAW,IAAI,EAAA2C,iBAC7EC,EAA0B,CAC5B,kBAAC,EAAAC,IAAG,CAACC,SAAU,EAAGC,MAAM,OAAOC,IAAI,OAAOC,aAAa,YACnD,kBAAC,KAAc,CAACjD,SAAUA,EACVkD,SAAkC,WAAxBxF,KAAK0E,eACfpD,MAAOtB,KAAKsB,QACZmE,aAAczF,KAAKW,aACnB+E,cAAe1F,KAAKwB,cACpBmE,gBAAiB3F,KAAK4B,gBACtBgE,mBAAoB5F,KAAK+B,mBACzB8D,eAAgB7F,KAAKqE,yBAGzC,kBAAC,EAAAc,IAAG,CAACC,SAAU,EAAGC,MAAM,gBAAgBC,IAAI,iBACxC,kBAAC,KAAuB,CAACpD,gBAAiBlC,KAAKiC,MAAMC,gBAAiBkB,aAAcd,EAASf,QAEjG,kBAAC,EAAA4D,IAAG,CAACC,SAAU,EAAGC,MAAM,UAAUC,IAAI,WAClC,kBAAC,KAAiB,CAACpD,gBAAiBlC,KAAKiC,MAAMC,gBAAiBkB,aAAcd,EAASf,SAG1FvB,KAAK8F,wBACNZ,EAAKa,OAAO,EAAG,GAGnB,IAAI9E,EAAkBjB,KAAKgG,eACvBC,EAA+B,WAAXhF,EACpBiF,EACA,kBAAC,EAAAC,WAAU,KACP,kBAAC,EAAAC,eAAc,KAAC,kBAAC,EAAAC,KAAI,CAACC,GAAItG,KAAK8D,OAAO,cAAa,cAAc,4BAA0B,cAC3F,kBAAC,EAAAsC,eAAc,KAAC,kBAAC,EAAAC,KAAI,CAACC,GAAItG,KAAK8D,OAAO,oBAAqBL,mBAAmBxC,IAAY,cACxD,wBAAyBA,IAC3D,kBAAC,EAAAmF,eAAc,CAACG,UAAU,GAAQvG,KAAKkB,eAY/C,OATK+E,IACDC,EACI,kBAAC,EAAAC,WAAU,KACP,kBAAC,EAAAC,eAAc,KAAC,kBAAC,EAAAC,KAAI,CAACC,GAAG,aAAY,cAAa,4BAA0B,cAC5E,kBAAC,EAAAF,eAAc,CAACG,UAAU,GAAQvG,KAAKkB,gBAM/C,kBAAC,aAAc,KACX,kBAAC,KAAS,CAACsF,QAAQ,cAAcC,IAAI,GACjC,kBAAC,EAAAC,YAAW,CAACC,UAAU,wBAAwBC,QAAS,EAAAC,oBAAA,MAA2B3G,SAAUgG,KAEjG,kBAAC,EAAAQ,YAAW,CAACC,UAAU,6BAA6BC,QAAS,EAAAC,oBAAA,OACzD,kBAAC,IAAyB,CAACxB,MAAOrF,KAAK8G,WACZC,SAAU/G,KAAK+G,WACfpD,QAAS3D,KAAK0E,eACdjE,gBAAiBT,KAAKS,gBACtBC,iBAAkBV,KAAKU,iBACvBO,QAASA,EACTC,WAAYlB,KAAKkB,gBAEhD,kBAAC,EAAAwF,YAAW,CAACE,QAAS,EAAAC,oBAAA,MAA2BG,UAAU,EAAMC,QAAS,CAACC,QAAU,aAAcP,UAAU,yBACzG,kBAAC,EAAAQ,KAAI,CAACR,UAAU,qBACVjD,GAAG,qBACH0D,eAAe,EACfJ,UAAU,EACVK,UAAWrH,KAAKiC,MAAMqF,aACtBpH,SAAUgF,EACVqC,SAAUvH,KAAKK,kBAGzB,kBAAC,EAAAmH,MAAK,CACFnC,MAAM,0BACNuB,QAAQ,QACRhC,OAAQ5E,KAAKiC,MAAMwF,kBACnBC,QAAS1H,KAAK+C,mBACd4D,UAAU,yCACVgB,QAAS,CACL,kBAAC,EAAAC,OAAM,CAACtC,IAAI,SAASsB,QAAQ,UAAS,cAAa,mBAAmBiB,QAAS7H,KAAKiD,wBAAyB6E,YAAa9H,KAAKiC,MAAMiC,mBAAiB,UACtJ,kBAAC,EAAA0D,OAAM,CAACtC,IAAI,SAASsB,QAAQ,OAAM,cAAa,mBAAmBiB,QAAS7H,KAAK+C,oBAAkB,YAGvG,kBAAC,IAAiB,CAACgF,SAAU/H,KAAK6C,mBAAoBmF,QAAShI,KAAK2C,qBAExE,kBAAC,EAAA6E,MAAK,CACFnC,MAAM,kBACNuB,QAAQ,QACRhC,OAAQ5E,KAAKiC,MAAMgG,kBACnBP,QAAS1H,KAAKgD,mBACd2D,UAAU,yCACVgB,QAAS,CACL,kBAAC,EAAAC,OAAM,CAACtC,IAAI,SAASsB,QAAQ,UAAS,cAAa,mBAAmBiB,QAAS7H,KAAKmE,kBAAgB,UACpG,kBAAC,EAAAyD,OAAM,CAACtC,IAAI,SAASsB,QAAQ,OAAM,cAAa,mBAAmBiB,QAAS7H,KAAKgD,oBAAkB,YAGvG,2HAEJ,kBAAC,IAAiB,CAACkF,KAAMlI,KAAKmI,eACXC,YAAapI,KAAKqI,sBAClBC,OAAQtI,KAAKuI,iBACb3D,OAAQ5E,KAAKiC,MAAMuG,gBACnBd,QAAS1H,KAAKsE,iBACduB,eAAgB7F,KAAKuE,iBAExC,kBAAC,IAAmB,CAACnD,MAAOpB,KAAKiC,MAAMwG,oBAClB7D,OAAQ5E,KAAKiC,MAAMyG,0BACnBhB,QAAS1H,KAAK2E,2BACnC,kBAAC,IAAe,CAACE,QAAS7E,KAAKiC,MAAM8C,kBACpBH,OAAQ5E,KAAKiC,MAAM6C,0BAKtC,YAAA6D,oBAAV,WACI,MAAO,CACHrB,aAAc,EACdhF,SAAU,KACVJ,gBAAiB,GACjB0G,gBAAgB,EAChBH,oBAAqB,KACrBR,mBAAmB,EACnBO,iBAAiB,EACjBE,2BAA2B,EAC3B5D,uBAAuB,EACvBZ,mBAAmB,EACnBuD,mBAAmB,EACnB1C,kBAAmB,GACnBzD,MAAO,KACP6B,eAAgB,KAChB4D,SAAU,OAIR,YAAAf,aAAV,WACI,OAAOhG,KAAK6I,aAAa,YAGnB,YAAAC,gBAAV,WACI,OAAO9I,KAAK6I,aAAa,eAGnB,YAAAnE,aAAV,WACI,OAAO1E,KAAK6I,aAAa,YAInB,YAAAE,cAAV,sBACQ9H,EAAuBjB,KAAKgG,eACjB,WAAX/E,IACAA,EAAU,MAEd,IAAMC,EAAqBlB,KAAK8I,kBAEhC,OADA,EAAAjI,SAAA,mBAA4B+C,KAAK,8BAA+B1C,GACzD,CACH,EAAAL,SAAA,mBAA4BmI,oBAAoB/H,EAASC,EAAYlB,KAAK0E,gBAAgBpB,MAAK,SAAA2F,GAAM,SAAKzI,eAAe,WAAYyI,MACrI,EAAApI,SAAA,mBAA4BqI,mBAAmBjI,EAASC,EAAYlB,KAAK0E,gBACpEpB,MAAK,SAAAtB,GAAW,SAAKxB,eAAe,kBAAmBwB,MACvDb,OAAM,SAAAgI,GAEH,GADA,EAAAtI,SAAA,mBAA4BuI,KAAK,mCAAoCD,IAlLzF,SAAeA,GACX,GAAiB,iBAANA,EACP,IACI,IAAME,EAAUC,KAAKC,MAAMJ,GAC3B,GAAIE,GAAMA,EAAGtF,YAAgC,MAAlBsF,EAAGtF,WAC1B,OAAO,EAEb,MAAOoF,IAIb,OAAO,EAwKaK,CAAML,GAGN,MAAMA,EAFN,EAAK3I,eAAe,kBAAmB,8DAMnD,EAAAK,SAAA,mBAA4B4I,iBAAiBxI,EAASC,GAAYoC,MAAK,SAAAhC,GAAS,SAAKd,eAAe,QAASc,MAC7G,EAAAT,SAAA,mBAA4B6I,oBAAoBzI,EAASC,GAAYoC,MAAK,SAAAyD,GAAY,SAAKvG,eAAe,WAAYuG,EAAS4C,gBAgB/H,YAAA7D,qBAAR,WACI,QAAI9F,KAAKiC,MAAMK,WACyB,YAA7BtC,KAAKiC,MAAMK,SAASf,MAAoD,aAA9BvB,KAAKiC,MAAMK,SAASL,QAMrE,YAAAX,MAAR,WACI,OAAOtB,KAAKiC,MAAMX,MAAQtB,KAAKiC,MAAMX,MAAQ,IAmEzC,YAAAwF,SAAR,WACI,OAAK9G,KAAKiC,MAAMK,SAGTtC,KAAKiC,MAAMK,SAAS4F,KAAOlI,KAAKiC,MAAMK,SAAS4F,KAAOlI,KAAKiC,MAAMK,SAASoB,GAFtE,IAKP,YAAAqD,SAAR,WACI,OAAO/G,KAAKiC,MAAM8E,SAAW/G,KAAKiC,MAAM8E,SAAW,IAG/C,YAAA7F,WAAR,WACI,OAAOlB,KAAKiC,MAAMK,SAAWtC,KAAKiC,MAAMK,SAASoB,GAAK,IAGlD,YAAAzC,QAAR,WACI,OAAOjB,KAAKiC,MAAMK,SAAWtC,KAAKiC,MAAMK,SAASrB,QAAU,MAGvD,YAAAmC,aAAR,WACI,OAAOpD,KAAKiC,MAAMK,SAAWtC,KAAKiC,MAAMK,SAASf,KAAO,IAGpD,YAAAkB,iBAAR,WACI,OAAOzC,KAAKiC,MAAMK,SACdtC,KAAKiC,MAAMK,SAAS4F,KAAOlI,KAAKiC,MAAMK,SAAS4F,KAAOlI,KAAKiC,MAAMK,SAASoB,GAC1E,IAGA,YAAAyE,aAAR,WACI,OAAOnI,KAAKiC,MAAMK,UACdtC,KAAKiC,MAAMK,SAAS4F,KAAOlI,KAAKiC,MAAMK,SAAS4F,KAC/C,IAGA,YAAAG,oBAAR,WACI,OAAOrI,KAAKiC,MAAMK,UACdtC,KAAKiC,MAAMK,SAAS8F,YAAcpI,KAAKiC,MAAMK,SAAS8F,YACtD,IAGA,YAAAG,eAAR,WACI,OAAOvI,KAAKiC,MAAMK,UACdtC,KAAKiC,MAAMK,SAASgG,OAAStI,KAAKiC,MAAMK,SAASgG,OACjD,IAsFA,YAAAtE,0BAAR,SAAkC5C,GAC9B,EAAAP,SAAA,mBAA4B+C,KAAK,wBAAyBxC,GAC1DpB,KAAKiE,cAAc,CACfwE,oBAAqBrH,EACrBsH,2BAA2B,KAIvC,EAhZA,CAAyC,0lBCxCzC,cAEI,WAAY5I,GAAZ,MACI,YAAMA,IAAM,YAyGR,EAAA8J,OAAS,WACb,EAAK9J,MAAM+F,eAAe,EAAK5D,MAAMuC,WAGjC,EAAAqF,aAAe,SAACC,GACpB,EAAKtJ,eAAe,WAAY,EAAF,KACvB,EAAKyB,MAAMuC,UAAQ,CACtB0D,KAAM4B,MAIN,EAAAC,eAAiB,SAACD,GACtB,IAAIxB,EAAmB,GACnBwB,GAASA,EAAME,OAAOC,OAAS,IAC/B3B,EAASwB,EAAME,OAAOE,MAAM,KAAKpI,KAAI,SAAAqI,GAAQ,OAAAA,EAAKH,WAEtD,EAAK/F,cAAc,CACfqE,OAAQwB,EACRtF,SAAU,EAAF,KACD,EAAKvC,MAAMuC,UAAQ,CACtB8D,OAAM,OAKV,EAAA8B,oBAAsB,SAACN,GAC3B,EAAKtJ,eAAe,WAAY,EAAF,KACvB,EAAKyB,MAAMuC,UAAQ,CACtB4D,YAAa0B,QAIzB,OA5IuC,OAM5B,YAAA/J,OAAP,WACI,OACI,kBAAC,EAAAyH,MAAK,CACFnC,MAAM,yBACNuB,QAAQ,QACRhC,OAAQ5E,KAAKF,MAAM8E,OACnB8C,QAAS1H,KAAKF,MAAM4H,QACpBf,UAAU,0CACVgB,QAAS,CACL,kBAAC,EAAAC,OAAM,CAACtC,IAAI,OAAOsB,QAAQ,UAAS,cAAa,iBAAiBiB,QAAS7H,KAAK4J,QAAM,QACtF,kBAAC,EAAAhC,OAAM,CAACtC,IAAI,SAASsB,QAAQ,OAAM,cAAa,mBAAmBiB,QAAS7H,KAAKF,MAAM4H,SAAO,YAGlG,qGACA,kBAAC,EAAA2C,KAAI,KACD,kBAAC,EAAAC,UAAS,CACNC,MAAM,OACNC,QAAQ,aAER,kBAAC,EAAAC,UAAS,CACNC,YAAY,EACZnJ,KAAK,OACLmC,GAAG,YAAW,cACF,YACZwE,KAAK,YAAW,mBACC,mBACjB4B,MAAO9J,KAAKiC,MAAMuC,SAAS0D,KAC3ByC,YAAY,uBACZ5C,SAAU/H,KAAK6J,gBAIvB,kBAAC,EAAAS,UAAS,CACNC,MAAM,SACNC,QAAQ,cACRI,WAAW,8DAEX,kBAAC,EAAAH,UAAS,CACNC,YAAY,EACZnJ,KAAK,OACLmC,GAAG,cAAa,cACJ,cACZwE,KAAK,cAAa,mBACD,qBACjB4B,MAAO9J,KAAKiC,MAAMqG,OAClBqC,YAAY,kBACZ5C,SAAU/H,KAAK+J,kBAIvB,kBAAC,EAAAO,UAAS,CACNC,MAAM,cACNC,QAAQ,oBAER,kBAAC,EAAAK,SAAQ,CACLH,YAAY,EACZhH,GAAG,mBAAkB,cACT,mBACZwE,KAAK,mBAAkB,mBACN,0BACjB4B,MAAO9J,KAAKiC,MAAMuC,SAAS4D,YAC3BuC,YAAY,8BACZ5C,SAAU/H,KAAKoK,0BAQhC,YAAAU,mBAAP,SAA0BC,GAClB/K,KAAKF,MAAM8E,SAAWmG,EAAUnG,QAChC5E,KAAKiE,cAAc,CACfqE,OAAQtI,KAAKF,MAAMwI,OAAO0C,KAAK,MAC/BxG,SAAU,CACN4D,YAAapI,KAAKF,MAAMsI,YACxBE,OAAQtI,KAAKF,MAAMwI,OACnBJ,KAAMlI,KAAKF,MAAMoI,SAMvB,YAAA/H,gBAAV,WACI,MAAO,CACHmI,OAAQ,GACR9D,SAAU,CACN4D,YAAa,GACbE,OAAQ,GACRJ,KAAM,MAKV,YAAAI,OAAR,WACI,OAAItI,KAAKiC,MAAMuC,SAAS8D,OACbtI,KAAKiC,MAAMuC,SAAS8D,OAAO0C,KAAK,MAEhC,IAoCnB,EA5IA,CAAuC,kaCYvC,cAEI,WAAYlL,UACR,YAAMA,IAAM,KA4BpB,OA/B+C,OAMpC,YAAAC,OAAP,WACI,OACI,kBAAC,EAAAkL,KAAI,CAACtE,UAAU,kBACZ,kBAAC,EAAAuE,SAAQ,KACL,kBAAC,EAAAC,YAAW,KACR,kBAAC,EAAAC,KAAI,CAACC,UAAW,EAAAC,aAAA,IAAmBtL,KAAKF,MAAMuF,SAGvD,kBAAC,EAAA6F,SAAQ,CAACK,MAAO,CAAErE,QAAU,eACzB,kBAAC,IAAe,CAACvD,QAAS3D,KAAKF,MAAM6D,QAASoD,SAAU/G,KAAKF,MAAMiH,SAClD9F,QAASjB,KAAKF,MAAMmB,QAASC,WAAYlB,KAAKF,MAAMoB,aACrE,kBAAC,KAAM,CAACsK,aAAa,GACjB,kBAAC,IAAS,CAAChF,QAAQ,WAAWiF,OAAO,GACjC,kBAAC,EAAA7D,OAAM,CAAClE,GAAG,yBAAyBkD,QAAQ,YAAW,cAAa,oBAAoBiB,QAAS7H,KAAKF,MAAMY,kBAAgB,UAC5H,kBAAC,EAAAkH,OAAM,CAAClE,GAAG,wBAAwBkD,QAAQ,UAAS,cAAa,4BAA4BiB,QAAS7H,KAAKF,MAAMW,iBAAe,2BAQ9I,YAAAN,gBAAV,WACI,MAAO,IAEf,EA/BA,CAA+C,icCR/C,cAEI,WAAYL,GAAZ,MACI,YAAMA,IAAM,YA8DR,EAAA4L,SAAW,SAAC9G,GAChB,EAAKpE,eAAe,SAAUoE,MAEtC,OApEqC,OAM1B,YAAA7E,OAAP,sBACI,OACI,kBAAC,EAAA4L,SAAQ,CACLhF,UAAW3G,KAAK4L,kBAChBC,OAAQ,kBAAC,EAAAC,eAAc,eAAa,kBAAkBJ,SAAU1L,KAAK0L,sBAAqB1L,KAAKF,MAAM6D,SACrGiB,OAAQ5E,KAAKiC,MAAM2C,QAEnB,yBAAK+B,UAAU,iBAAiBoF,MAAO,CAACC,QAAS,SAC7C,kBAAC,EAAAC,WAAU,KACP,kBAAC,EAAAxB,UAAS,CAACvC,KAAK,SAASxE,GAAG,gBAAgBnC,KAAK,SAAQ,cAAa,uBAAsB,aAAY,mBACxG,kBAAC,EAAAqG,OAAM,CAAChB,QAAS,EAAAsF,cAAA,QAAqB,cAAc,2BAA0B,aAAY,kCACtF,kBAAC,EAAAC,WAAU,SAIvB,yBAAKxF,UAAU,kBACX,yBAAKA,UAAU,gBACX,0BAAMA,UAAU,QAAM,WACtB,0BAAMA,UAAU,QAAM,gBAG9B,yBAAKA,UAAU,gBACX,kBAAC,EAAAN,KAAI,CAACf,IAAI,SAAQ,cACA,sBACZgB,GAAItG,KAAK8D,OAAO,cAAcL,mBAAmBzD,KAAKF,MAAMmB,SAAQ,IAAIwC,mBAAmBzD,KAAKF,MAAMoB,YAAW,oBACjHyF,UAAU,uBACZ,0BAAMA,UAAU,QAAM,UACtB,0BAAMA,UAAU,UAGhB3G,KAAKF,MAAMiH,SAASjF,KAAI,SAACsK,EAAGC,GACxB,yBAAC,EAAAhG,KAAI,CAACf,IAAK8G,EAAEzI,QAAO,cACD,gBAAgB0I,EAC7B/F,GAAI,EAAKxC,OAAO,cAAcL,mBAAmB,EAAK3D,MAAMmB,SAAQ,IAAIwC,mBAAmB,EAAK3D,MAAMoB,YAAW,aAAakL,EAAEzI,SAChIgD,UAAU,gBACZ,0BAAMA,UAAU,QAASyF,EAAEzI,SAC3B,0BAAMgD,UAAU,QAAO,kBAAC,IAAM,CAAC2F,KAAMF,EAAEG,UAAWC,SAAS,YAS7E,YAAArM,gBAAV,WACI,MAAO,CACHyE,QAAQ,IAIR,YAAAgH,gBAAR,WACI,IAAMa,EAAoB,CAAE,6BAI5B,OAHI,EAAA5L,SAAA,mBAA4B6L,mBAC5BD,EAAQE,KAAK,wBAEVF,EAAQzB,KAAK,MAM5B,EApEA,CAAqC,kcCCrC,cAEI,WAAYlL,UACR,YAAMA,IAAM,KA6EpB,OAhFuC,OAM5B,YAAA8M,kBAAP,WAEI,IAAMC,EAAyBC,SAASC,eAAe,eACvD,GAAIF,EAAM,CACN,IAAMG,EAAsBH,EAAKI,aAC7BD,GACAhN,KAAKQ,eAAe,eAAgBwM,EAAS,QAKlD,YAAAjN,OAAP,WACI,OACI,yBAAK4G,UAAU,cAAcjD,GAAG,eAC5B,kBAAC,IAAS,eACM,cACZwJ,KAAMlN,KAAKmN,aACXC,MAAM,UACNlF,KAAK,kBACLvB,UAAU,kBACV0G,MAAOrN,KAAKiC,MAAMqL,YAClBN,OAAQhN,KAAKiC,MAAMsL,aACnBC,SAAU,GACVC,iBAAiB,EACjBC,YAAY,EACZC,qBAAqB,EACrB7D,MAAO9J,KAAKiC,MAAMD,QAClB4L,UAAU,EACVC,WAAY,CACRC,2BAA2B,EAC3BC,0BAA0B,EAC1BC,gBAAgB,EAChBC,iBAAiB,EACjBC,QAAS,EACTC,WAAW,OAOrB,YAAAhO,gBAAV,WACI,MAAO,CACH6B,QAAShC,KAAKoO,gBACdb,aAAc,QACdD,YAAa,SAIb,YAAAH,WAAR,WACI,MAAgC,aAA5BnN,KAAKF,MAAMsD,aACJ,WAEqB,SAA5BpD,KAAKF,MAAMsD,cAAuD,QAA5BpD,KAAKF,MAAMsD,cAAsD,QAA5BpD,KAAKF,MAAMsD,aAC/E,MAEqB,YAA5BpD,KAAKF,MAAMsD,aACJ,gBAEJ,QAGH,YAAAgL,cAAR,WACI,IACI,IAAMC,EAAY/E,KAAKC,MAAMvJ,KAAKF,MAAMoC,iBACxC,GAAImM,EACA,OAAO/E,KAAKgF,UAAUD,EAAM,KAAM,GAExC,MAAOlF,IAGT,OAAOnJ,KAAKF,MAAMoC,iBAG1B,EAhFA,CAAuC,kaCJvC,cAEI,WAAYpC,UACR,YAAMA,IAAM,KA4CpB,OA/C6C,OAMlC,YAAAC,OAAP,WACI,GAAIC,KAAKuO,UACL,OAAO,kBAAC,IAAe,CAACnN,MAAO,CAACoN,aAAc,2CAA4CpN,MAAOpB,KAAKiC,MAAMb,SAGhH,IAAIqN,EAAwC,KAK5C,MAJgC,YAA5BzO,KAAKF,MAAMsD,eACXqL,EAAa,kBAAC,EAAAC,gBAAe,CAACC,KAAM3O,KAAKiC,MAAM2M,iBAGhC,OAAfH,EACOA,EAEA,iDAAwBzO,KAAKF,MAAMsD,eAIxC,YAAAjD,gBAAV,WACI,IACI,MAAO,CACHyO,cAAetF,KAAKC,MAAMvJ,KAAKF,MAAMoC,iBACrCd,WAAOyN,GAEb,MAAMC,GAGJ,OAFA,EAAAjO,SAAA,mBAA4BuI,KAAK,4BACjC,EAAAvI,SAAA,mBAA4BO,MAAM0N,GAC3B,CACHF,mBAAeC,EACfzN,MAAO0N,KAMX,YAAAP,QAAR,WACI,QAAGvO,KAAKiC,MAAMb,OAMtB,EA/CA,CAA6C,+bCd7C,cAEI,WAAYtB,GAAZ,MACI,YAAMA,IAAM,YA6FR,EAAAiP,YAAc,WAClB,EAAKvO,eAAe,iBAAiB,MAG7C,OApGqC,OAM1B,YAAAT,OAAP,WACI,OACI,yBAAK4G,UAAU,cACP,kBAAC,EAAAqI,WAAU,CAACpI,QAAS,EAAAqI,kBAAA,OACb,kBAAC,EAAAC,eAAc,CAACC,KAAM,EAAAC,0BACtB,kBAAC,EAAAC,MAAK,CAACC,aAAa,KAAKC,KAAK,MAAOvP,KAAKwO,gBAC1C,kBAAC,EAAAgB,eAAc,KACTxP,KAAKyP,oBAEX,kBAAC,EAAAC,2BAA0B,KACvB,kBAAC,EAAA9H,OAAM,CAAChB,QAAQ,OAAM,cACF,oBACZiB,QAAS7H,KAAK+O,aAAW,kBAGzC,yBAAKpI,UAAU,aAAW,KAEtB3G,KAAKiC,MAAM0N,cACP,yBAAKhJ,UAAU,uCAAuCjD,GAAG,eACrD,kBAAC,IAAS,eACM,cACZwJ,KAAK,OACLE,MAAM,WACNlF,KAAK,cACLvB,UAAU,cACV0G,MAAOrN,KAAKiC,MAAMqL,YAClBN,OAAQhN,KAAKiC,MAAMsL,aACnBC,SAAU,GACVC,iBAAiB,EACjBC,YAAY,EACZC,qBAAqB,EACrB7D,MAAO9J,KAAK4P,cACZhC,UAAU,EACVC,WAAY,CACRC,2BAA2B,EAC3BC,0BAA0B,EAC1BC,gBAAgB,EAChBC,iBAAiB,EACjBC,QAAS,EACTC,WAAW,MAKvB,gCAMlB,YAAAhO,gBAAV,WACI,MAAO,CACHoN,aAAc,QACdD,YAAa,OACbqC,eAAe,IAIf,YAAAnB,aAAR,WACI,OAAIxO,KAAKF,MAAMsB,MACJpB,KAAKF,MAAMsB,MAAMoN,aAEjB,yBAKP,YAAAiB,iBAAR,WACI,OAAIzP,KAAKF,MAAMI,SACJF,KAAKF,MAAMI,SAEX,kLAOP,YAAA0P,YAAR,WACI,OAAI5P,KAAKF,MAAMsB,OAASpB,KAAKF,MAAMsB,MAAMA,OAASpB,KAAKF,MAAMsB,MAAMA,MAAMyO,OAC9D7P,KAAKF,MAAMsB,MAAMA,MAAMyO,OACxB7P,KAAKF,MAAMsB,OAASpB,KAAKF,MAAMsB,MAAMA,OAASpB,KAAKF,MAAMsB,MAAMA,MAAMyD,QACpE7E,KAAKF,MAAMsB,MAAMA,MAAMyD,QACvB7E,KAAKF,MAAMsB,OAASpB,KAAKF,MAAMsB,MAAMA,MACrCkI,KAAKgF,UAAUtO,KAAKF,MAAMsB,MAAMA,MAAO,KAAM,GAE7C,4BAQnB,EApGA,CAAqC,icC0BrC,cAEI,WAAYtB,GAAZ,MACI,YAAMA,IAAM,YA4GR,EAAAgQ,kBAAoB,WACxB,IAAM7O,EAAuB,EAAKnB,MAAMwC,SAASrB,QACjD,OAAkB,MAAXA,GAA8B,WAAXA,KAElC,OAnHoC,OAMzB,YAAAlB,OAAP,WACI,OACI,kBAAC,EAAAkL,KAAI,CAACtE,UAAU,wBACZ,kBAAC,EAAAuE,SAAQ,CAACvE,UAAU,mBAChB,yBAAKA,UAAU,kBACX,kBAAC,EAAAoJ,MAAK,KACF,kBAAC,EAAAC,UAAS,CAACrJ,UAAU,QAAO,kBAAC,KAAgB,CAACpF,KAAMvB,KAAKF,MAAMwC,SAASf,QACxE,kBAAC,EAAAyO,UAAS,CAACrJ,UAAU,QAAQK,UAAU,GAAI,oBAC3C,kBAAC,EAAAgJ,UAAS,CAACrJ,UAAU,WACjB,kBAAC,KAAM,CAAC6E,aAAa,GACjB,kBAAC,IAAS,CAAChF,QAAQ,WAAWiF,OAAO,GACjC,kBAAC,EAAA7D,OAAM,CAAClE,GAAG,cAAa,cACJ,oBACZ2B,MAAM,yBACNwC,QAAS7H,KAAKF,MAAM+F,eACpBe,QAAQ,SAAQ,kBAAC,EAAAqJ,SAAQ,YAMrD,yBAAKtJ,UAAU,YACX,yBAAKA,UAAU,gBACX,0BAAMA,UAAU,SAAO,QACvB,0BAAMA,UAAU,SAAS3G,KAAKF,MAAMwC,SAAS4F,OAEjD,kBAAC,EAAAgI,GAAE,CAAC9P,UAAWJ,KAAK8P,mBAChB,yBAAKnJ,UAAU,gBACX,0BAAMA,UAAU,SAAO,SACvB,0BAAMA,UAAU,SAAS3G,KAAKF,MAAMwC,SAASrB,WAGrD,yBAAK0F,UAAU,gBACX,0BAAMA,UAAU,SAAO,MACvB,0BAAMA,UAAU,SAAS3G,KAAKF,MAAMwC,SAASoB,KAEjD,yBAAKiD,UAAU,gBACX,0BAAMA,UAAU,SAAO,UACvB,0BAAMA,UAAU,SAAS3G,KAAKF,MAAMwC,SAASL,QAEjD,yBAAK0E,UAAU,gBACX,0BAAMA,UAAU,SAAO,WACvB,0BAAMA,UAAU,SAAQ,kBAAC,IAAM,CAAC2F,KAAMtM,KAAKF,MAAMwC,SAASiK,UAAWC,SAAS,MAElF,kBAAC,EAAA0D,GAAE,CAAC9P,UAAWJ,KAAKF,MAAM0F,UACtB,yBAAKmB,UAAU,gBACX,0BAAMA,UAAU,SAAO,YACvB,0BAAMA,UAAU,SAAQ,kBAAC,IAAM,CAAC2F,KAAMtM,KAAKF,MAAMwC,SAAS6N,WAAY3D,SAAS,OAGvF,yBAAK7F,UAAU,gBACX,0BAAMA,UAAU,SAAO,aACvB,0BAAMA,UAAU,SAAS3G,KAAKF,MAAMwC,SAAS8N,WAEjD,yBAAKzJ,UAAU,gBACX,0BAAMA,UAAU,SAAO,cACvB,0BAAMA,UAAU,SAAS3G,KAAKF,MAAMwC,SAAS+N,aAGrD,yBAAK1J,UAAU,eAAe3G,KAAKoI,eACnC,yBAAKzB,UAAU,UAEP3G,KAAKsI,SAASxG,KAAK,SAAAyI,GACf,yBAAC,EAAA+F,MAAK,CAAChL,IAAKiF,EAAOgG,QAAQ,GAAOhG,OAI9C,yBAAK5D,UAAU,WACX,kBAAC,EAAAiB,OAAM,CAAClE,GAAG,kBAAiB,cACR,wBACZ2B,MAAM,4BACNwC,QAAS7H,KAAKF,MAAM8F,mBACpBgB,QAAQ,aAAY,kBAAC,EAAA4J,aAAY,qBAGjD,kBAAC,EAAAtF,SAAQ,CAACvE,UAAU,kBAChB,yBAAKA,UAAU,eAAa,iBAC5B,kBAAC,KAAQ,CAACrF,MAAOtB,KAAKF,MAAMwB,MAClBmE,aAAczF,KAAKF,MAAM2F,aACzBC,cAAe1F,KAAKF,MAAM4F,cAC1BC,gBAAiB3F,KAAKF,MAAM6F,qBAO5C,YAAAxF,gBAAV,WACI,MAAO,IAGH,YAAA2G,SAAR,WACI,OAAO9G,KAAKF,MAAMwC,SAAS4F,KAAOlI,KAAKF,MAAMwC,SAAS4F,KAAOlI,KAAKF,MAAMwC,SAASoB,IAG7E,YAAA4E,OAAR,WACI,OAAOtI,KAAKF,MAAMwC,SAASgG,OAAStI,KAAKF,MAAMwC,SAASgG,OAAS,IAG7D,YAAAF,YAAR,WACI,OAAOpI,KAAKF,MAAMwC,SAAS8F,YACvBpI,KAAKF,MAAMwC,SAAS8F,YACpB,uBAAuBpI,KAAKF,MAAMwC,SAASf,KAAI,yBAO3D,EAnHA,CAAoC,4YChBpC,cAEI,WAAYzB,GAAZ,MACI,YAAMA,IAAM,YAsCR,EAAA2Q,gBAAkB,SAAC3G,EAAY4G,EAAkBpQ,GACrD,EAAKE,eAAe,UAAWsJ,GAAO,WAClC,EAAK6G,eACL,EAAKC,iBAIL,EAAAC,kBAAoB,WACxB,EAAKrQ,eAAe,oBAAoB,IAGpC,EAAAsQ,mBAAqB,WACzB,EAAKtQ,eAAe,oBAAoB,MAqChD,OA1FuC,OAM5B,YAAAT,OAAP,WACI,OACI,kBAAC,EAAAsK,KAAI,KACD,kBAAC,EAAAC,UAAS,CACNC,MAAM,WACNG,YAAY,EACZF,QAAQ,iBAER,kBAAC,EAAAuG,WAAU,CACPrN,GAAG,mBAAkB,cACT,cACZnC,KAAK,OACLmP,SAAU1Q,KAAKiC,MAAM+O,gBACrBlH,MAAO9J,KAAKiC,MAAMD,QAClB0I,YAAY,EACZuG,0BAA0B,EAC1BlJ,SAAU/H,KAAKyQ,gBACfS,cAAelR,KAAK6Q,kBACpBM,eAAgBnR,KAAK8Q,mBACrBM,UAAWpR,KAAKiC,MAAMoP,sBAOhC,YAAAlR,gBAAV,WACI,MAAO,CACH6B,QAAS,GACTgP,gBAAiB,GACjBK,kBAAkB,EAClBC,OAAO,IAmBP,YAAAV,WAAR,sBACU9N,EAAe9C,KAAKuR,cACpBC,EAAoBxR,KAAKiC,MAAMqP,MAC/BG,EAAoBzR,KAAK4C,QAAQE,GACjC4O,EAA2BF,IAAaC,EAC9CzR,KAAK2R,SAAS,CACVL,MAAOG,IACR,WACKC,GACA,EAAKE,kBAKT,YAAAhP,QAAR,SAAgBE,GACZ,QAASA,GAGL,YAAAyO,YAAR,WACI,OAAOvR,KAAKiC,MAAMD,SAGd,YAAA2O,aAAR,WACQ3Q,KAAKF,MAAMiI,UACX/H,KAAKF,MAAMiI,SAAS/H,KAAKuR,gBAIzB,YAAAK,YAAR,WACQ5R,KAAKF,MAAMkI,SACXhI,KAAKF,MAAMkI,QAAQhI,KAAKiC,MAAMqP,QAI1C,EA1FA,CAAuC,8CChB3BO,qZCSZ,cAEI,WAAY/R,GAAZ,MACI,YAAMA,IAAM,YA0BN,EAAAgS,aAAe,WACrBC,OAAOC,QAAQC,UAGvB,OAjCqC,OAM1B,YAAAlS,OAAP,WACI,OACI,kBAAC,aAAc,KACX,kBAAC,EAAA2G,YAAW,CAACC,UAAU,WAAWC,QAAS,EAAAC,oBAAA,OACvC,yBAAKF,UAAU,cACX,kBAAC,EAAAqI,WAAU,CAACpI,QAAS,EAAAqI,kBAAA,OACjB,kBAAC,EAAAC,eAAc,CAACC,KAAM,EAAA+C,aACtB,kBAAC,EAAA7C,MAAK,CAACC,aAAa,KAAKC,KAAK,MAAI,6BAClC,kBAAC,EAAAC,eAAc,4FAGf,kBAAC,EAAAE,2BAA0B,KACvB,kBAAC,EAAA9H,OAAM,CAAChB,QAAQ,OAAM,cACF,iBACZiB,QAAS7H,KAAK8R,cAAY,iCAalE,EAjCA,CAAqC,iVCArC,cAEI,WAAYhS,GAAZ,MACI,YAAMA,IAAM,YA2BN,EAAAgS,aAAe,WACrBC,OAAOC,QAAQC,UAGvB,OAlCwC,OAM7B,YAAAlS,OAAP,WACI,OACI,kBAAC,aAAc,KACX,kBAAC,EAAA2G,YAAW,CAACC,UAAU,WAAWC,QAAS,EAAAC,oBAAA,OACvC,yBAAKF,UAAU,cACX,kBAAC,EAAAqI,WAAU,CAACpI,QAAS,EAAAqI,kBAAA,OACjB,kBAAC,EAAAC,eAAc,CAACC,KAAM,EAAAgD,wBACtB,kBAAC,EAAA9C,MAAK,CAACC,aAAa,KAAKC,KAAK,MAAI,6BAClC,kBAAC,EAAAC,eAAc,gKAIf,kBAAC,EAAAE,2BAA0B,KACvB,kBAAC,EAAA9H,OAAM,CAAChB,QAAQ,OAAM,cACF,iBACZiB,QAAS7H,KAAK8R,cAAY,iCAalE,EAlCA,CAAwC,0tBFTxC,SAAYD,GACR,qBAAO,uBADX,CAAYA,IAAAA,EAAa,KA0BzB,kBAEI,WAAsB/R,GAAtB,MACI,YAAMA,IAAM,YACZsS,YAAW,WACP,EAAKC,iBACN,MA0JX,OAhKsF,OASxE,YAAAlS,gBAAV,WACI,OAAO,EAAP,KACOH,KAAK2I,uBAAqB,CAC7ByI,WAAW,KAMZ,YAAAkB,kBAAP,SAAyBlR,EAAcmR,GACnCvS,KAAKwS,YAAYX,EAAcY,MAAOrR,EAAOmR,IAG1C,YAAAxS,OAAP,WACI,OAAIC,KAAKuO,UACDvO,KAAK0S,aAED,kBAACC,EAAe,CAACvR,MAAOpB,KAAKiC,MAAMb,QAEhCpB,KAAK4S,aAER,kBAACC,EAAkB,CAACzR,MAAOpB,KAAKiC,MAAMb,QAItC,kBAAC,KAAS,CAACA,MAAOpB,KAAKiC,MAAMb,QAG9BpB,KAAKoR,YAER,kBAAC,aAAc,KACX,kBAAC,EAAA1K,YAAW,CAACE,QAAS,EAAAC,oBAAA,QAA6BG,UAAU,GACzD,kBAAC,EAAAiE,KAAI,KACD,kBAAC,EAAAC,SAAQ,KAAC,kBAAC,EAAA4H,QAAO,CAACvD,KAAK,QACxB,kBAAC,EAAArE,SAAQ,KAAC,gDAMnBlL,KAAKgF,cAUV,YAAA+N,cAAV,WAEI,gBAAyB/S,KAAKF,MAAMkS,SACpC,YAAMe,cAAa,YAIb,YAAAhK,cAAV,WACI,OAAO,MAGD,YAAA1H,kBAAV,SAA4BD,EAAYoN,GACpCxO,KAAKwS,YAAYX,EAAcmB,OAAQ5R,EAAOoN,IAGxC,YAAA3F,aAAV,SAAuBoK,GAEnB,IAAMC,EAAqBlT,KAAKF,MAAMqT,MAAMC,OAAOH,GAEnD,OADkCI,mBAAmBH,IAI/C,YAAA9B,UAAV,WACI,QAAOpR,KAAKiC,MAAMmP,WAGd,YAAAiB,aAAR,sBAEQiB,EAAsCtT,KAAK+I,gBAGhC,MAAXuK,IACAA,EAAU,IAITC,MAAMC,QAAQF,KACfA,EAAU,CAAEA,IASO,KALvBA,EAAU,EAAH,CACH,EAAAzS,SAAA,kBAA2B4S,qBACxBH,IAGKrJ,OACRjK,KAAKQ,eAAe,aAAa,IAEjCR,KAAKQ,eAAe,aAAa,GACjCkT,QAAQC,IAAIL,GAAShQ,MAAK,WACtB,EAAK9C,eAAe,aAAa,MAClCW,OAAM,SAAAC,GACL,EAAAP,SAAA,mBAA4BC,MAAM,oDAClC,IAAM8S,EAAkB,EAAKC,aACzBD,EA9IQ,GA+IR,EAAKE,mBACL1B,YAAW,WACP,EAAKC,iBACiB,IAAvB0B,KAAKC,IAAI,EAAGJ,KAEf,EAAKvS,kBAAkBD,EAAO,iCAMtC,YAAAyS,WAAR,WACI,YAAsChF,IAA/B7O,KAAKiC,MAAMgS,gBAAgCjU,KAAKiC,MAAMgS,gBAA4B,GAGrF,YAAAH,iBAAR,WACI,IAAMF,EAAkB5T,KAAK6T,aAAe,EAC5C7T,KAAKQ,eAAe,kBAAmBoT,IAGnC,YAAArF,QAAR,WACI,QAAOvO,KAAKiC,MAAMsM,SAGd,YAAAmE,WAAR,WACI,OAAO1S,KAAKiC,MAAMb,OAASpB,KAAKiC,MAAMb,MAAMA,MAAM8S,QAA4C,KAAjClU,KAAKiC,MAAMb,MAAMA,MAAM8S,QAGhF,YAAAtB,WAAR,WACI,OAAO5S,KAAKiC,MAAMb,OAASpB,KAAKiC,MAAMb,MAAMA,MAAM8S,QAA4C,KAAjClU,KAAKiC,MAAMb,MAAMA,MAAM8S,QAGhF,YAAA1B,YAAR,SAAoB2B,EAA0B/S,EAAYoN,GACtD,EAAA3N,SAAA,mBAA4BO,MAAM,8CAA+C+S,GACjF,EAAAtT,SAAA,mBAA4BO,MAAM,mBAAoBoN,GACtD,EAAA3N,SAAA,mBAA4BO,MAAM,mBAAoBA,GACtDpB,KAAKiE,cAAc,CACf7C,MAAO,CACHA,MAAK,EACLoN,aAAY,EACZjN,KAAM4S,GAEV5F,SAAS,KAGrB,EAhKA,CAAsF","sources":["webpack://@apicurio/registry-ui/./src/app/components/common/if.tsx","webpack://@apicurio/registry-ui/./src/app/pages/artifactVersion/artifactVersion.tsx","webpack://@apicurio/registry-ui/./src/app/pages/artifactVersion/components/modals/editMetaDataModal.tsx","webpack://@apicurio/registry-ui/./src/app/pages/artifactVersion/components/pageheader/pageheader.tsx","webpack://@apicurio/registry-ui/./src/app/pages/artifactVersion/components/pageheader/version-selector.tsx","webpack://@apicurio/registry-ui/./src/app/pages/artifactVersion/components/tabs/content.tsx","webpack://@apicurio/registry-ui/./src/app/pages/artifactVersion/components/tabs/documentation.tsx","webpack://@apicurio/registry-ui/./src/app/pages/artifactVersion/components/tabs/errorTab.tsx","webpack://@apicurio/registry-ui/./src/app/pages/artifactVersion/components/tabs/info.tsx","webpack://@apicurio/registry-ui/./src/app/pages/artifactVersion/components/uploadForm/uploadForm.tsx","webpack://@apicurio/registry-ui/./src/app/pages/basePage.tsx","webpack://@apicurio/registry-ui/./src/app/components/errorPage/accessErrorPage.tsx","webpack://@apicurio/registry-ui/./src/app/components/errorPage/rateLimitErrorPage.tsx"],"sourcesContent":["/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from \"react\";\nimport {PureComponent, PureComponentProps, PureComponentState} from \"../baseComponent\";\n\n/**\n * Properties\n */\nexport interface IfProps extends PureComponentProps {\n    condition: boolean | (() => boolean);\n    children?: React.ReactNode;\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface IfState extends PureComponentState {\n}\n\n\n/**\n * Wrapper around a set of arbitrary child elements and displays them only if the\n * indicated condition is true.\n */\nexport class If extends PureComponent<IfProps, IfState> {\n\n    constructor(props: Readonly<IfProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        if (this.accept()) {\n            return <React.Fragment children={this.props.children} />\n        } else {\n            return <React.Fragment />\n        }\n    }\n\n    protected initializeState(): IfState {\n        return {};\n    }\n\n    private accept(): boolean {\n        if (typeof this.props.condition === \"boolean\") {\n            return this.props.condition;\n        } else {\n            return this.props.condition();\n        }\n    }\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from \"react\";\nimport \"./artifactVersion.css\";\nimport {\n    Breadcrumb,\n    BreadcrumbItem,\n    Button,\n    Modal,\n    PageSection,\n    PageSectionVariants,\n    Tab,\n    Tabs\n} from '@patternfly/react-core';\nimport {PageComponent, PageProps, PageState} from \"../basePage\";\nimport {ContentTabContent, DocumentationTabContent, InfoTabContent} from \"./components/tabs\";\nimport {ArtifactVersionPageHeader} from \"./components/pageheader\";\nimport {UploadVersionForm} from \"./components/uploadForm\";\nimport {Link} from \"react-router-dom\";\nimport {EditMetaDataModal} from \"./components/modals\";\nimport {InvalidContentModal} from \"../../components/modals\";\nimport {IfFeature} from \"../../components\";\nimport {ArtifactMetaData, ArtifactTypes, ContentTypes, Rule, SearchedVersion} from \"../../../models\";\nimport {CreateVersionData, EditableMetaData, Services} from \"../../../services\";\nimport {PleaseWaitModal} from \"../../components/modals/pleaseWaitModal\";\n\n\n/**\n * Properties\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface ArtifactVersionPageProps extends PageProps {\n}\n\n/**\n * State\n */\nexport interface ArtifactVersionPageState extends PageState {\n    activeTabKey: number;\n    artifact: ArtifactMetaData | null;\n    artifactContent: string;\n    artifactIsText: boolean;\n    isInvalidContentModalOpen: boolean;\n    isUploadFormValid: boolean;\n    isUploadModalOpen: boolean;\n    isDeleteModalOpen: boolean;\n    isEditModalOpen: boolean;\n    isPleaseWaitModalOpen: boolean;\n    pleaseWaitMessage: string;\n    rules: Rule[] | null;\n    uploadFormData: string | null;\n    versions: SearchedVersion[] | null;\n    invalidContentError: any | null;\n}\n\nfunction is404(e: any) {\n    if (typeof e === \"string\") {\n        try {\n            const eo: any = JSON.parse(e);\n            if (eo && eo.error_code && eo.error_code === 404) {\n                return true;\n            }\n        } catch (e) {\n            // Do nothing\n        }\n    }\n    return false;\n}\n\n/**\n * The artifact version page.\n */\nexport class ArtifactVersionPage extends PageComponent<ArtifactVersionPageProps, ArtifactVersionPageState> {\n\n    constructor(props: Readonly<ArtifactVersionPageProps>) {\n        super(props);\n    }\n\n    public renderPage(): React.ReactElement {\n        const artifact: ArtifactMetaData = this.state.artifact ? this.state.artifact : new ArtifactMetaData();\n        const tabs: React.ReactNode[] = [\n            <Tab eventKey={0} title=\"Info\" key=\"info\" tabContentId=\"tab-info\">\n                <InfoTabContent artifact={artifact}\n                                isLatest={this.versionParam() === \"latest\"}\n                                rules={this.rules()}\n                                onEnableRule={this.doEnableRule}\n                                onDisableRule={this.doDisableRule}\n                                onConfigureRule={this.doConfigureRule}\n                                onDownloadArtifact={this.doDownloadArtifact}\n                                onEditMetaData={this.openEditMetaDataModal}\n                />\n            </Tab>,\n            <Tab eventKey={1} title=\"Documentation\" key=\"documentation\">\n                <DocumentationTabContent artifactContent={this.state.artifactContent} artifactType={artifact.type} />\n            </Tab>,\n            <Tab eventKey={2} title=\"Content\" key=\"content\">\n                <ContentTabContent artifactContent={this.state.artifactContent} artifactType={artifact.type} />\n            </Tab>,\n        ];\n        if (!this.showDocumentationTab()) {\n            tabs.splice(1, 1);\n        }\n\n        let groupId: string = this.groupIdParam();\n        let hasGroup: boolean = groupId != \"default\";\n        let breadcrumbs = (\n            <Breadcrumb>\n                <BreadcrumbItem><Link to={this.linkTo(\"/artifacts\")} data-testid=\"breadcrumb-lnk-artifacts\">Artifacts</Link></BreadcrumbItem>\n                <BreadcrumbItem><Link to={this.linkTo(`/artifacts?group=${ encodeURIComponent(groupId) }`)}\n                                      data-testid=\"breadcrumb-lnk-group\">{ groupId }</Link></BreadcrumbItem>\n                <BreadcrumbItem isActive={true}>{ this.artifactId() }</BreadcrumbItem>\n            </Breadcrumb>\n        );\n        if (!hasGroup) {\n            breadcrumbs = (\n                <Breadcrumb>\n                    <BreadcrumbItem><Link to=\"/artifacts\" data-testid=\"breadcrumb-lnk-artifacts\">Artifacts</Link></BreadcrumbItem>\n                    <BreadcrumbItem isActive={true}>{ this.artifactId() }</BreadcrumbItem>\n                </Breadcrumb>\n            );\n        }\n\n        return (\n            <React.Fragment>\n                <IfFeature feature=\"breadcrumbs\" is={true}>\n                    <PageSection className=\"ps_header-breadcrumbs\" variant={PageSectionVariants.light} children={breadcrumbs} />\n                </IfFeature>\n                <PageSection className=\"ps_artifact-version-header\" variant={PageSectionVariants.light}>\n                    <ArtifactVersionPageHeader title={this.nameOrId()}\n                                               versions={this.versions()}\n                                               version={this.versionParam()}\n                                               onUploadVersion={this.onUploadVersion}\n                                               onDeleteArtifact={this.onDeleteArtifact}\n                                               groupId={groupId}\n                                               artifactId={this.artifactId()} />\n                </PageSection>\n                <PageSection variant={PageSectionVariants.light} isFilled={true} padding={{default : \"noPadding\"}} className=\"artifact-details-main\">\n                    <Tabs className=\"artifact-page-tabs\"\n                          id=\"artifact-page-tabs\"\n                          unmountOnExit={true}\n                          isFilled={false}\n                          activeKey={this.state.activeTabKey}\n                          children={tabs}\n                          onSelect={this.handleTabClick}\n                    />\n                </PageSection>\n                <Modal\n                    title=\"Upload Artifact Version\"\n                    variant=\"large\"\n                    isOpen={this.state.isUploadModalOpen}\n                    onClose={this.onUploadModalClose}\n                    className=\"upload-artifact-modal pf-m-redhat-font\"\n                    actions={[\n                        <Button key=\"upload\" variant=\"primary\" data-testid=\"modal-btn-upload\" onClick={this.doUploadArtifactVersion} isDisabled={!this.state.isUploadFormValid}>Upload</Button>,\n                        <Button key=\"cancel\" variant=\"link\" data-testid=\"modal-btn-cancel\" onClick={this.onUploadModalClose}>Cancel</Button>\n                    ]}\n                >\n                    <UploadVersionForm onChange={this.onUploadFormChange} onValid={this.onUploadFormValid} />\n                </Modal>\n                <Modal\n                    title=\"Delete Artifact\"\n                    variant=\"small\"\n                    isOpen={this.state.isDeleteModalOpen}\n                    onClose={this.onDeleteModalClose}\n                    className=\"delete-artifact-modal pf-m-redhat-font\"\n                    actions={[\n                        <Button key=\"delete\" variant=\"primary\" data-testid=\"modal-btn-delete\" onClick={this.doDeleteArtifact}>Delete</Button>,\n                        <Button key=\"cancel\" variant=\"link\" data-testid=\"modal-btn-cancel\" onClick={this.onDeleteModalClose}>Cancel</Button>\n                    ]}\n                >\n                    <p>Do you want to delete this artifact and all of its versions?  This action cannot be undone.</p>\n                </Modal>\n                <EditMetaDataModal name={this.artifactName()}\n                                   description={this.artifactDescription()}\n                                   labels={this.artifactLabels()}\n                                   isOpen={this.state.isEditModalOpen}\n                                   onClose={this.onEditModalClose}\n                                   onEditMetaData={this.doEditMetaData}\n                />\n                <InvalidContentModal error={this.state.invalidContentError}\n                                     isOpen={this.state.isInvalidContentModalOpen}\n                                     onClose={this.closeInvalidContentModal} />\n                <PleaseWaitModal message={this.state.pleaseWaitMessage}\n                                 isOpen={this.state.isPleaseWaitModalOpen} />\n            </React.Fragment>\n        );\n    }\n\n    protected initializePageState(): ArtifactVersionPageState {\n        return {\n            activeTabKey: 0,\n            artifact: null,\n            artifactContent: \"\",\n            artifactIsText: true,\n            invalidContentError: null,\n            isDeleteModalOpen: false,\n            isEditModalOpen: false,\n            isInvalidContentModalOpen: false,\n            isPleaseWaitModalOpen: false,\n            isUploadFormValid: false,\n            isUploadModalOpen: false,\n            pleaseWaitMessage: \"\",\n            rules: null,\n            uploadFormData: null,\n            versions: null\n        };\n    }\n\n    protected groupIdParam(): string {\n        return this.getPathParam(\"groupId\");\n    }\n\n    protected artifactIdParam(): string {\n        return this.getPathParam(\"artifactId\");\n    }\n\n    protected versionParam(): string {\n        return this.getPathParam(\"version\");\n    }\n\n    // @ts-ignore\n    protected createLoaders(): Promise[] | null {\n        let groupId: string|null = this.groupIdParam();\n        if (groupId == \"default\") {\n            groupId = null;\n        }\n        const artifactId: string = this.artifactIdParam();\n        Services.getLoggerService().info(\"Loading data for artifact: \", artifactId);\n        return [\n            Services.getGroupsService().getArtifactMetaData(groupId, artifactId, this.versionParam()).then(md => this.setSingleState(\"artifact\", md)),\n            Services.getGroupsService().getArtifactContent(groupId, artifactId, this.versionParam())\n                .then(content => this.setSingleState(\"artifactContent\", content))\n                .catch(e => {\n                    Services.getLoggerService().warn(\"Failed to get artifact content: \", e);\n                    if (is404(e)) {\n                        this.setSingleState(\"artifactContent\", \"Artifact version content not available (404 Not Found).\");\n                    } else {\n                        throw e;\n                    }\n                }\n            ),\n            Services.getGroupsService().getArtifactRules(groupId, artifactId).then(rules => this.setSingleState(\"rules\", rules)),\n            Services.getGroupsService().getArtifactVersions(groupId, artifactId).then(versions => this.setSingleState(\"versions\", versions.reverse()))\n        ];\n    }\n\n    private handleTabClick = (event: any, tabIndex: any): void => {\n        this.setSingleState(\"activeTabKey\", tabIndex);\n    };\n\n    private onUploadVersion = (): void => {\n        this.setSingleState(\"isUploadModalOpen\", true);\n    };\n\n    private onDeleteArtifact = (): void => {\n        this.setSingleState(\"isDeleteModalOpen\", true);\n    };\n\n    private showDocumentationTab(): boolean {\n        if (this.state.artifact) {\n            return this.state.artifact.type === \"OPENAPI\" && this.state.artifact.state !== \"DISABLED\";\n        } else {\n            return false;\n        }\n    }\n\n    private rules(): Rule[] {\n        return this.state.rules ? this.state.rules : [];\n    }\n\n    private doEnableRule = (ruleType: string): void => {\n        Services.getLoggerService().debug(\"[ArtifactVersionPage] Enabling rule:\", ruleType);\n        let config: string = \"FULL\";\n        if (ruleType === \"COMPATIBILITY\") {\n            config = \"BACKWARD\";\n        }\n        Services.getGroupsService().createArtifactRule(this.groupId(), this.artifactId(), ruleType, config).catch(error => {\n            this.handleServerError(error, `Error enabling \"${ ruleType }\" artifact rule.`);\n        });\n        this.setSingleState(\"rules\", [...this.rules(), {config, type: ruleType}]);\n    };\n\n    private doDisableRule = (ruleType: string): void => {\n        Services.getLoggerService().debug(\"[ArtifactVersionPage] Disabling rule:\", ruleType);\n        Services.getGroupsService().deleteArtifactRule(this.groupId(), this.artifactId(), ruleType).catch(error => {\n            this.handleServerError(error, `Error disabling \"${ ruleType }\" artifact rule.`);\n        });\n        this.setSingleState(\"rules\", this.rules().filter(r => r.type !== ruleType));\n    };\n\n    private doConfigureRule = (ruleType: string, config: string): void => {\n        Services.getLoggerService().debug(\"[ArtifactVersionPage] Configuring rule:\", ruleType, config);\n        Services.getGroupsService().updateArtifactRule(this.groupId(), this.artifactId(), ruleType, config).catch(error => {\n            this.handleServerError(error, `Error configuring \"${ ruleType }\" artifact rule.`);\n        });\n        this.setSingleState(\"rules\", this.rules().map(r => {\n            if (r.type === ruleType) {\n                return {config, type: r.type};\n            } else {\n                return r;\n            }\n        }));\n    };\n\n    private doDownloadArtifact = (): void => {\n        const content: string = this.state.artifactContent;\n\n        let contentType: string = ContentTypes.APPLICATION_JSON;\n        let fext: string = \"json\";\n        if (this.state.artifact?.type === ArtifactTypes.PROTOBUF) {\n            contentType = ContentTypes.APPLICATION_PROTOBUF;\n            fext = \"proto\";\n        }\n        if (this.state.artifact?.type === ArtifactTypes.WSDL) {\n            contentType = ContentTypes.APPLICATION_XML;\n            fext = \"wsdl\";\n        }\n        if (this.state.artifact?.type === ArtifactTypes.XSD) {\n            contentType = ContentTypes.APPLICATION_XML;\n            fext = \"xsd\";\n        }\n        if (this.state.artifact?.type === ArtifactTypes.XML) {\n            contentType = ContentTypes.APPLICATION_XML;\n            fext = \"xml\";\n        }\n        if (this.state.artifact?.type === ArtifactTypes.GRAPHQL) {\n            contentType = ContentTypes.APPLICATION_JSON;\n            fext = \"graphql\";\n        }\n\n        const fname: string = this.artifactNameOrId() + \".\" + fext;\n        Services.getDownloaderService().downloadToFS(content, contentType, fname);\n    };\n\n    private nameOrId(): string {\n        if (!this.state.artifact) {\n            return \"\";\n        }\n        return this.state.artifact.name ? this.state.artifact.name : this.state.artifact.id;\n    }\n\n    private versions(): SearchedVersion[] {\n        return this.state.versions ? this.state.versions : [];\n    }\n\n    private artifactId(): string {\n        return this.state.artifact ? this.state.artifact.id : \"\";\n    }\n\n    private groupId(): string|null {\n        return this.state.artifact ? this.state.artifact.groupId : null;\n    }\n\n    private artifactType(): string {\n        return this.state.artifact ? this.state.artifact.type : \"\";\n    }\n\n    private artifactNameOrId(): string {\n        return this.state.artifact ? (\n            this.state.artifact.name ? this.state.artifact.name : this.state.artifact.id\n        ) : \"\";\n    }\n\n    private artifactName(): string {\n        return this.state.artifact ? (\n            this.state.artifact.name ? this.state.artifact.name : \"\"\n        ) : \"\";\n    }\n\n    private artifactDescription(): string {\n        return this.state.artifact ? (\n            this.state.artifact.description ? this.state.artifact.description : \"\"\n        ) : \"\";\n    }\n\n    private artifactLabels(): string[] {\n        return this.state.artifact ? (\n            this.state.artifact.labels ? this.state.artifact.labels : []\n        ) : [];\n    }\n\n    private onUploadFormValid = (isValid: boolean): void => {\n        this.setSingleState(\"isUploadFormValid\", isValid);\n    };\n\n    private onUploadFormChange = (data: string): void => {\n        this.setSingleState(\"uploadFormData\", data);\n    };\n\n    private onUploadModalClose = (): void => {\n        this.setSingleState(\"isUploadModalOpen\", false);\n    };\n\n    private onDeleteModalClose = (): void => {\n        this.setSingleState(\"isDeleteModalOpen\", false);\n    };\n\n    private doUploadArtifactVersion = (): void => {\n        this.onUploadModalClose();\n        this.pleaseWait(true, \"Uploading new version, please wait...\");\n        if (this.state.uploadFormData !== null) {\n            const data: CreateVersionData = {\n                content: this.state.uploadFormData,\n                type: this.artifactType()\n            };\n            Services.getGroupsService().createArtifactVersion(this.groupId(), this.artifactId(), data).then(versionMetaData => {\n                const groupId: string = versionMetaData.groupId ? versionMetaData.groupId : \"default\";\n                const artifactVersionLocation: string = `/artifacts/${ encodeURIComponent(groupId) }/${ encodeURIComponent(versionMetaData.id) }/versions/${versionMetaData.version}`;\n                Services.getLoggerService().info(\"[ArtifactVersionPage] Artifact version successfully uploaded.  Redirecting to details: \", artifactVersionLocation);\n                this.navigateTo(this.linkTo(artifactVersionLocation))();\n            }).catch( error => {\n                this.pleaseWait(false, \"\");\n                if (error && (error.error_code === 400 || error.error_code === 409)) {\n                    this.handleInvalidContentError(error);\n                } else {\n                    this.handleServerError(error, \"Error uploading artifact version.\");\n                }\n                this.setMultiState({uploadFormData: null, isUploadFormValid: false});\n            });\n        }\n    };\n\n    private doDeleteArtifact = (): void => {\n        this.onDeleteModalClose();\n        this.pleaseWait(true, \"Deleting artifact, please wait...\");\n        Services.getGroupsService().deleteArtifact(this.groupId(), this.artifactId()).then( () => {\n            this.pleaseWait(false, \"\");\n            this.navigateTo(this.linkTo(\"/artifacts\"))();\n        });\n    };\n\n    private openEditMetaDataModal = (): void => {\n        this.setSingleState(\"isEditModalOpen\", true);\n    };\n\n    private onEditModalClose = (): void => {\n        this.setSingleState(\"isEditModalOpen\", false);\n    };\n\n    private doEditMetaData = (metaData: EditableMetaData): void => {\n        Services.getGroupsService().updateArtifactMetaData(this.groupId(), this.artifactId(), this.versionParam(), metaData).then( () => {\n            if (this.state.artifact) {\n                this.setSingleState(\"artifact\", {\n                    ...this.state.artifact,\n                    ...metaData\n                });\n            }\n        }).catch( error => {\n            this.handleServerError(error, \"Error editing artifact metadata.\");\n        });\n        this.onEditModalClose();\n    };\n\n    private closeInvalidContentModal = (): void => {\n        this.setSingleState(\"isInvalidContentModalOpen\", false);\n    };\n\n    private pleaseWait = (isOpen: boolean, message: string): void => {\n        this.setMultiState({\n            isPleaseWaitModalOpen: isOpen,\n            pleaseWaitMessage: message\n        });\n    };\n\n    private handleInvalidContentError(error: any): void {\n        Services.getLoggerService().info(\"INVALID CONTENT ERROR\", error);\n        this.setMultiState({\n            invalidContentError: error,\n            isInvalidContentModalOpen: true\n        });\n    }\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport \"./editMetaDataModal.css\";\nimport {PureComponent, PureComponentProps, PureComponentState} from \"../../../../components\";\nimport {Button, Form, FormGroup, Modal, TextArea, TextInput} from \"@patternfly/react-core\";\nimport {EditableMetaData} from \"../../../../../services\";\n\n\n/**\n * Properties\n */\nexport interface EditMetaDataModalProps extends PureComponentProps {\n    name: string;\n    description: string;\n    labels: string[];\n    isOpen: boolean;\n    onClose: () => void;\n    onEditMetaData: (metaData: EditableMetaData) => void;\n}\n\n/**\n * State\n */\nexport interface EditMetaDataModalState extends PureComponentState {\n    labels: string;\n    metaData: EditableMetaData;\n}\n\n/**\n * Models the toolbar for the Artifacts page.\n */\nexport class EditMetaDataModal extends PureComponent<EditMetaDataModalProps, EditMetaDataModalState> {\n\n    constructor(props: Readonly<EditMetaDataModalProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <Modal\n                title=\"Edit artifact metadata\"\n                variant=\"large\"\n                isOpen={this.props.isOpen}\n                onClose={this.props.onClose}\n                className=\"edit-artifact-metaData pf-m-redhat-font\"\n                actions={[\n                    <Button key=\"edit\" variant=\"primary\" data-testid=\"modal-btn-edit\" onClick={this.doEdit}>Edit</Button>,\n                    <Button key=\"cancel\" variant=\"link\" data-testid=\"modal-btn-cancel\" onClick={this.props.onClose}>Cancel</Button>\n                ]}\n            >\n                <p>Use the form below to update the Name and Description of the artifact.</p>\n                <Form>\n                    <FormGroup\n                        label=\"Name\"\n                        fieldId=\"form-name\"\n                    >\n                        <TextInput\n                            isRequired={false}\n                            type=\"text\"\n                            id=\"form-name\"\n                            data-testid=\"form-name\"\n                            name=\"form-name\"\n                            aria-describedby=\"form-name-helper\"\n                            value={this.state.metaData.name}\n                            placeholder=\"Name of the artifact\"\n                            onChange={this.onNameChange}\n                        />\n                    </FormGroup>\n\n                    <FormGroup\n                        label=\"Labels\"\n                        fieldId=\"form-labels\"\n                        helperText=\"A comma-separated list of labels to apply to the artifact.\"\n                    >\n                        <TextInput\n                            isRequired={false}\n                            type=\"text\"\n                            id=\"form-labels\"\n                            data-testid=\"form-labels\"\n                            name=\"form-labels\"\n                            aria-describedby=\"form-labels-helper\"\n                            value={this.state.labels}\n                            placeholder=\"Artifact labels\"\n                            onChange={this.onLabelsChange}\n                        />\n                    </FormGroup>\n\n                    <FormGroup\n                        label=\"Description\"\n                        fieldId=\"form-description\"\n                    >\n                        <TextArea\n                            isRequired={false}\n                            id=\"form-description\"\n                            data-testid=\"form-description\"\n                            name=\"form-description\"\n                            aria-describedby=\"form-description-helper\"\n                            value={this.state.metaData.description}\n                            placeholder=\"Description of the artifact\"\n                            onChange={this.onDescriptionChange}\n                        />\n                    </FormGroup>\n                </Form>\n            </Modal>\n        );\n    }\n\n    public componentDidUpdate(prevProps: Readonly<EditMetaDataModalProps>): void {\n        if (this.props.isOpen && !prevProps.isOpen) {\n            this.setMultiState({\n                labels: this.props.labels.join(\", \"),\n                metaData: {\n                    description: this.props.description,\n                    labels: this.props.labels,\n                    name: this.props.name\n                }\n            });\n        }\n    }\n\n    protected initializeState(): EditMetaDataModalState {\n        return {\n            labels: \"\",\n            metaData: {\n                description: \"\",\n                labels: [],\n                name: \"\"\n            }\n        };\n    }\n\n    private labels(): string {\n        if (this.state.metaData.labels) {\n            return this.state.metaData.labels.join(\", \");\n        } else {\n            return \"\";\n        }\n    }\n\n    private doEdit = (): void => {\n        this.props.onEditMetaData(this.state.metaData);\n    };\n\n    private onNameChange = (value: string): void => {\n        this.setSingleState(\"metaData\", {\n            ...this.state.metaData,\n            name: value\n        });\n    };\n\n    private onLabelsChange = (value: string): void => {\n        let labels: string[] = [];\n        if (value && value.trim().length > 0) {\n            labels = value.trim().split(\",\").map(item => item.trim());\n        }\n        this.setMultiState({\n            labels: value,\n            metaData: {\n                ...this.state.metaData,\n                labels\n            }\n        });\n    };\n\n    private onDescriptionChange = (value: string): void => {\n        this.setSingleState(\"metaData\", {\n            ...this.state.metaData,\n            description: value\n        });\n    };\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport \"./pageheader.css\";\nimport {\n    Button,\n    Flex,\n    FlexItem,\n    Text,\n    TextContent,\n    TextVariants\n} from '@patternfly/react-core';\nimport {IfAuth, PureComponent, PureComponentProps, PureComponentState} from \"../../../../components\";\nimport {VersionSelector} from \"./version-selector\";\nimport {TrashIcon} from \"@patternfly/react-icons\";\nimport {IfFeature} from \"../../../../components/common/ifFeature\";\nimport {SearchedVersion} from \"../../../../../models\";\n\n\n/**\n * Properties\n */\nexport interface ArtifactVersionPageHeaderProps extends PureComponentProps {\n    title: string;\n    groupId: string;\n    artifactId: string;\n    onDeleteArtifact: () => void;\n    onUploadVersion: () => void;\n    version: string;\n    versions: SearchedVersion[];\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface ArtifactVersionPageHeaderState extends PureComponentState {\n}\n\n\n/**\n * Models the page header for the Artifact page.\n */\nexport class ArtifactVersionPageHeader extends PureComponent<ArtifactVersionPageHeaderProps, ArtifactVersionPageHeaderState> {\n\n    constructor(props: Readonly<ArtifactVersionPageHeaderProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <Flex className=\"example-border\">\n                <FlexItem>\n                    <TextContent>\n                        <Text component={TextVariants.h1}>{ this.props.title }</Text>\n                    </TextContent>\n                </FlexItem>\n                <FlexItem align={{ default : 'alignRight' }}>\n                    <VersionSelector version={this.props.version} versions={this.props.versions}\n                                     groupId={this.props.groupId} artifactId={this.props.artifactId} />\n                    <IfAuth isDeveloper={true}>\n                        <IfFeature feature=\"readOnly\" isNot={true}>\n                            <Button id=\"delete-artifact-button\" variant=\"secondary\" data-testid=\"header-btn-delete\" onClick={this.props.onDeleteArtifact}>Delete</Button>\n                            <Button id=\"upload-version-button\" variant=\"primary\" data-testid=\"header-btn-upload-version\" onClick={this.props.onUploadVersion}>Upload new version</Button>\n                        </IfFeature>\n                    </IfAuth>\n                </FlexItem>\n            </Flex>\n        );\n    }\n\n    protected initializeState(): ArtifactVersionPageHeaderState {\n        return {};\n    }\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport \"./version-selector.css\";\nimport {Button, ButtonVariant, Dropdown, DropdownToggle, InputGroup, TextInput} from '@patternfly/react-core';\nimport {PureComponent, PureComponentProps, PureComponentState} from \"../../../../components\";\nimport {SearchIcon} from \"@patternfly/react-icons\";\nimport Moment from \"react-moment\";\nimport {Link} from \"react-router-dom\";\nimport {SearchedVersion} from \"../../../../../models\";\nimport {Services} from \"../../../../../services\";\n\n\n/**\n * Properties\n */\nexport interface VersionSelectorProps extends PureComponentProps {\n    groupId: string;\n    artifactId: string;\n    version: string;\n    versions: SearchedVersion[];\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface VersionSelectorState extends PureComponentState {\n    isOpen: boolean;\n}\n\n\n/**\n * Models the page header for the Artifact page.\n */\nexport class VersionSelector extends PureComponent<VersionSelectorProps, VersionSelectorState> {\n\n    constructor(props: Readonly<VersionSelectorProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <Dropdown\n                className={this.dropdownClasses()}\n                toggle={<DropdownToggle data-testid=\"versions-toggle\" onToggle={this.onToggle}>Version: { this.props.version }</DropdownToggle>}\n                isOpen={this.state.isOpen}\n            >\n                <div className=\"version-filter\" style={{display: \"none\"}}>\n                    <InputGroup>\n                        <TextInput name=\"filter\" id=\"versionFilter\" type=\"search\" data-testid=\"versions-form-filter\" aria-label=\"Version filter\" />\n                        <Button variant={ButtonVariant.control} data-testid=\"versions-form-btn-search\" aria-label=\"search button for search input\">\n                            <SearchIcon />\n                        </Button>\n                    </InputGroup>\n                </div>\n                <div className=\"version-header\">\n                    <div className=\"version-item\">\n                        <span className=\"name\">Version</span>\n                        <span className=\"date\">Created On</span>\n                    </div>\n                </div>\n                <div className=\"version-list\">\n                    <Link key=\"latest\"\n                          data-testid=\"versions-lnk-latest\"\n                          to={this.linkTo(`/artifacts/${encodeURIComponent(this.props.groupId)}/${encodeURIComponent(this.props.artifactId)}/versions/latest`)}\n                          className=\"version-item latest\">\n                        <span className=\"name\">latest</span>\n                        <span className=\"date\" />\n                    </Link>\n                    {\n                        this.props.versions.map((v, idx) =>\n                            <Link key={v.version}\n                                  data-testid={`versions-lnk-${idx}`}\n                                  to={this.linkTo(`/artifacts/${encodeURIComponent(this.props.groupId)}/${encodeURIComponent(this.props.artifactId)}/versions/${v.version}`)}\n                                  className=\"version-item\">\n                                <span className=\"name\">{ v.version }</span>\n                                <span className=\"date\"><Moment date={v.createdOn} fromNow={true} /></span>\n                            </Link>\n                        )\n                    }\n                </div>\n            </Dropdown>\n        );\n    }\n\n    protected initializeState(): VersionSelectorState {\n        return {\n            isOpen: false\n        };\n    }\n\n    private dropdownClasses(): string {\n        const classes: string[] = [ \"version-selector-dropdown\" ];\n        if (Services.getConfigService().featureReadOnly()) {\n            classes.push(\"dropdown-align-right\");\n        }\n        return classes.join(' ');\n    }\n\n    private onToggle = (isOpen: boolean): void => {\n        this.setSingleState(\"isOpen\", isOpen);\n    };\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport \"./content.css\";\nimport {PureComponent, PureComponentProps, PureComponentState} from \"../../../../components\";\nimport AceEditor from \"react-ace\";\nimport \"ace-builds/src-noconflict/mode-json\";\nimport \"ace-builds/src-noconflict/mode-protobuf\";\nimport \"ace-builds/src-noconflict/mode-xml\";\nimport \"ace-builds/src-noconflict/mode-graphqlschema\";\nimport \"ace-builds/src-noconflict/theme-monokai\";\n\n\n/**\n * Properties\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface ContentTabContentProps extends PureComponentProps {\n    artifactContent: string;\n    artifactType: string;\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface ContentTabContentState extends PureComponentState {\n    content: string;\n    editorWidth: string;\n    editorHeight: string;\n}\n\n\n/**\n * Models the content of the Artifact Info tab.\n */\nexport class ContentTabContent extends PureComponent<ContentTabContentProps, ContentTabContentState> {\n\n    constructor(props: Readonly<ContentTabContentProps>) {\n        super(props);\n    }\n\n    public componentDidMount(): void {\n        // TODO do this again whenever the browser is resized!\n        const elem: HTMLElement|null = document.getElementById(\"ace-wrapper\");\n        if (elem) {\n            const height: number|null = elem.clientHeight;\n            if (height) {\n                this.setSingleState(\"editorHeight\", height + \"px\");\n            }\n        }\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <div className=\"ace-wrapper\" id=\"ace-wrapper\">\n                <AceEditor\n                    data-testid=\"ace-content\"\n                    mode={this.editorMode()}\n                    theme=\"monokai\"\n                    name=\"artifactContent\"\n                    className=\"artifactContent\"\n                    width={this.state.editorWidth}\n                    height={this.state.editorHeight}\n                    fontSize={14}\n                    showPrintMargin={false}\n                    showGutter={true}\n                    highlightActiveLine={false}\n                    value={this.state.content}\n                    readOnly={true}\n                    setOptions={{\n                        enableBasicAutocompletion: false,\n                        enableLiveAutocompletion: false,\n                        enableSnippets: false,\n                        showLineNumbers: true,\n                        tabSize: 2,\n                        useWorker: false\n                    }}\n                />\n            </div>\n        );\n    }\n\n    protected initializeState(): ContentTabContentState {\n        return {\n            content: this.formatContent(),\n            editorHeight: \"500px\",\n            editorWidth: \"100%\"\n        };\n    }\n\n    private editorMode(): string {\n        if (this.props.artifactType === \"PROTOBUF\") {\n            return \"protobuf\";\n        }\n        if (this.props.artifactType === \"WSDL\" || this.props.artifactType === \"XSD\" || this.props.artifactType === \"XML\") {\n            return \"xml\";\n        }\n        if (this.props.artifactType === \"GRAPHQL\") {\n            return \"graphqlschema\";\n        }\n        return \"json\";\n    }\n\n    private formatContent(): string {\n        try {\n            const pval: any = JSON.parse(this.props.artifactContent);\n            if (pval) {\n                return JSON.stringify(pval, null, 2);\n            }\n        } catch (e) {\n            // Do nothing\n        }\n        return this.props.artifactContent;\n    }\n\n}\n\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport \"./documentation.css\";\nimport {PureComponent, PureComponentProps, PureComponentState} from \"../../../../components\";\nimport {RedocStandalone} from \"redoc\";\nimport { ErrorTabContent } from \"./errorTab\";\nimport { Services } from \"src/services\";\n\n\n/**\n * Properties\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface DocumentationTabContentProps extends PureComponentProps {\n    artifactContent: string;\n    artifactType: string;\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface DocumentationTabContentState extends PureComponentState {\n    parsedContent: any | undefined;\n    error: any | undefined\n}\n\n\n/**\n * Models the content of the Artifact Info tab.\n */\nexport class DocumentationTabContent extends PureComponent<DocumentationTabContentProps, DocumentationTabContentState> {\n\n    constructor(props: Readonly<DocumentationTabContentProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        if (this.isError()){\n            return <ErrorTabContent error={{errorMessage: \"Artifact isn't a valid OpenAPI structure\", error: this.state.error}}/>\n        }\n\n        let visualizer: React.ReactElement | null = null;\n        if (this.props.artifactType === \"OPENAPI\") {\n            visualizer = <RedocStandalone spec={this.state.parsedContent} />;\n        }\n\n        if (visualizer !== null) {\n            return visualizer;\n        } else {\n            return <h1>Unsupported Type: { this.props.artifactType }</h1>\n        }\n    }\n\n    protected initializeState(): DocumentationTabContentState {\n        try {\n            return {\n                parsedContent: JSON.parse(this.props.artifactContent),\n                error: undefined\n            };\n        } catch(ex) {\n            Services.getLoggerService().warn(\"Failed to parse content:\");\n            Services.getLoggerService().error(ex);\n            return {\n                parsedContent: undefined,\n                error: ex\n            };\n        }\n        \n    }\n\n    private isError() : boolean {\n        if(this.state.error){\n            return true;\n        }else{\n            return false;\n        }\n    }\n}\n","import React, { ReactNode } from \"react\";\nimport {PureComponent, PureComponentProps, PureComponentState} from \"../../../../components\";\nimport AceEditor from \"react-ace\";\nimport \"ace-builds/src-noconflict/mode-text\";\nimport \"ace-builds/src-noconflict/theme-tomorrow\";\nimport { Button, EmptyState, EmptyStateBody, EmptyStateIcon, EmptyStateSecondaryActions, EmptyStateVariant, Title } from \"@patternfly/react-core\";\nimport { ExclamationTriangleIcon } from \"@patternfly/react-icons\";\n\nexport interface TabError {\n    errorMessage: string,\n    error: any\n}\n\n/**\n * Properties\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface ErrorTabContentProps extends PureComponentProps {\n    error?: TabError | undefined\n    children?: ReactNode\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface ErrorTabContentState extends PureComponentState {\n    isShowDetails: boolean;\n    editorWidth: string;\n    editorHeight: string;   \n}\n\n\nexport class ErrorTabContent extends PureComponent<ErrorTabContentProps, ErrorTabContentState> {\n\n    constructor(props: Readonly<ErrorTabContentProps>) {\n        super(props);\n    }\n\n    public render() {\n        return (\n            <div className=\"centerizer\">\n                    <EmptyState variant={EmptyStateVariant.large}>\n                            <EmptyStateIcon icon={ExclamationTriangleIcon} />\n                            <Title headingLevel=\"h5\" size=\"lg\">{ this.errorMessage() }</Title>\n                            <EmptyStateBody>\n                                { this.errorDescription() }\n                            </EmptyStateBody>\n                            <EmptyStateSecondaryActions>\n                                <Button variant=\"link\"\n                                        data-testid=\"error-btn-details\"\n                                        onClick={this.showDetails}>Show details</Button>\n                            </EmptyStateSecondaryActions>\n                        </EmptyState>\n                        <div className=\"separator\">&nbsp;</div>\n                        {\n                            this.state.isShowDetails ?\n                                <div className=\"ace-wrapper pf-c-empty-state pf-m-lg\" id=\"ace-wrapper\">\n                                    <AceEditor\n                                        data-testid=\"ace-details\"\n                                        mode=\"json\"\n                                        theme=\"tomorrow\"\n                                        name=\"errorDetail\"\n                                        className=\"errorDetail\"\n                                        width={this.state.editorWidth}\n                                        height={this.state.editorHeight}\n                                        fontSize={14}\n                                        showPrintMargin={false}\n                                        showGutter={false}\n                                        highlightActiveLine={false}\n                                        value={this.errorDetail()}\n                                        readOnly={true}\n                                        setOptions={{\n                                            enableBasicAutocompletion: false,\n                                            enableLiveAutocompletion: false,\n                                            enableSnippets: false,\n                                            showLineNumbers: true,\n                                            tabSize: 2,\n                                            useWorker: false\n                                        }}\n                                    />\n                                </div>\n                                :\n                                <div/>\n                        }\n            </div>\n        )\n    }\n    \n    protected initializeState(): ErrorTabContentState {\n        return {\n            editorHeight: \"250px\",\n            editorWidth: \"100%\",\n            isShowDetails: false\n        };\n    }\n\n    private errorMessage(): string {\n        if (this.props.error) {\n            return this.props.error.errorMessage;\n        } else {\n            return \"Internal server error\";\n        }\n    }\n\n    // Error description can be in node children - if it is missing, default description is used\n    private errorDescription(): ReactNode {\n        if (this.props.children) {\n            return this.props.children;\n        } else {\n            return (\n                \"The content you are trying to visualize is not valid (we could not parse it).  If possible, we'll try to provide you with some more information about \" +\n                \"the problem (see below).\"\n            );\n        }\n    }\n\n    private errorDetail(): string {\n        if (this.props.error && this.props.error.error && this.props.error.error.detail) {\n            return this.props.error.error.detail;\n        }else if (this.props.error && this.props.error.error && this.props.error.error.message) {\n            return this.props.error.error.message;\n        } else if (this.props.error && this.props.error.error) {\n            return JSON.stringify(this.props.error.error, null, 3);\n        } else {\n            return \"Error info not available\";\n        }\n    }\n\n    private showDetails = (): void => {\n        this.setSingleState(\"isShowDetails\", true);\n    };\n\n}\n\n\n\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport \"./info.css\";\nimport {\n    ArtifactTypeIcon, IfAuth,\n    PureComponent,\n    PureComponentProps,\n    PureComponentState,\n    RuleList\n} from \"../../../../components\";\nimport {Badge, Button, Flex, FlexItem, Split, SplitItem} from \"@patternfly/react-core\";\nimport {DownloadIcon, EditIcon} from \"@patternfly/react-icons\";\nimport Moment from \"react-moment\";\nimport {IfFeature} from \"../../../../components/common/ifFeature\";\nimport {If} from \"../../../../components/common/if\";\nimport {ArtifactMetaData, Rule} from \"../../../../../models\";\n\n/**\n * Properties\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface InfoTabContentProps extends PureComponentProps {\n    artifact: ArtifactMetaData;\n    isLatest: boolean;\n    rules: Rule[];\n    onEnableRule: (ruleType: string) => void;\n    onDisableRule: (ruleType: string) => void;\n    onConfigureRule: (ruleType: string, config: string) => void;\n    onDownloadArtifact: () => void;\n    onEditMetaData: () => void;\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface InfoTabContentState extends PureComponentState {\n}\n\n\n/**\n * Models the content of the Artifact Info tab.\n */\nexport class InfoTabContent extends PureComponent<InfoTabContentProps, InfoTabContentState> {\n\n    constructor(props: Readonly<InfoTabContentProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <Flex className=\"artifact-tab-content\">\n                <FlexItem className=\"artifact-basics\">\n                    <div className=\"title-and-type\">\n                        <Split>\n                            <SplitItem className=\"type\"><ArtifactTypeIcon type={this.props.artifact.type} /></SplitItem>\n                            <SplitItem className=\"title\" isFilled={true}>Version Metadata</SplitItem>\n                            <SplitItem className=\"actions\">\n                                <IfAuth isDeveloper={true}>\n                                    <IfFeature feature=\"readOnly\" isNot={true}>\n                                        <Button id=\"edit-action\"\n                                                data-testid=\"artifact-btn-edit\"\n                                                title=\"Edit artifact metadata\"\n                                                onClick={this.props.onEditMetaData}\n                                                variant=\"plain\"><EditIcon /></Button>\n                                    </IfFeature>\n                                </IfAuth>\n                            </SplitItem>\n                        </Split>\n                    </div>\n                    <div className=\"metaData\">\n                        <div className=\"metaDataItem\">\n                            <span className=\"label\">Name</span>\n                            <span className=\"value\">{this.props.artifact.name}</span>\n                        </div>\n                        <If condition={this.isArtifactInGroup}>\n                            <div className=\"metaDataItem\">\n                                <span className=\"label\">Group</span>\n                                <span className=\"value\">{this.props.artifact.groupId}</span>\n                            </div>\n                        </If>\n                        <div className=\"metaDataItem\">\n                            <span className=\"label\">ID</span>\n                            <span className=\"value\">{this.props.artifact.id}</span>\n                        </div>\n                        <div className=\"metaDataItem\">\n                            <span className=\"label\">Status</span>\n                            <span className=\"value\">{this.props.artifact.state}</span>\n                        </div>\n                        <div className=\"metaDataItem\">\n                            <span className=\"label\">Created</span>\n                            <span className=\"value\"><Moment date={this.props.artifact.createdOn} fromNow={true} /></span>\n                        </div>\n                        <If condition={this.props.isLatest}>\n                            <div className=\"metaDataItem\">\n                                <span className=\"label\">Modified</span>\n                                <span className=\"value\"><Moment date={this.props.artifact.modifiedOn} fromNow={true} /></span>\n                            </div>\n                        </If>\n                        <div className=\"metaDataItem\">\n                            <span className=\"label\">Global ID</span>\n                            <span className=\"value\">{this.props.artifact.globalId}</span>\n                        </div>\n                        <div className=\"metaDataItem\">\n                            <span className=\"label\">Content ID</span>\n                            <span className=\"value\">{this.props.artifact.contentId}</span>\n                        </div>\n                    </div>\n                    <div className=\"description\">{this.description()}</div>\n                    <div className=\"labels\">\n                        {\n                            this.labels().map( label =>\n                                <Badge key={label} isRead={true}>{label}</Badge>\n                            )\n                        }\n                    </div>\n                    <div className=\"actions\">\n                        <Button id=\"download-action\"\n                                data-testid=\"artifact-btn-download\"\n                                title=\"Download artifact content\"\n                                onClick={this.props.onDownloadArtifact}\n                                variant=\"secondary\"><DownloadIcon /> Download</Button>\n                    </div>\n                </FlexItem>\n                <FlexItem className=\"artifact-rules\">\n                    <div className=\"rules-label\">Content Rules</div>\n                    <RuleList rules={this.props.rules}\n                              onEnableRule={this.props.onEnableRule}\n                              onDisableRule={this.props.onDisableRule}\n                              onConfigureRule={this.props.onConfigureRule}\n                    />\n                </FlexItem>\n            </Flex>\n        );\n    }\n\n    protected initializeState(): InfoTabContentState {\n        return {};\n    }\n\n    private nameOrId(): string {\n        return this.props.artifact.name ? this.props.artifact.name : this.props.artifact.id;\n    }\n\n    private labels(): string[] {\n        return this.props.artifact.labels ? this.props.artifact.labels : [];\n    }\n\n    private description(): string {\n        return this.props.artifact.description ?\n            this.props.artifact.description :\n            `An artifact of type ${this.props.artifact.type} with no description.`;\n    }\n\n    private isArtifactInGroup = (): boolean => {\n        const groupId: string|null = this.props.artifact.groupId;\n        return groupId != null && groupId != \"default\";\n    };\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport \"./uploadForm.css\";\nimport {PureComponent, PureComponentProps, PureComponentState} from \"../../../../components\";\nimport {FileUpload, Form, FormGroup} from \"@patternfly/react-core\";\n\n\n/**\n * Properties\n */\nexport interface UploadVersionFormProps extends PureComponentProps {\n    onValid: (valid: boolean) => void;\n    onChange: (data: string) => void;\n}\n\n/**\n * State\n */\nexport interface UploadVersionFormState extends PureComponentState {\n    content: string;\n    contentFilename: string;\n    contentIsLoading: boolean;\n    valid: boolean;\n}\n\n/**\n * Models the toolbar for the Artifacts page.\n */\nexport class UploadVersionForm extends PureComponent<UploadVersionFormProps, UploadVersionFormState> {\n\n    constructor(props: Readonly<UploadVersionFormProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <Form>\n                <FormGroup\n                    label=\"Artifact\"\n                    isRequired={true}\n                    fieldId=\"form-artifact\"\n                >\n                    <FileUpload\n                        id=\"artifact-content\"\n                        data-testid=\"form-upload\"\n                        type=\"text\"\n                        filename={this.state.contentFilename}\n                        value={this.state.content}\n                        isRequired={true}\n                        allowEditingUploadedText={true}\n                        onChange={this.onContentChange}\n                        onReadStarted={this.onFileReadStarted}\n                        onReadFinished={this.onFileReadFinished}\n                        isLoading={this.state.contentIsLoading}\n                    />\n                </FormGroup>\n            </Form>\n        );\n    }\n\n    protected initializeState(): UploadVersionFormState {\n        return {\n            content: \"\",\n            contentFilename: \"\",\n            contentIsLoading: false,\n            valid: false\n        };\n    }\n\n    private onContentChange = (value: any, filename: string, event: any): void => {\n        this.setSingleState(\"content\", value, () => {\n            this.fireOnChange();\n            this.checkValid();\n        });\n    };\n\n    private onFileReadStarted = (): void => {\n        this.setSingleState(\"contentIsLoading\", true);\n    };\n\n    private onFileReadFinished = (): void => {\n        this.setSingleState(\"contentIsLoading\", false);\n    };\n\n    private checkValid(): void {\n        const data: string = this.currentData();\n        const oldValid: boolean = this.state.valid;\n        const newValid: boolean = this.isValid(data);\n        const validityChanged: boolean = oldValid !== newValid;\n        this.setState({\n            valid: newValid\n        }, () => {\n            if (validityChanged) {\n                this.fireOnValid();\n            }\n        });\n    }\n\n    private isValid(data: string): boolean {\n        return !!data;\n    }\n\n    private currentData(): string {\n        return this.state.content;\n    }\n\n    private fireOnChange(): void {\n        if (this.props.onChange) {\n            this.props.onChange(this.currentData());\n        }\n    }\n\n    private fireOnValid(): void {\n        if (this.props.onValid) {\n            this.props.onValid(this.state.valid);\n        }\n    }\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport {ErrorPage, PageError, PureComponent, PureComponentProps, PureComponentState} from \"../components\";\nimport {Services} from \"../../services\";\nimport {Flex, FlexItem, PageSection, PageSectionVariants, Spinner} from \"@patternfly/react-core\";\nimport {AccessErrorPage} from \"../components/errorPage/accessErrorPage\";\nimport {RateLimitErrorPage} from \"../components/errorPage/rateLimitErrorPage\";\n\n// TODO this should be configurable via standard UI config settings\nconst MAX_RETRIES: number = 1;\n\nexport enum PageErrorType {\n    React, Server\n}\n\n/**\n * Properties\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface PageProps extends PureComponentProps {\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface PageState extends PureComponentState {\n    pageLoadRetries?: number;\n    isLoading?: boolean;\n    isError?: boolean;\n    error?: PageError;\n}\n\n\n/**\n * The artifacts page.\n */\nexport abstract class PageComponent<P extends PageProps, S extends PageState> extends PureComponent<P, S> {\n\n    protected constructor(props: Readonly<P>) {\n        super(props);\n        setTimeout(() => {\n            this.loadPageData();\n        }, 10);\n    }\n\n    protected initializeState(): S {\n        return {\n            ...this.initializePageState(),\n            isLoading: true\n        };\n    }\n\n    protected abstract initializePageState(): S;\n\n    public componentDidCatch(error: Error, errorInfo: React.ErrorInfo): void {\n        this.handleError(PageErrorType.React, error, errorInfo);\n    }\n\n    public render(): React.ReactElement {\n        if (this.isError()) {\n            if (this.is403Error()) {\n                return (\n                    <AccessErrorPage error={this.state.error}/>\n                );\n            } else if (this.is419Error()) {\n                return (\n                    <RateLimitErrorPage error={this.state.error}/>\n                );\n            } else {\n                return (\n                    <ErrorPage error={this.state.error}/>\n                );\n            }\n        } else if (this.isLoading()) {\n            return (\n                <React.Fragment>\n                    <PageSection variant={PageSectionVariants.default} isFilled={true}>\n                        <Flex>\n                            <FlexItem><Spinner size=\"lg\"/></FlexItem>\n                            <FlexItem><span>Loading...</span></FlexItem>\n                        </Flex>\n                    </PageSection>\n                </React.Fragment>\n            );\n        } else {\n            return this.renderPage();\n        }\n    }\n\n    /**\n     * Renders the page content.  Subclasses should implement this instead of render() so that\n     * errors are handled/displayed properly.\n     */\n    protected abstract renderPage(): React.ReactElement;\n\n    protected postConstruct(): void {\n        // @ts-ignore\n        PureComponent.setHistory(this.props.history);\n        super.postConstruct();\n    }\n\n    // @ts-ignore\n    protected createLoaders(): Promise | Promise[] | null {\n        return null;\n    }\n\n    protected handleServerError(error: any, errorMessage: string): void {\n        this.handleError(PageErrorType.Server, error, errorMessage);\n    }\n\n    protected getPathParam(paramName: string): string {\n        // @ts-ignore\n        const paramValue: string = this.props.match.params[paramName];\n        const paramValueDecoded: string = decodeURIComponent(paramValue);\n        return paramValueDecoded;\n    }\n\n    protected isLoading(): boolean {\n        return this.state.isLoading ? true : false;\n    }\n\n    private loadPageData(): void {\n        // @ts-ignore\n        let loaders: Promise | Promise[] | null = this.createLoaders();\n\n        // If not loading anything, convert from null to empty array\n        if (loaders == null) {\n            loaders = [];\n        }\n\n        // Convert to array if not already\n        if (!Array.isArray(loaders)) {\n            loaders = [ loaders ];\n        }\n\n        // Always add the \"update current user\" loader\n        loaders = [\n            Services.getUsersService().updateCurrentUser(),\n            ...loaders\n        ];\n\n        if (loaders.length === 0) {\n            this.setSingleState(\"isLoading\", false);\n        } else {\n            this.setSingleState(\"isLoading\", true);\n            Promise.all(loaders).then(() => {\n                this.setSingleState(\"isLoading\", false);\n            }).catch(error => {\n                Services.getLoggerService().debug(\"[PageComponent] Page data load failed, retrying.\");\n                const retries: number = this.getRetries();\n                if (retries < MAX_RETRIES) {\n                    this.incrementRetries();\n                    setTimeout(() => {\n                        this.loadPageData();\n                    }, Math.pow(2, retries) * 100);\n                } else {\n                    this.handleServerError(error, \"Error loading page data.\");\n                }\n            });\n        }\n    }\n\n    private getRetries(): number {\n        return this.state.pageLoadRetries !== undefined ? this.state.pageLoadRetries as number : 0;\n    }\n\n    private incrementRetries(): void {\n        const retries: number = this.getRetries() + 1;\n        this.setSingleState(\"pageLoadRetries\", retries);\n    }\n\n    private isError(): boolean {\n        return this.state.isError ? true : false;\n    }\n\n    private is403Error(): boolean {\n        return this.state.error && this.state.error.error.status && (this.state.error.error.status == 403);\n    }\n\n    private is419Error(): boolean {\n        return this.state.error && this.state.error.error.status && (this.state.error.error.status == 419);\n    }\n\n    private handleError(errorType: PageErrorType, error: any, errorMessage: any): void {\n        Services.getLoggerService().error(\"[PageComponent] Handling an error of type: \", errorType);\n        Services.getLoggerService().error(\"[PageComponent] \", errorMessage);\n        Services.getLoggerService().error(\"[PageComponent] \", error);\n        this.setMultiState({\n            error: {\n                error,\n                errorMessage,\n                type: errorType\n            },\n            isError: true\n        });\n    }\n}\n","/**\n * @license\n * Copyright 2021 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport \"./errorPage.css\";\nimport {\n    Button,\n    EmptyState,\n    EmptyStateBody,\n    EmptyStateIcon,\n    EmptyStateSecondaryActions,\n    EmptyStateVariant,\n    PageSection,\n    PageSectionVariants,\n    Title\n} from '@patternfly/react-core';\nimport {LockedIcon} from \"@patternfly/react-icons\";\nimport \"ace-builds/src-noconflict/mode-text\";\nimport \"ace-builds/src-noconflict/theme-tomorrow\";\nimport {ErrorPage, ErrorPageProps} from \"./errorPage\";\n\n\nexport class AccessErrorPage extends ErrorPage {\n\n    constructor(props: Readonly<ErrorPageProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <React.Fragment>\n                <PageSection className=\"ps_error\" variant={PageSectionVariants.light}>\n                    <div className=\"centerizer\">\n                        <EmptyState variant={EmptyStateVariant.large}>\n                            <EmptyStateIcon icon={LockedIcon} />\n                            <Title headingLevel=\"h5\" size=\"lg\">Access permissions needed</Title>\n                            <EmptyStateBody>\n                                To access this Service Registry instance, contact your organization administrators.\n                            </EmptyStateBody>\n                            <EmptyStateSecondaryActions>\n                                <Button variant=\"link\"\n                                        data-testid=\"error-btn-back\"\n                                        onClick={this.navigateBack}>Return to previous page</Button>\n                            </EmptyStateSecondaryActions>\n                        </EmptyState>\n                    </div>\n                </PageSection>\n            </React.Fragment>\n        );\n    }\n\n    protected navigateBack = (): void => {\n        window.history.back();\n    };\n\n}\n","/**\n * @license\n * Copyright 2022 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport \"./errorPage.css\";\nimport {\n    Button,\n    EmptyState,\n    EmptyStateBody,\n    EmptyStateIcon,\n    EmptyStateSecondaryActions,\n    EmptyStateVariant,\n    PageSection,\n    PageSectionVariants,\n    Title\n} from '@patternfly/react-core';\nimport {ExclamationCircleIcon} from \"@patternfly/react-icons\";\nimport \"ace-builds/src-noconflict/mode-text\";\nimport \"ace-builds/src-noconflict/theme-tomorrow\";\nimport {ErrorPage, ErrorPageProps} from \"./errorPage\";\n\n\nexport class RateLimitErrorPage extends ErrorPage {\n\n    constructor(props: Readonly<ErrorPageProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <React.Fragment>\n                <PageSection className=\"ps_error\" variant={PageSectionVariants.light}>\n                    <div className=\"centerizer\">\n                        <EmptyState variant={EmptyStateVariant.large}>\n                            <EmptyStateIcon icon={ExclamationCircleIcon} />\n                            <Title headingLevel=\"h5\" size=\"lg\">Current usage is too high</Title>\n                            <EmptyStateBody>\n                                This Service Registry instance is throttled due to a high request rate. Ensure\n                                that existing applications are properly configured to cache the schemas.\n                            </EmptyStateBody>\n                            <EmptyStateSecondaryActions>\n                                <Button variant=\"link\"\n                                        data-testid=\"error-btn-back\"\n                                        onClick={this.navigateBack}>Return to previous page</Button>\n                            </EmptyStateSecondaryActions>\n                        </EmptyState>\n                    </div>\n                </PageSection>\n            </React.Fragment>\n        );\n    }\n\n    protected navigateBack = (): void => {\n        window.history.back();\n    };\n\n}\n"],"names":["props","render","this","accept","children","initializeState","condition","handleTabClick","event","tabIndex","setSingleState","onUploadVersion","onDeleteArtifact","doEnableRule","ruleType","Services","debug","config","createArtifactRule","groupId","artifactId","catch","error","handleServerError","rules","type","doDisableRule","deleteArtifactRule","filter","r","doConfigureRule","updateArtifactRule","map","doDownloadArtifact","content","state","artifactContent","contentType","ContentTypes","fext","artifact","ArtifactTypes","fname","artifactNameOrId","downloadToFS","onUploadFormValid","isValid","onUploadFormChange","data","onUploadModalClose","onDeleteModalClose","doUploadArtifactVersion","pleaseWait","uploadFormData","artifactType","createArtifactVersion","then","versionMetaData","artifactVersionLocation","encodeURIComponent","id","version","info","navigateTo","linkTo","error_code","handleInvalidContentError","setMultiState","isUploadFormValid","doDeleteArtifact","deleteArtifact","openEditMetaDataModal","onEditModalClose","doEditMetaData","metaData","updateArtifactMetaData","versionParam","closeInvalidContentModal","isOpen","message","isPleaseWaitModalOpen","pleaseWaitMessage","renderPage","ArtifactMetaData","tabs","Tab","eventKey","title","key","tabContentId","isLatest","onEnableRule","onDisableRule","onConfigureRule","onDownloadArtifact","onEditMetaData","showDocumentationTab","splice","groupIdParam","hasGroup","breadcrumbs","Breadcrumb","BreadcrumbItem","Link","to","isActive","feature","is","PageSection","className","variant","PageSectionVariants","nameOrId","versions","isFilled","padding","default","Tabs","unmountOnExit","activeKey","activeTabKey","onSelect","Modal","isUploadModalOpen","onClose","actions","Button","onClick","isDisabled","onChange","onValid","isDeleteModalOpen","name","artifactName","description","artifactDescription","labels","artifactLabels","isEditModalOpen","invalidContentError","isInvalidContentModalOpen","initializePageState","artifactIsText","getPathParam","artifactIdParam","createLoaders","getArtifactMetaData","md","getArtifactContent","e","warn","eo","JSON","parse","is404","getArtifactRules","getArtifactVersions","reverse","doEdit","onNameChange","value","onLabelsChange","trim","length","split","item","onDescriptionChange","Form","FormGroup","label","fieldId","TextInput","isRequired","placeholder","helperText","TextArea","componentDidUpdate","prevProps","join","Flex","FlexItem","TextContent","Text","component","TextVariants","align","isDeveloper","isNot","onToggle","Dropdown","dropdownClasses","toggle","DropdownToggle","style","display","InputGroup","ButtonVariant","SearchIcon","v","idx","date","createdOn","fromNow","classes","featureReadOnly","push","componentDidMount","elem","document","getElementById","height","clientHeight","mode","editorMode","theme","width","editorWidth","editorHeight","fontSize","showPrintMargin","showGutter","highlightActiveLine","readOnly","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","useWorker","formatContent","pval","stringify","isError","errorMessage","visualizer","RedocStandalone","spec","parsedContent","undefined","ex","showDetails","EmptyState","EmptyStateVariant","EmptyStateIcon","icon","ExclamationTriangleIcon","Title","headingLevel","size","EmptyStateBody","errorDescription","EmptyStateSecondaryActions","isShowDetails","errorDetail","detail","isArtifactInGroup","Split","SplitItem","EditIcon","If","modifiedOn","globalId","contentId","Badge","isRead","DownloadIcon","onContentChange","filename","fireOnChange","checkValid","onFileReadStarted","onFileReadFinished","FileUpload","contentFilename","allowEditingUploadedText","onReadStarted","onReadFinished","isLoading","contentIsLoading","valid","currentData","oldValid","newValid","validityChanged","setState","fireOnValid","PageErrorType","navigateBack","window","history","back","LockedIcon","ExclamationCircleIcon","setTimeout","loadPageData","componentDidCatch","errorInfo","handleError","React","is403Error","AccessErrorPage","is419Error","RateLimitErrorPage","Spinner","postConstruct","Server","paramName","paramValue","match","params","decodeURIComponent","loaders","Array","isArray","updateCurrentUser","Promise","all","retries","getRetries","incrementRetries","Math","pow","pageLoadRetries","status","errorType"],"sourceRoot":""}