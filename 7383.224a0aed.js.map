{"version":3,"file":"7383.224a0aed.js","mappings":"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","sources":["webpack://@apicurio/registry-ui/./src/app/components/baseComponent.ts","webpack://@apicurio/registry-ui/./src/app/components/common/artifactTypeIcon.tsx","webpack://@apicurio/registry-ui/./src/app/components/errorPage/errorPage.tsx","webpack://@apicurio/registry-ui/./src/app/components/header/avatarDropdown.tsx","webpack://@apicurio/registry-ui/./src/app/components/header/avatar.png","webpack://@apicurio/registry-ui/./src/app/components/modals/invalidContentModal.tsx","webpack://@apicurio/registry-ui/./src/app/components/modals/pleaseWaitModal.tsx","webpack://@apicurio/registry-ui/./src/app/components/ruleList/compatibility-dropdown.tsx","webpack://@apicurio/registry-ui/./src/app/components/ruleList/validity-dropdown.tsx","webpack://@apicurio/registry-ui/./src/app/components/ruleList/ruleList.tsx","webpack://@apicurio/registry-ui/./src/app/components/schemaMapping/emptyState.tsx","webpack://@apicurio/registry-ui/./src/app/components/schemaMapping/matchingSchemaCard.tsx","webpack://@apicurio/registry-ui/./src/app/components/schemaMapping/noMatchingSchema.tsx","webpack://@apicurio/registry-ui/./src/app/components/schemaMapping/schemaCard.tsx","webpack://@apicurio/registry-ui/./src/app/components/schemaMapping/permissionDenied.tsx","webpack://@apicurio/registry-ui/./src/app/components/schemaMapping/schemaMapping.tsx","webpack://@apicurio/registry-ui/./src/app/federated/federated-utils.ts","webpack://@apicurio/registry-ui/./src/models/contentTypes.model.ts","webpack://@apicurio/registry-ui/./src/models/roleMapping.model.ts","webpack://@apicurio/registry-ui/./src/services/config/config.type.ts","webpack://@apicurio/registry-ui/./src/services/baseService.ts","webpack://@apicurio/registry-ui/./src/services/admin/admin.service.ts","webpack://@apicurio/registry-ui/./src/services/config/config.service.ts","webpack://@apicurio/registry-ui/./src/services/alerts/alerts.service.ts","webpack://@apicurio/registry-ui/./src/services/downloader/downloader.service.ts","webpack://@apicurio/registry-ui/./src/services/groups/groups.service.ts","webpack://@apicurio/registry-ui/./src/services/logger/logger.service.ts","webpack://@apicurio/registry-ui/./src/services/auth/auth.service.ts","webpack://@apicurio/registry-ui/./src/services/users/users.service.ts","webpack://@apicurio/registry-ui/./src/services/services.ts","webpack://@apicurio/registry-ui/./src/app/components/header/apicurio_logo_darkbkg_350px.png"],"sourcesContent":["/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from \"react\";\nimport { Services } from \"../../services\";\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\nexport interface PureComponentProps {\n}\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\nexport interface PureComponentState {\n}\n\n\n/**\n * Base class for all Apicurio Registry UI components.\n */\nexport abstract class PureComponent<P extends PureComponentProps, S extends PureComponentState, SS = Record<string, unknown>> extends React.PureComponent<P, S, SS> {\n\n    private static HISTORY: any = null;\n    private testIdCounter: number = 1;\n\n    public static setHistory(history: any): void {\n        PureComponent.HISTORY = history;\n    }\n\n    protected constructor(properties: Readonly<P>) {\n        super(properties);\n        this.state = this.initializeState();\n        this.postConstruct();\n    }\n\n    protected abstract initializeState(): S;\n\n    protected testId(prefix: string): string {\n        return prefix + this.testIdCounter++;\n    }\n\n    protected postConstruct(): void {\n        // Can optionally be overridden by subclasses.\n    }\n\n    protected setSingleState(key: string, value: any, callback?: () => void): void {\n        const newState: any = {};\n        newState[key] = value;\n        this.setMultiState(newState, callback);\n    }\n\n    protected setMultiState<K extends keyof S>(newState: Pick<S, K>, callback?: () => void): void {\n        // Services.getLoggerService().debug(\"[PureComponent] Setting multi-state: %o\", newState);\n        this.setState({\n            ...newState\n        }, callback);\n    }\n\n    protected navigateTo = (location: string): () => void => {\n        return () => {\n            const history: any = PureComponent.HISTORY;\n            if (history) {\n                Services.getLoggerService().info(\"Navigating to:\", location);\n                history.push(location);\n            } else {\n                Services.getLoggerService().warn(\"Navigation impossible, null/undefined history.\");\n            }\n        };\n    };\n\n    protected linkTo(url: string): string {\n        return Services.getConfigService().uiNavPrefixPath() + url;\n    }\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from \"react\";\nimport \"./artifactTypeIcon.css\";\nimport { PureComponent, PureComponentProps, PureComponentState } from \"../baseComponent\";\nimport { ArtifactTypes } from \"../../../models\";\n\n/**\n * Properties\n */\nexport interface ArtifactTypeIconProps extends PureComponentProps {\n    type: string;\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface ArtifactTypeIconState extends PureComponentState {\n}\n\n\n/**\n * Models the list of artifacts.\n */\nexport class ArtifactTypeIcon extends PureComponent<ArtifactTypeIconProps, ArtifactTypeIconState> {\n\n    constructor(props: Readonly<ArtifactTypeIconProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <div className={this.getClassNames()} title={this.getTitle()} />\n        );\n    }\n\n    protected initializeState(): ArtifactTypeIconState {\n        return {};\n    }\n\n    private getTitle(): string {\n        let title: string = this.props.type;\n        switch (this.props.type) {\n            case ArtifactTypes.AVRO:\n                title = \"Avro Schema\";\n                break;\n            case ArtifactTypes.PROTOBUF:\n                title = \"Protobuf Schema\";\n                break;\n            case ArtifactTypes.JSON:\n                title = \"JSON Schema\";\n                break;\n            case ArtifactTypes.OPENAPI:\n                title = \"OpenAPI Definition\";\n                break;\n            case ArtifactTypes.ASYNCAPI:\n                title = \"AsyncAPI Definition\";\n                break;\n            case ArtifactTypes.GRAPHQL:\n                title = \"GraphQL Definition\";\n                break;\n            case ArtifactTypes.KCONNECT:\n                title = \"Kafka Connect Schema\";\n                break;\n            case ArtifactTypes.WSDL:\n                title = \"WSDL\";\n                break;\n            case ArtifactTypes.XSD:\n                title = \"XML Schema\";\n                break;\n            case ArtifactTypes.XML:\n                title = \"XML\";\n                break;\n        }\n        return title;\n    }\n\n    private getClassNames(): string {\n        let classes: string = \"artifact-type-icon\";\n        switch (this.props.type) {\n            case ArtifactTypes.AVRO:\n                classes += \" avro-icon24\";\n                break;\n            case ArtifactTypes.PROTOBUF:\n                classes += \" protobuf-icon24\";\n                break;\n            case ArtifactTypes.JSON:\n                classes += \" json-icon24\";\n                break;\n            case ArtifactTypes.OPENAPI:\n                classes += \" oai-icon24\";\n                break;\n            case ArtifactTypes.ASYNCAPI:\n                classes += \" aai-icon24\";\n                break;\n            case ArtifactTypes.GRAPHQL:\n                classes += \" graphql-icon24\";\n                break;\n            case ArtifactTypes.KCONNECT:\n                classes += \" kconnect-icon24\";\n                break;\n            case ArtifactTypes.WSDL:\n                classes += \" xml-icon24\";\n                break;\n            case ArtifactTypes.XSD:\n                classes += \" xml-icon24\";\n                break;\n            case ArtifactTypes.XML:\n                classes += \" xml-icon24\";\n                break;\n        }\n        return classes;\n    }\n\n}\n\nexport default ArtifactTypeIcon;\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport \"./errorPage.css\";\nimport {\n    Button,\n    EmptyState,\n    EmptyStateBody,\n    EmptyStateIcon,\n    EmptyStateSecondaryActions,\n    EmptyStateVariant,\n    PageSection,\n    PageSectionVariants,\n    Title\n} from \"@patternfly/react-core\";\nimport { PureComponent, PureComponentProps, PureComponentState } from \"../baseComponent\";\nimport { PageErrorType } from \"../../pages/basePage\";\nimport { ExclamationTriangleIcon } from \"@patternfly/react-icons\";\nimport AceEditor from \"react-ace\";\nimport \"ace-builds/src-noconflict/mode-text\";\nimport \"ace-builds/src-noconflict/theme-tomorrow\";\nimport { Services } from \"../../../services\";\n\n\nexport interface PageError {\n    type: PageErrorType,\n    errorMessage: string,\n    error: any\n}\n\n\n// tslint:disable-next-line:no-empty-interface\nexport interface ErrorPageProps extends PureComponentProps {\n    error: PageError|undefined;\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface ErrorPageState extends PureComponentState {\n    isShowDetails: boolean;\n    editorWidth: string;\n    editorHeight: string;\n    canShowDetails: boolean;\n}\n\n\nexport class ErrorPage extends PureComponent<ErrorPageProps, ErrorPageState> {\n\n    constructor(props: Readonly<ErrorPageProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <React.Fragment>\n                <PageSection className=\"ps_error\" variant={PageSectionVariants.light}>\n                    <div className=\"centerizer\">\n                        <EmptyState variant={EmptyStateVariant.large}>\n                            <EmptyStateIcon icon={ExclamationTriangleIcon} />\n                            <Title headingLevel=\"h5\" size=\"lg\">{ this.errorMessage() }</Title>\n                            <EmptyStateBody>\n                                Try reloading the page. If the issue persists, reach out to your administrator.\n                            </EmptyStateBody>\n                            <Button variant=\"primary\" onClick={this.reloadPage}>Reload page</Button>\n                            <EmptyStateSecondaryActions>\n                                <Button variant=\"link\"\n                                        data-testid=\"error-btn-artifacts\"\n                                        onClick={this.navigateTo(this.linkTo(\"/\"))}>Back to artifacts</Button>\n                                {\n                                    this.state.canShowDetails ?\n                                        <Button variant=\"link\"\n                                                data-testid=\"error-btn-details\"\n                                                onClick={this.showDetails}>Show details</Button>\n                                        :\n                                        <span/>\n                                }\n                            </EmptyStateSecondaryActions>\n                        </EmptyState>\n                        <div className=\"separator\">&nbsp;</div>\n                        {\n                            this.state.isShowDetails ?\n                                <div className=\"ace-wrapper pf-c-empty-state pf-m-lg\" id=\"ace-wrapper\">\n                                    <AceEditor\n                                        data-testid=\"ace-details\"\n                                        mode=\"json\"\n                                        theme=\"tomorrow\"\n                                        name=\"errorDetail\"\n                                        className=\"errorDetail\"\n                                        width={this.state.editorWidth}\n                                        height={this.state.editorHeight}\n                                        fontSize={14}\n                                        showPrintMargin={false}\n                                        showGutter={false}\n                                        highlightActiveLine={false}\n                                        value={this.errorDetail()}\n                                        readOnly={true}\n                                        setOptions={{\n                                            enableBasicAutocompletion: false,\n                                            enableLiveAutocompletion: false,\n                                            enableSnippets: false,\n                                            showLineNumbers: true,\n                                            tabSize: 2,\n                                            useWorker: false\n                                        }}\n                                    />\n                                </div>\n                                :\n                                <div/>\n                        }\n                    </div>\n                </PageSection>\n            </React.Fragment>\n        );\n    }\n\n    protected initializeState(): ErrorPageState {\n        return {\n            editorHeight: \"250px\",\n            editorWidth: \"100%\",\n            isShowDetails: false,\n            canShowDetails: !Services.getConfigService().featureMultiTenant()\n        };\n    }\n\n    private errorMessage(): string {\n        if (this.props.error) {\n            return this.props.error.errorMessage;\n        } else {\n            return \"Internal server error\";\n        }\n    }\n\n    private errorDetail(): string {\n        if (this.props.error && this.props.error.error && this.props.error.error.detail) {\n            return this.props.error.error.detail;\n        } else if (this.props.error && this.props.error.error) {\n            return JSON.stringify(this.props.error.error, null, 3);\n        } else {\n            return \"Error info not available\";\n        }\n    }\n\n    private showDetails = (): void => {\n        this.setSingleState(\"isShowDetails\", true);\n    };\n\n    protected reloadPage = (): void => {\n        window.location.reload();\n    };\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport \"./avatarDropdown.css\";\nimport avatarImg from \"./avatar.png\";\nimport { Avatar, Button, Dropdown, DropdownItem, DropdownToggle } from \"@patternfly/react-core\";\nimport { PureComponent, PureComponentProps, PureComponentState } from \"../baseComponent\";\nimport { Services } from \"../../../services\";\n\n\n// tslint:disable-next-line:no-empty-interface\nexport interface AvatarDropdownProps extends PureComponentProps {\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface AvatarDropdownState extends PureComponentState {\n    isOpen: boolean;\n}\n\n\nexport class AvatarDropdown extends PureComponent<AvatarDropdownProps, AvatarDropdownState> {\n\n    constructor(props: Readonly<AvatarDropdownProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        const dropdownItems = [\n            <DropdownItem key=\"logout\">\n                <Button className=\"avatar-logout-link\" onClick={() => Services.getAuthService().doLogout()} variant=\"link\" isInline={true}>Logout</Button>\n            </DropdownItem>,\n        ];\n\n        return (\n            <Dropdown\n                id=\"avatar-dropdown\"\n                onSelect={this.onSelect}\n                toggle={\n                    <DropdownToggle onToggle={this.onToggle} aria-label=\"User Menu\" id=\"avatar-toggle\">\n                        <Avatar src={avatarImg} alt=\"User\" />\n                    </DropdownToggle>\n                }\n                isOpen={this.state.isOpen}\n                isPlain={true}\n                dropdownItems={dropdownItems}\n            />\n        );\n    }\n\n    protected initializeState(): AvatarDropdownState {\n        return {\n            isOpen: false\n        };\n    }\n\n    private onSelect = (event: any): void => {\n        this.setSingleState(\"isOpen\", !this.state.isOpen);\n        // @ts-ignore\n        document.getElementById(\"avatar-toggle\").focus();\n    };\n\n    private onToggle = (): void => {\n        this.setSingleState(\"isOpen\", !this.state.isOpen);\n    };\n\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAB6VBMVEUAAAD///////+/v7/////////////////////////////////////////////////////////////////////Z2dn////b29v////////////////////////////////////////////////////////////////////MzMzNzc3////////////W1tb////W1tb////////Ly8v////////W1tb////////////////////////////////////////////////Nzc3AwMD////////////////////////////////////////////////AwMDIyMj///////////+1tbW3t7f///////////+7u7vCwsL///++vr6/v7////+pqamqqqqrq6usrKyurq6vrq+wsLCxsLCxsbGysrKzs7O1tLS1tbW3t7e4uLi5ubm6urq7u7u8vLy9vb2+vr6/v7/AwMDCwsLDw8PExMTFxcXGxsbIyMjJycnLy8vMzMzOzs7Qz8/Q0NDT09PY2NjZ2dnc3Nze3t7f39/g4ODh4eHi4uLj4+Pl5eXm5ubp6enq6uru7u7v7+/w8PDx8fHy8vLz8vPz8/P08/P09PT29vb4+Pj6+vr7+/v8/Pz9/f3+/v7///8xQE+pAAAAYXRSTlMAAQIEBgcODxARHiAiJSYnKDs9PkBDRUZGR0lKT1BWWFtdXmNkZ2xub3R2d4eIioqOj5GSkpOUlJWio7i5u7zExtfY2tve3+Dh4uPk5ejp7O3v8PHy8/j4+vv8/f39/v7+w68SqgAAAAFiS0dEorDd34wAAAHpSURBVBgZdcEHQ1JRGAbgD6Rpe9reWFlZlu29t5ZRQotTeFL0gnxhGaVFNjCaJjYkwPeXdsF7Dpfh81AJx7w17oYG9+q5DpqCc8Xh67BcO1TnpEqOjadR4tR6B5VZcBIVTsynEus8qOLWWrLZ6kdV9+tJ24Kp+DeTZYkPysSPD0Pvv/2D5l1EBbOuQvnVJ5+EmfuS0C7PoLyDUP70yM5ezvsIrYlMc7xQnkkZ5kkjUNpriegAlO9SdrElDm0fkasFyjspe9gSzUFpnUaroL2W0mAlDa2OGqG9ldJgJQNtJx2HlpQyyJZXKDpKF6FlDCl7edInFJ0nD4q+ShnkgoEcitrIB5tEp+yOMPNgGjY+8sBu7I3RFRr8nINdG11AmewEypyjY7DLjv9Opf6Op3OwOUKNULJf4s/Z8nRgOANlB62EZfQFl+j/CcsycrWgYDTKZaIjKGh1ETUjLxvjCv1Z5DUR0ex2mBJcRQKm9loyNcMU4ypewrSH8mZeAVJc1RhwaToVLPZimE2R7hCXSsK7kCwb/HFmjgSEwZbw40BXiHnIv4m0+n5mDgphsPJICBHmmJtsdj9g7hDCYKVDCBF8uItKLL/JASEMVoJCiBtLqYxz/x0hDFZC4vZeJ1Wq2X72LlvundlWQ9p/X4kh1YBMq44AAAAASUVORK5CYII=\"","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from \"react\";\nimport \"./invalidContentModal.css\";\nimport {\n    Button,\n    DataList,\n    DataListCell,\n    DataListItemCells,\n    DataListItemRow,\n    Modal,\n    ModalVariant\n} from \"@patternfly/react-core\";\nimport { PureComponent, PureComponentProps, PureComponentState } from \"../baseComponent\";\nimport { ApiError } from \"src/models/apiError.model\";\nimport { ExclamationCircleIcon } from \"@patternfly/react-icons\";\n\n\n/**\n * Properties\n */\nexport interface InvalidContentModalProps extends PureComponentProps {\n    error: ApiError|null;\n    isOpen: boolean;\n    onClose: () => void;\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface InvalidContentModalState extends PureComponentState {\n}\n\n/**\n * Models the \"invalid content\" modal.  This is shown when the user tries to upload content\n * that is not valid.\n */\nexport class InvalidContentModal extends PureComponent<InvalidContentModalProps, InvalidContentModalState> {\n\n    constructor(props: Readonly<InvalidContentModalProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <Modal\n                title=\"Invalid Content Error\"\n                variant={ModalVariant.large}\n                isOpen={this.props.isOpen}\n                onClose={this.props.onClose}\n                className=\"edit-artifact-metaData pf-m-redhat-font\"\n                actions={[\n                    <Button key=\"close\" variant=\"link\" data-testid=\"modal-btn-close\" onClick={this.props.onClose}>Close</Button>\n                ]}\n            >\n                <p className=\"modal-desc\" >The content you attempted to upload violated one or more of the established content rules.</p>\n                { this.errorDetail() }\n            </Modal>\n        );\n    }\n\n    protected initializeState(): InvalidContentModalState {\n        return {};\n    }\n\n    private errorDetail(): React.ReactElement {\n        if (this.props.error) {\n            if (this.props.error.name === \"RuleViolationException\" && this.props.error.causes != null && this.props.error.causes.length > 0 ) {\n                return (\n                    <DataList aria-label=\"Error causes\" className=\"error-causes\" >\n                        {\n                            this.props.error.causes.map( (cause, idx) =>\n                                <DataListItemRow key={\"\"+idx} className=\"error-causes-item\">\n                                    <DataListItemCells\n                                        dataListCells={[\n                                            <DataListCell key=\"error icon\" className=\"type-icon-cell\">\n                                                <ExclamationCircleIcon/>\n                                            </DataListCell>,\n                                            <DataListCell key=\"main content\">\n                                                <div className=\"error-causes-item-title\">\n                                                    <span>{cause.context != null ? (<b>{cause.context}</b>) : cause.description}</span>\n                                                </div>\n                                                <div className=\"error-causes-item-description\">{cause.context != null ? cause.description : cause.context }</div>\n                                            </DataListCell>\n                                        ]}\n                                    />\n                                </DataListItemRow>\n                            )\n                        }\n                    </DataList>\n                );\n            } else if (this.props.error.detail) {\n                return (\n                    <pre className=\"error-detail\">\n                        {this.props.error.detail}\n                    </pre>\n                );\n            }\n        }\n        return <p/>;\n    }\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from \"react\";\nimport \"./pleaseWaitModal.css\";\nimport { Modal, Spinner } from \"@patternfly/react-core\";\nimport { PureComponent, PureComponentProps, PureComponentState } from \"../baseComponent\";\n\n\n/**\n * Properties\n */\nexport interface PleaseWaitModalProps extends PureComponentProps {\n    message: string;\n    isOpen: boolean;\n}\n\n/**\n * State\n */\n// tslint:disable-next-line:no-empty-interface\nexport interface PleaseWaitModalState extends PureComponentState {\n}\n\n/**\n * Models the \"please wait\" modal.  This is shown when the user performs an asynchronous operation.\n */\nexport class PleaseWaitModal extends PureComponent<PleaseWaitModalProps, PleaseWaitModalState> {\n\n    constructor(props: Readonly<PleaseWaitModalProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        return (\n            <Modal\n                title=\"Please Wait\"\n                variant=\"small\"\n                isOpen={this.props.isOpen}\n                header={<a href=\"#\" />}\n                showClose={false}\n                className=\"please-wait pf-m-redhat-font\"\n                aria-label=\"please-wait-modal\"\n            >\n                <Spinner size=\"md\" className=\"spinner\" />\n                <span className=\"message\">{ this.props.message }</span>\n            </Modal>\n        );\n    }\n\n    protected initializeState(): PleaseWaitModalState {\n        return {};\n    }\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { Dropdown, DropdownItem, DropdownToggle } from \"@patternfly/react-core\";\nimport { CaretDownIcon } from \"@patternfly/react-icons\";\nimport { PureComponent, PureComponentProps, PureComponentState } from \"../baseComponent\";\n\n\n/**\n * Properties\n */\nexport interface CompatibilityDropdownProps extends PureComponentProps {\n    value: string;\n    onSelect: (newValue: string) => void;\n}\n\n/**\n * State\n */\nexport interface CompatibilityDropdownState extends PureComponentState {\n    isOpen: boolean;\n}\n\n\n/**\n * Models the content of the Artifact Info tab.\n */\nexport class CompatibilityDropdown extends PureComponent<CompatibilityDropdownProps, CompatibilityDropdownState> {\n\n    constructor(props: Readonly<CompatibilityDropdownProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        const dropdownItems = [\n            <DropdownItem key=\"NONE\"\n                          tooltip=\"No compatibility checking should be performed\"\n                          data-testid=\"rules-compatibility-config-none\"\n                          id=\"NONE\">None</DropdownItem>,\n            <DropdownItem key=\"BACKWARD\"\n                          tooltip=\"Clients using the new artifact can read data written using the most recently added artifact\"\n                          data-testid=\"rules-compatibility-config-backward\"\n                          id=\"BACKWARD\">Backward</DropdownItem>,\n            <DropdownItem key=\"BACKWARD_TRANSITIVE\"\n                          tooltip=\"Clients using the new artifact can read data written using all previously added artifacts\"\n                          data-testid=\"rules-compatibility-config-backwardTrans\"\n                          id=\"BACKWARD_TRANSITIVE\">Backward Transitive</DropdownItem>,\n            <DropdownItem key=\"FORWARD\"\n                          tooltip=\"Clients using the most recently added artifact can read data written using the new artifact\"\n                          data-testid=\"rules-compatibility-config-forward\"\n                          id=\"FORWARD\">Forward</DropdownItem>,\n            <DropdownItem key=\"FORWARD_TRANSITIVE\"\n                          tooltip=\"Clients using all previously added artifacts can read data written using the new artifact\"\n                          data-testid=\"rules-compatibility-config-forwardTrans\"\n                          id=\"FORWARD_TRANSITIVE\">Forward Transitive</DropdownItem>,\n            <DropdownItem key=\"FULL\"\n                          tooltip=\"The new artifact is forward and backward compatible with the most recently added artifact\"\n                          data-testid=\"rules-compatibility-config-full\"\n                          id=\"FULL\">Full</DropdownItem>,\n            <DropdownItem key=\"FULL_TRANSITIVE\"\n                          tooltip=\"The new artifact is forward and backward compatible with all previously added artifacts\"\n                          data-testid=\"rules-compatibility-config-fullTrans\"\n                          id=\"FULL_TRANSITIVE\">Full Transitive</DropdownItem>,\n        ];\n        return (\n            <Dropdown\n                onSelect={this.onSelect}\n                toggle={\n                    <DropdownToggle id=\"toggle-id\"\n                                    data-testid=\"rules-compatibility-config-toggle\"\n                                    onToggle={this.onToggle} toggleIndicator={CaretDownIcon}>\n                        {this.displayValue()}\n                    </DropdownToggle>\n                }\n                isOpen={this.state.isOpen}\n                dropdownItems={dropdownItems}\n            />\n        );\n    }\n\n    protected initializeState(): CompatibilityDropdownState {\n        return {\n            isOpen: false\n        };\n    }\n\n    private onToggle = (isOpen: boolean): void => {\n        this.setSingleState(\"isOpen\", isOpen);\n    };\n\n    private onSelect = (event: any): void => {\n        const newValue: string = event && event.currentTarget && event.currentTarget.id ? event.currentTarget.id : \"\";\n        this.props.onSelect(newValue);\n        this.onToggle(false);\n    };\n\n    private displayValue(): string {\n        switch (this.props.value) {\n            case \"NONE\":\n                return \"None\";\n            case \"BACKWARD\":\n                return \"Backward\";\n            case \"BACKWARD_TRANSITIVE\":\n                return \"Backward Transitive\";\n            case \"FORWARD\":\n                return \"Forward\";\n            case \"FORWARD_TRANSITIVE\":\n                return \"Forward Transitive\";\n            case \"FULL\":\n                return \"Full\";\n            case \"FULL_TRANSITIVE\":\n                return \"Full Transitive\";\n        }\n        return this.props.value;\n    }\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { Dropdown, DropdownItem, DropdownToggle } from \"@patternfly/react-core\";\nimport { CaretDownIcon } from \"@patternfly/react-icons\";\nimport { PureComponent, PureComponentProps, PureComponentState } from \"../baseComponent\";\n\n\n/**\n * Properties\n */\nexport interface ValidityDropdownProps extends PureComponentProps {\n    value: string;\n    onSelect: (newValue: string) => void;\n}\n\n/**\n * State\n */\nexport interface ValidityDropdownState extends PureComponentState {\n    isOpen: boolean;\n}\n\n\n/**\n * Models the content of the Artifact Info tab.\n */\nexport class ValidityDropdown extends PureComponent<ValidityDropdownProps, ValidityDropdownState> {\n\n    constructor(props: Readonly<ValidityDropdownProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        const dropdownItems = [\n            <DropdownItem key=\"FULL\"\n                          tooltip=\"Syntactic and semantic validation\"\n                          id=\"FULL\"\n                          data-testid=\"rules-validity-config-full\">Full</DropdownItem>,\n            <DropdownItem key=\"SYNTAX_ONLY\"\n                          tooltip=\"Only syntactic validation\"\n                          id=\"SYNTAX_ONLY\"\n                          data-testid=\"rules-validity-config-syntaxOnly\">Syntax Only</DropdownItem>,\n            <DropdownItem key=\"NONE\"\n                          tooltip=\"No validation\"\n                          id=\"NONE\"\n                          data-testid=\"rules-validity-config-none\">None</DropdownItem>,\n        ];\n        return (\n            <Dropdown\n                onSelect={this.onSelect}\n                toggle={\n                    <DropdownToggle id=\"toggle-id\"\n                                    data-testid=\"rules-validity-config-toggle\"\n                                    onToggle={this.onToggle} toggleIndicator={CaretDownIcon}>\n                        {this.displayValue()}\n                    </DropdownToggle>\n                }\n                isOpen={this.state.isOpen}\n                dropdownItems={dropdownItems}\n            />\n        );\n    }\n\n    protected initializeState(): ValidityDropdownState {\n        return {\n            isOpen: false\n        };\n    }\n\n    private onToggle = (isOpen: boolean): void => {\n        this.setSingleState(\"isOpen\", isOpen);\n    };\n\n    private onSelect = (event: any): void => {\n        const newValue: string = event && event.currentTarget && event.currentTarget.id ? event.currentTarget.id : \"\";\n        this.props.onSelect(newValue);\n        this.onToggle(false);\n    };\n\n    private displayValue(): string {\n        switch (this.props.value) {\n            case \"FULL\":\n                return \"Full\";\n            case \"SYNTAX_ONLY\":\n                return \"Syntax Only\";\n            case \"NONE\":\n                return \"None\";\n        }\n        return this.props.value;\n    }\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport \"./ruleList.css\";\nimport {\n    Button,\n    DataList,\n    DataListAction,\n    DataListCell,\n    DataListItem,\n    DataListItemCells,\n    DataListItemRow\n} from \"@patternfly/react-core\";\nimport { PureComponent, PureComponentProps, PureComponentState } from \"../baseComponent\";\nimport { CodeBranchIcon, OkIcon, TrashIcon } from \"@patternfly/react-icons\";\nimport { CompatibilityDropdown } from \"./compatibility-dropdown\";\nimport { ValidityDropdown } from \"./validity-dropdown\";\nimport { IfFeature } from \"../common/ifFeature\";\nimport { IfAuth } from \"../common\";\nimport { Rule } from \"../../../models\";\n\n\nexport interface RuleListProps extends PureComponentProps {\n    onEnableRule: (ruleType: string) => void;\n    onDisableRule: (ruleType: string) => void;\n    onConfigureRule: (ruleType: string, config: string) => void;\n    rules: Rule[];\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface RuleListState extends PureComponentState {\n}\n\n\nexport class RuleList extends PureComponent<RuleListProps, RuleListState> {\n\n    constructor(props: Readonly<RuleListProps>) {\n        super(props);\n    }\n\n    public render(): React.ReactElement {\n        let validityRuleActions: React.ReactElement = (\n            <Button variant=\"secondary\"\n                    key=\"enable-action\"\n                    data-testid=\"rules-validity-enable\"\n                    onClick={this.doEnableRule(\"VALIDITY\")}>Enable</Button>\n        );\n        if (this.isRuleEnabled(\"VALIDITY\")) {\n            validityRuleActions = (\n                <React.Fragment>\n                    <ValidityDropdown value={this.getRuleConfig(\"VALIDITY\")}\n                                      onSelect={this.doConfigureRule(\"VALIDITY\")} />\n                    <Button variant=\"plain\"\n                            key=\"delete-action\"\n                            data-testid=\"rules-validity-disable\"\n                            title=\"Disable the validity rule\"\n                            onClick={this.doDisableRule(\"VALIDITY\")}><TrashIcon /></Button>\n                </React.Fragment>\n            );\n        }\n        let compatibilityRuleActions: React.ReactElement = (\n            <Button variant=\"secondary\"\n                    key=\"enable-action\"\n                    data-testid=\"rules-compatibility-enable\"\n                    onClick={this.doEnableRule(\"COMPATIBILITY\")}>Enable</Button>\n        );\n        if (this.isRuleEnabled(\"COMPATIBILITY\")) {\n            compatibilityRuleActions = (\n                <React.Fragment>\n                    <CompatibilityDropdown value={this.getRuleConfig(\"COMPATIBILITY\")}\n                                           onSelect={this.doConfigureRule(\"COMPATIBILITY\")} />\n                    <Button variant=\"plain\"\n                            key=\"delete-action\"\n                            data-testid=\"rules-compatibility-disable\"\n                            title=\"Disable the compatibility rule\"\n                            onClick={this.doDisableRule(\"COMPATIBILITY\")}><TrashIcon /></Button>\n                </React.Fragment>\n            );\n        }\n\n        return (\n            <DataList aria-label=\"Artifact rules\">\n                <DataListItem aria-labelledby=\"validity-rule-name\">\n                    <DataListItemRow className={this.getRuleRowClasses(\"VALIDITY\")}>\n                        <DataListItemCells dataListCells={[\n                            <DataListCell key=\"rule-name\">\n                                <OkIcon className=\"rule-icon\" />\n                                <span id=\"validity-rule-name\">Validity rule</span>\n                            </DataListCell>,\n                            <DataListCell key=\"rule-description\">Ensure that content is <em>valid</em> when updating this artifact.</DataListCell>\n                        ]}\n                        />\n                        <IfAuth isDeveloper={true}>\n                            <IfFeature feature=\"readOnly\" isNot={true}>\n                                <DataListAction\n                                    aria-labelledby=\"selectable-action-item1 selectable-action-action1\"\n                                    id=\"selectable-action-action1\"\n                                    aria-label=\"Actions\"\n                                >\n                                    { validityRuleActions}\n                                </DataListAction>\n                            </IfFeature>\n                        </IfAuth>\n                    </DataListItemRow>\n                </DataListItem>\n                <DataListItem aria-labelledby=\"compatibility-rule-name\">\n                    <DataListItemRow className={this.getRuleRowClasses(\"COMPATIBILITY\")}>\n                        <DataListItemCells dataListCells={[\n                            <DataListCell key=\"rule-name\">\n                                <CodeBranchIcon className=\"rule-icon\" />\n                                <span id=\"compatibility-rule-name\">Compatibility rule</span>\n                            </DataListCell>,\n                            <DataListCell key=\"rule-description\">Enforce a compatibility level when updating this artifact (for example, Backwards Compatibility).</DataListCell>\n                        ]}\n                        />\n                        <IfAuth isDeveloper={true}>\n                            <IfFeature feature=\"readOnly\" isNot={true}>\n                                <DataListAction\n                                    aria-labelledby=\"selectable-action-item1 selectable-action-action1\"\n                                    id=\"selectable-action-action2\"\n                                    aria-label=\"Actions\"\n                                >\n                                    { compatibilityRuleActions }\n                                </DataListAction>\n                            </IfFeature>\n                        </IfAuth>\n                    </DataListItemRow>\n                </DataListItem>\n            </DataList>\n        );\n    }\n\n    protected initializeState(): RuleListState {\n        return {};\n    }\n\n    private isRuleEnabled(ruleType: string): boolean {\n        return this.props.rules.filter(rule => rule.type === ruleType).length > 0;\n    }\n\n    private getRuleRowClasses(ruleType: string): string {\n        const classes: string[] = [ \"rule\" ];\n        if (ruleType === \"COMPATIBILITY\") {\n            classes.push(\"compatibility-rule\");\n        } else {\n            classes.push(\"validity-rule\");\n        }\n        if (!this.isRuleEnabled(ruleType)) {\n            classes.push(\"disabled-state-text\");\n        }\n        return classes.join(' ');\n    }\n\n    private getRuleConfig(ruleType: string): string {\n        const frules: Rule[] = this.props.rules.filter(r => r.type === ruleType);\n        if (frules.length === 1) {\n            return frules[0].config;\n        } else {\n            return \"UNKNOWN\";\n        }\n    };\n\n    private doEnableRule = (ruleType: string): (() => void) => {\n        return () => {\n            this.props.onEnableRule(ruleType);\n        };\n    };\n\n    private doDisableRule = (ruleType: string): (() => void) => {\n        return () => {\n            this.props.onDisableRule(ruleType);\n        };\n    };\n\n    private doConfigureRule = (ruleType: string): ((config: string) => void) => {\n        return (config: string) => {\n            this.props.onConfigureRule(ruleType, config);\n        };\n    };\n\n}\n","/**\n * @license\n * Copyright 2021 Red Hat\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n    Card,\n    CardBody,\n    CardTitle,\n    ClipboardCopy,\n    EmptyState,\n    EmptyStateBody,\n    EmptyStateIcon,\n    EmptyStateSecondaryActions,\n    EmptyStateVariant,\n    Title,\n} from \"@patternfly/react-core\";\nimport ArrowRightIcon from \"@patternfly/react-icons/dist/js/icons/arrow-icon\";\nimport WrenchIcon from \"@patternfly/react-icons/dist/js/icons/wrench-icon\";\n\nexport type EmptyStateProps = {\n  artifactName: string;\n  basename: string;\n  registryId: string;\n};\n\nexport const SchemaEmptyState: React.FC<EmptyStateProps> = ({\n  artifactName,\n  basename,\n  registryId,\n}: EmptyStateProps) => {\n  return (\n    <Card>\n      <CardTitle>Topic schemas</CardTitle>\n      <CardBody>\n        <EmptyState variant={EmptyStateVariant.large}>\n          <EmptyStateIcon icon={WrenchIcon} />\n          <Title headingLevel=\"h4\" size=\"lg\">\n            No matching schema exists for the selected instance\n          </Title>\n          <EmptyStateBody>\n            The system couldn't find a matching schema for this topic in the\n            selected Service Registry instance. Please make sure to use the\n            following naming format for the artifact ID:\n          </EmptyStateBody>\n          <EmptyStateSecondaryActions>\n            <ClipboardCopy isReadOnly hoverTip=\"Copy\" clickTip=\"Copied\">\n              {artifactName + \"-value\"}\n            </ClipboardCopy>\n          </EmptyStateSecondaryActions>\n          <EmptyStateSecondaryActions>\n            <ClipboardCopy isReadOnly hoverTip=\"Copy\" clickTip=\"Copied\">\n              {artifactName + \"-key\"}\n            </ClipboardCopy>\n          </EmptyStateSecondaryActions>\n          <EmptyStateSecondaryActions>\n            <Link to={`${basename}/t/${registryId}`}>\n              Go to Service Registry instance <ArrowRightIcon />\n            </Link>\n          </EmptyStateSecondaryActions>\n        </EmptyState>\n      </CardBody>\n    </Card>\n  );\n};\n","/**\n * @license\n * Copyright 2021 Red Hat\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n    ClipboardCopyButton,\n    CodeBlock,\n    CodeBlockAction,\n    CodeBlockCode,\n    DescriptionListDescription,\n    ExpandableSection,\n    Grid,\n    GridItem,\n} from \"@patternfly/react-core\";\nimport { PureComponent, PureComponentState } from \"../baseComponent\";\nimport CheckCircleIcon from \"@patternfly/react-icons/dist/js/icons/check-circle-icon\";\nimport { Services } from \"src/services\";\n\nexport type MatchingSchemaProps = {\n  topicName: string;\n  keySchema: boolean;\n  routePath: string;\n};\n\nexport interface MatchingSchemaSate extends PureComponentState {\n  schemaContentData: any\n  copySchemaContent: boolean;\n}\n\nexport class MatchingSchemaCard extends PureComponent<MatchingSchemaProps, MatchingSchemaSate> {\n  clipboardCopyFunc: (event: any, text: any) => void;\n  onClick: (event: any, text: any) => void;\n  timer: number;\n  constructor(props: Readonly<MatchingSchemaProps>) {\n    super(props);\n\n    this.timer = 0;\n\n    this.clipboardCopyFunc = (event, text) => {\n      const clipboard = event.currentTarget.parentElement;\n      const el = document.createElement('textarea');\n      el.value = text.toString();\n      clipboard.appendChild(el);\n      el.select();\n      clipboard.removeChild(el);\n    };\n\n    this.onClick = (event, text) => {\n      if (this.timer) {\n        window.clearTimeout(this.timer);\n        this.setState({ copySchemaContent: false });\n      }\n      this.clipboardCopyFunc(event, text);\n      this.setState({ copySchemaContent: true }, () => {\n        this.timer = window.setTimeout(() => {\n          this.setState({ copySchemaContent: false });\n          this.timer = 0;\n        }, 1000);\n      });\n    };\n  }\n\n  protected initializeState() {\n    return {\n      schemaContentData: undefined,\n      copySchemaContent: false\n    };\n  }\n\n  componentDidMount() {\n    this.createLoaders();\n  }\n\n  // @ts-ignore\n  protected createLoaders(): Promise[] | null {\n    const { topicName } = this.props;\n\n    const artifactId1 = topicName + \"-key\";\n    const artifactId2 = topicName + \"-value\";\n\n    if (this.props.keySchema) {\n      return [\n        Services.getGroupsService()\n          .getLatestArtifact(\"default\", artifactId1).then((response => this.setSingleState(\"schemaContentData\", response)))\n      ]\n    }\n    else {\n      return [\n        Services.getGroupsService()\n          .getLatestArtifact(\"default\", artifactId2).then((response => this.setSingleState(\"schemaContentData\", response)))\n      ]\n    }\n  }\n\n  public render(): React.ReactElement {\n    const { keySchema, topicName, routePath } = this.props;\n    const postfix = keySchema ? \"-key\" : \"-value\";\n\n    return (\n      <DescriptionListDescription>\n        <Grid hasGutter span={2}>\n          <GridItem rowSpan={2}>\n            <CheckCircleIcon color=\"#38812f\" /> {topicName + postfix}\n          </GridItem>\n          <GridItem>\n            <Link to={routePath}>\n              View details\n            </Link>\n          </GridItem>\n        </Grid>\n        <ExpandableSection toggleText={\"Display schema content\"} displaySize=\"large\" isWidthLimited className={\"pf-c-change-background-color\"}>\n          <CodeBlock actions={<CodeBlockAction>\n            <ClipboardCopyButton id=\"copy-button\" aria-label=\"Copy to clipboard\" textId=\"code-content\" onClick={e => this.onClick(e, this.state.schemaContentData)} exitDelay={600}\n              maxWidth=\"110px\"\n              variant=\"plain\" >\n              {this.state.copySchemaContent ? 'Successfully copied to clipboard!' : 'Copy to clipboard'}\n            </ClipboardCopyButton>\n          </CodeBlockAction>}>\n            <CodeBlockCode>\n              {this.state.schemaContentData}\n            </CodeBlockCode>\n          </CodeBlock>\n        </ExpandableSection>\n      </DescriptionListDescription >\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2021 Red Hat\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n    Alert,\n    AlertVariant,\n    ClipboardCopy,\n    DescriptionListDescription,\n    Popover,\n    Split,\n    SplitItem,\n    Stack,\n    StackItem,\n} from \"@patternfly/react-core\";\nimport ArrowRightIcon from \"@patternfly/react-icons/dist/js/icons/arrow-icon\";\nimport HelpIcon from \"@patternfly/react-icons/dist/js/icons/help-icon\";\n\nexport type NoMatchingSchemaProps = {\n  basename: string;\n  registryId: string;\n  artifactId: string;\n  title: string;\n};\n\nexport const NoMatchingSchema: React.FC<NoMatchingSchemaProps> = ({\n  basename,\n  registryId,\n  artifactId,\n  title,\n}) => {\n  return (\n    <DescriptionListDescription>\n      <Split hasGutter>\n        <SplitItem>\n          <Alert\n            className=\"pf-c-alert pf-m-info pf-m-plain pf-m-inline\"\n            variant={AlertVariant.info}\n            title=\"No matching schema\"\n          />\n        </SplitItem>\n        <SplitItem>\n          <Popover\n            hasAutoWidth\n            aria-label=\"No schema popover\"\n            headerContent={title}\n            bodyContent={\n              <Stack hasGutter>\n                <StackItem>\n                  The system couldn't find a matching schema for this topic in\n                  the selected Service Registry instance. Please make sure to\n                  use the following naming format for the Artifact ID:\n                </StackItem>\n                <StackItem>\n                  <ClipboardCopy isReadOnly hoverTip=\"Copy\" clickTip=\"Copied\">\n                    {artifactId}\n                  </ClipboardCopy>\n                </StackItem>\n                <StackItem>\n                  <Link to={`${basename}/t/${registryId}`}>\n                    Go to Service Registry instance <ArrowRightIcon />\n                  </Link>\n                </StackItem>\n              </Stack>\n            }\n          >\n            <HelpIcon />\n          </Popover>\n        </SplitItem>\n      </Split>\n    </DescriptionListDescription>\n  );\n};\n","/**\n * @license\n * Copyright 2021 Red Hat\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { Card, CardBody, CardTitle, DescriptionList, DescriptionListTerm, } from \"@patternfly/react-core\";\nimport { MatchingSchemaCard } from \"./matchingSchemaCard\";\nimport { NoMatchingSchema } from \"./noMatchingSchema\";\n\nexport type SchemaCardProps = {\n  hasValueSchema: boolean | undefined;\n  hasKeySchema: boolean | undefined;\n  topicName: string;\n  groupId: string;\n  version: string;\n  basename: string;\n  registryId: string;\n};\n\nexport const SchemaCard: React.FC<SchemaCardProps> = ({\n  hasKeySchema,\n  hasValueSchema,\n  topicName,\n  version,\n  basename,\n  registryId,\n}) => {\n  return (\n    <Card>\n      <CardTitle component=\"h2\">Topic schemas</CardTitle>\n      <CardBody>\n        <DescriptionList\n          isHorizontal\n          isAutoColumnWidths\n          columnModifier={{ lg: \"2Col\" }}\n        >\n          <DescriptionListTerm>Value schema artifact ID</DescriptionListTerm>\n          {hasValueSchema ? (\n            <MatchingSchemaCard\n              topicName={topicName}\n              keySchema={false}\n              routePath={`${basename}/t/${registryId}/artifacts/default/${topicName}-value/versions/${version}`}\n            />\n          ) : (\n            <NoMatchingSchema\n              title=\"Value schema\"\n              artifactId={`${topicName}-value`}\n              basename={basename}\n              registryId={registryId}\n            />\n          )}\n          <DescriptionListTerm>Key schema artifact ID</DescriptionListTerm>\n          {hasKeySchema ? (\n            <MatchingSchemaCard\n              topicName={topicName}\n              keySchema={true}\n              routePath={`${basename}/t/${registryId}/artifacts/default/${topicName}-key/versions/${version}`}\n            />\n          ) : (\n            <NoMatchingSchema\n              title=\"Key schema\"\n              artifactId={`${topicName}-key`}\n              basename={basename}\n              registryId={registryId}\n            />\n          )}\n        </DescriptionList>\n      </CardBody>\n    </Card>\n  );\n};\n","/**\n * @license\n * Copyright 2021 Red Hat\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport {\n    Card,\n    CardBody,\n    CardTitle,\n    EmptyState,\n    EmptyStateBody,\n    EmptyStateIcon,\n    EmptyStateVariant,\n    Title,\n} from \"@patternfly/react-core\";\nimport LockIcon from \"@patternfly/react-icons/dist/js/icons/lock-icon\";\n\nexport const PermissionDenied: React.FC = () => {\n  return (\n    <Card>\n      <CardTitle>Topic schemas</CardTitle>\n      <CardBody>\n        <EmptyState variant={EmptyStateVariant.large}>\n          <EmptyStateIcon icon={LockIcon} />\n          <Title headingLevel=\"h4\" size=\"lg\">\n            Access permissions needed\n          </Title>\n          <EmptyStateBody>\n            You don’t have access to the selected Service Registry instance. To\n            get access, contact your organization administrators.\n          </EmptyStateBody>\n        </EmptyState>\n      </CardBody>\n    </Card>\n  );\n};\n","/**\n * @license\n * Copyright 2021 Red Hat\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport { Bullseye, Spinner } from \"@patternfly/react-core\";\nimport { SchemaCard, SchemaCardProps } from \"./schemaCard\";\nimport { Services } from \"src/services\";\nimport { SchemaEmptyState } from \"./emptyState\";\nimport { PermissionDenied } from \"./permissionDenied\";\nimport { PureComponent, PureComponentProps, PureComponentState, } from \"../baseComponent\";\n\n/**\n * Properties\n */\n\nexport interface SchemaMappingProps\n  extends PureComponentProps,\n    SchemaCardProps {\n  registryId: string;\n}\n\n/**\n * State\n */\nexport interface SchemaMappingState extends PureComponentState {\n  hasKeySchema: boolean | undefined;\n  hasValueSchema: boolean | undefined;\n  hasPermissionDenied: boolean;\n}\n\nexport class SchemaMapping extends PureComponent<\n  SchemaMappingProps,\n  SchemaMappingState\n> {\n  constructor(props: Readonly<SchemaMappingProps>) {\n    super(props);\n  }\n\n  public render(): React.ReactElement {\n    const { hasKeySchema, hasValueSchema, hasPermissionDenied } = this.state;\n    const { topicName, groupId, version, basename, registryId } = this.props;\n\n    if (hasKeySchema === undefined && hasValueSchema === undefined) {\n      return (\n        <Bullseye>\n          <Spinner />\n        </Bullseye>\n      );\n    }\n    if (hasPermissionDenied) {\n      return <PermissionDenied />;\n    }\n\n    if (hasKeySchema || hasValueSchema) {\n      return (\n        <SchemaCard\n          hasKeySchema={hasKeySchema}\n          hasValueSchema={hasValueSchema}\n          topicName={topicName}\n          groupId={groupId}\n          version={version}\n          basename={basename}\n          registryId={registryId}\n        />\n      );\n    } else {\n      return (\n        <SchemaEmptyState\n          artifactName={topicName}\n          basename={basename}\n          registryId={registryId}\n        />\n      );\n    }\n  }\n\n  protected initializeState(): SchemaMappingState {\n    return {\n      hasKeySchema: undefined,\n      hasValueSchema: undefined,\n      hasPermissionDenied: false,\n    };\n  }\n\n  componentWillMount() {\n    this.getArtifactsMetadata();\n  }\n\n  componentDidUpdate(prevProps: SchemaMappingProps) {\n    if (prevProps.registryId !== this.props.registryId) {\n      this.getArtifactsMetadata();\n    }\n  }\n\n  // @ts-ignore\n  private getArtifactsMetadata(): Promise[] | null {\n    const { topicName, groupId, version } = this.props;\n\n    Services.getLoggerService().info(\n      \"Loading data for artifact metadata: \",\n      topicName\n    );\n\n    const artifactId1 = topicName + \"-key\";\n    const artifactId2 = topicName + \"-value\";\n\n    return [\n      Services.getGroupsService()\n        .getArtifactMetaData(groupId, artifactId1, version)\n        .then(() => {\n          this.setSingleState(\"hasKeySchema\", true);\n        })\n        .catch((e: any) => {\n          if (e.error_code === 404 || e.response?.status === 404) {\n            this.setSingleState(\"hasKeySchema\", false);\n          } else if (e.response?.status === 403) {\n            this.setSingleState(\"hasKeySchema\", false);\n            this.setSingleState(\"hasPermissionDenied\", true);\n          }\n        }),\n      Services.getGroupsService()\n        .getArtifactMetaData(groupId, artifactId2, version)\n        .then(() => {\n          this.setSingleState(\"hasValueSchema\", true);\n        })\n        .catch((e: any) => {\n          if (e.error_code === 404 || e.response?.status === 404) {\n            this.setSingleState(\"hasValueSchema\", false);\n          } else if (e.response?.status === 403) {\n            this.setSingleState(\"hasValueSchema\", false);\n            this.setSingleState(\"hasPermissionDenied\", true);\n          }\n        }),\n    ];\n  }\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ConfigType, Services } from \"../../services\";\nimport { PureComponent } from \"../components\";\n\n/**\n * Component properties shared by all federated pages.\n */\nexport interface FederatedComponentProps {\n    config: ConfigType | (() => ConfigType);\n    history: any;\n}\n\nexport class FederatedUtils {\n\n    public static updateConfiguration(props: FederatedComponentProps): void {\n        let c: ConfigType;\n        if (typeof props.config === \"object\") {\n            c = props.config as ConfigType;\n        } else {\n            c = props.config();\n        }\n        Services.getLoggerService().info(\"[FederatedUtils] Updating config using: %o\", c);\n        Services.getConfigService().updateConfig(c);\n        PureComponent.setHistory(props.history);\n    }\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// tslint:disable-next-line:interface-name\nexport class ContentTypes {\n\n    public static APPLICATION_JSON: string = \"application/json\";\n    public static APPLICATION_YAML: string = \"application/x-yaml\";\n    public static APPLICATION_XML: string = \"application/xml\";\n    public static APPLICATION_PROTOBUF: string = \"application/x-protobuf\";\n    public static APPLICATION_GRAPHQL: string = \"application/graphql\";\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nexport class RoleTypes {\n    public static READ_ONLY: string = \"READ_ONLY\";\n    public static DEVELOPER: string = \"DEVELOPER\";\n    public static ADMIN: string = \"ADMIN\";\n}\n\n\n// tslint:disable-next-line:interface-name\nexport interface RoleMapping {\n\n    principalId: string;\n    role: string;\n    principalName: string;\n\n}\n","/**\n * @license\n * Copyright 2022 Red Hat\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum AlertVariant {\n    success = \"success\",\n    danger = \"danger\",\n    warning = \"warning\",\n    info = \"info\",\n    default = \"default\"\n}\n\nexport type AlertProps = {\n    /**\n     * Unique key\n     */\n    id?: string;\n    /**\n     * Flag to automatically call `onDismiss` after `dismissDelay` runs out.\n     */\n    autoDismiss?: boolean;\n    /**\n     * Flag to show/hide notification close button.\n     */\n    dismissable?: boolean;\n    /**\n     * Alert variant\n     */\n    variant: AlertVariant;\n    /**\n     * Alert title\n     */\n    title: string;\n    /**\n     * Alert description\n     */\n    description?: string;\n    /**\n     * Time period after which `onDismiss` is called.\n     */\n    dismissDelay?: number;\n    /**\n     * Unique request ID.\n     */\n    requestId?: string;\n    /**\n     * Unique sentry error ID.\n     */\n    sentryId?: string;\n    /**\n     * data-testid attribute\n     */\n    dataTestId?: string;\n};\n\nexport type Alerts = {\n    addAlert: ({ id, title, variant, description, dataTestId, autoDismiss, dismissable, dismissDelay, requestId, sentryId }: AlertProps) => void;\n};\n\n\nexport interface FeaturesConfig {\n    readOnly?: boolean;\n    breadcrumbs?: boolean;\n    multiTenant?: boolean;\n    roleManagement?: boolean;\n    settings?: boolean;\n    alerts?: Alerts;\n}\n\nexport interface ArtifactsConfig {\n    url: string;\n}\n\nexport interface UiConfig {\n    contextPath?: string;\n    navPrefixPath?: string;\n}\n\nexport interface AuthConfig {\n    type: string;\n    rbacEnabled: boolean;\n    obacEnabled: boolean;\n}\n\n// Used when `type=keycloakjs`\nexport interface OidcJsAuthConfig extends AuthConfig {\n    options?: any;\n}\n\n// Used when `type=none`\nexport type NoneAuthConfig = AuthConfig;\n\n\n// Used when `type=gettoken`\nexport interface GetTokenAuthConfig extends AuthConfig {\n    getToken: () => Promise<string>;\n}\n\nexport interface Principal {\n    principalType: \"USER_ACCOUNT\" | \"SERVICE_ACCOUNT\";\n    id: string;\n    displayName?: string;\n    emailAddress?: string;\n}\n\nexport interface ConfigType {\n    artifacts: ArtifactsConfig;\n    auth: OidcJsAuthConfig | NoneAuthConfig | GetTokenAuthConfig;\n    principals?: Principal[];\n    features?: FeaturesConfig;\n    ui: UiConfig;\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport { LoggerService } from \"./logger\";\nimport { ConfigService } from \"./config\";\nimport axios, { AxiosRequestConfig } from \"axios\";\nimport { AuthService } from \"./auth\";\nimport { ContentTypes } from \"../models\";\n\nconst AXIOS = axios.create();\n\n/**\n * Interface implemented by all services.\n */\nexport interface Service {\n    init(): void;\n}\n\n/**\n * Base class for all services.\n */\nexport abstract class BaseService implements Service {\n\n    protected logger: LoggerService = null;\n    protected config: ConfigService = null;\n    protected auth: AuthService = null;\n\n    public init(): void {\n        this.initAuthInterceptor();\n    }\n\n    public initAuthInterceptor() {\n        AXIOS.interceptors.request.use(this.auth.getAuthInterceptor());\n    }\n\n    /**\n     * Creates an endpoint to use when making a REST call.  Supports path params and query params.\n     * @param path\n     * @param params\n     * @param queryParams\n     */\n    protected endpoint(path: string, params?: any, queryParams?: any): string {\n        if (params) {\n            Object.keys(params).forEach(key => {\n                const value: string = encodeURIComponent(params[key]);\n                path = path.replace(\":\" + key, value);\n            });\n        }\n        let rval: string = this.apiBaseHref() + path;\n        if (queryParams) {\n            let first: boolean = true;\n            for (const key in queryParams) {\n                if (queryParams[key]) {\n                    const value: string = encodeURIComponent(queryParams[key]);\n                    if (first) {\n                        rval = rval + \"?\" + key;\n                    } else {\n                        rval = rval + \"&\" + key;\n                    }\n                    if (value !== null && value !== undefined) {\n                        rval = rval + \"=\" + value;\n                    }\n                    first = false;\n                }\n            }\n        }\n        this.logger.info(\"[BaseService] Using REST endpoint: \", rval);\n        return rval;\n    }\n\n    /**\n     * Creates the request options used by the HTTP service when making API calls.\n     * @param headers\n     */\n    protected options(headers: {[header: string]: string}): AxiosRequestConfig {\n        const options: AxiosRequestConfig = { headers };\n        return options;\n    }\n\n    /**\n     * Performs an HTTP GET operation to the given URL with the given options.  Returns\n     * a Promise to the HTTP response data.\n     */\n    protected httpGet<T>(url: string, options?: AxiosRequestConfig, successCallback?: (value: any) => T): Promise<T> {\n        this.logger.info(\"[BaseService] Making a GET request to: \", url);\n\n        if (!options) {\n            options = this.options({ \"Accept\": ContentTypes.APPLICATION_JSON });\n        }\n\n        const config: AxiosRequestConfig = this.axiosConfig(\"get\", url, options);\n        return AXIOS.request(config)\n            .then(response => {\n                const data: T = response.data;\n                if (successCallback) {\n                    return successCallback(data);\n                } else {\n                    return data;\n                }\n            }).catch(error => {\n                return Promise.reject(this.unwrapErrorData(error));\n            });\n    }\n\n    /**\n     * Performs an HTTP POST operation to the given URL with the given body and options.  Returns\n     * a Promise to null (no response data expected).\n     * @param url\n     * @param body\n     * @param options\n     * @param successCallback\n     * @param progressCallback\n     */\n    protected httpPost<I>(url: string, body: I, options?: AxiosRequestConfig, successCallback?: () => void,\n        progressCallback?: (progressEvent: any) => void): Promise<void>\n    {\n        this.logger.info(\"[BaseService] Making a POST request to: \", url);\n\n        if (!options) {\n            options = this.options({ \"Content-Type\": ContentTypes.APPLICATION_JSON });\n        }\n\n        const config: AxiosRequestConfig = this.axiosConfig(\"post\", url, options, body);\n        if (progressCallback) {\n            const fiftyMB: number = 50 * 1024 * 1024;\n            config.onUploadProgress = progressCallback;\n            config.maxContentLength = fiftyMB;\n            config.maxBodyLength = fiftyMB;\n        }\n        return AXIOS.request(config)\n            .then(() => {\n                if (successCallback) {\n                    return successCallback();\n                } else {\n                    return;\n                }\n            }).catch(error => {\n                return Promise.reject(this.unwrapErrorData(error));\n            });\n    }\n\n    /**\n     * Performs an HTTP POST operation to the given URL with the given body and options.  Returns\n     * a Promise to the HTTP response data.\n     * @param url\n     * @param body\n     * @param options\n     */\n    protected httpPostWithReturn<I, O>(url: string, body: I, options?: AxiosRequestConfig, successCallback?: (data: any) => O): Promise<O> {\n        this.logger.info(\"[BaseService] Making a POST request to: \", url);\n\n        if (!options) {\n            options = this.options({ \"Accept\": ContentTypes.APPLICATION_JSON, \"Content-Type\": ContentTypes.APPLICATION_JSON });\n        }\n\n        const config: AxiosRequestConfig = this.axiosConfig(\"post\", url, options, body);\n        return AXIOS.request(config)\n            .then(response => {\n                const data: O = response.data;\n                if (successCallback) {\n                    return successCallback(data);\n                } else {\n                    return data;\n                }\n            }).catch(error => {\n                return Promise.reject(this.unwrapErrorData(error));\n            });\n    }\n\n    /**\n     * Performs an HTTP PUT operation to the given URL with the given body and options.  Returns\n     * a Promise to null (no response data expected).\n     * @param url\n     * @param body\n     * @param options\n     */\n    protected httpPut<I>(url: string, body: I, options?: AxiosRequestConfig, successCallback?: () => void): Promise<void> {\n        this.logger.info(\"[BaseService] Making a PUT request to: \", url);\n\n        if (!options) {\n            options = this.options({ \"Content-Type\": ContentTypes.APPLICATION_JSON });\n        }\n\n        const config: AxiosRequestConfig = this.axiosConfig(\"put\", url, options, body);\n        return AXIOS.request(config)\n            .then(() => {\n                if (successCallback) {\n                    return successCallback();\n                } else {\n                    return;\n                }\n            }).catch(error => {\n                return Promise.reject(this.unwrapErrorData(error));\n            });\n    }\n\n    /**\n     * Performs an HTTP PUT operation to the given URL with the given body and options.  Returns\n     * a Promise to the HTTP response data.\n     * @param url\n     * @param body\n     * @param options\n     */\n    protected httpPutWithReturn<I, O>(url: string, body: I, options?: AxiosRequestConfig, successCallback?: (data: O) => O): Promise<O> {\n        this.logger.info(\"[BaseService] Making a PUT request to: \", url);\n\n        if (!options) {\n            options = this.options({ \"Accept\": ContentTypes.APPLICATION_JSON, \"Content-Type\": ContentTypes.APPLICATION_JSON });\n        }\n\n        const config: AxiosRequestConfig = this.axiosConfig(\"put\", url, options, body);\n        return AXIOS.request(config)\n            .then(response => {\n                const data: O = response.data;\n                if (successCallback) {\n                    return successCallback(data);\n                } else {\n                    return data;\n                }\n            }).catch(error => {\n                return Promise.reject(this.unwrapErrorData(error));\n            });\n    }\n\n    /**\n     * Performs an HTTP DELETE operation to the given URL with the given body and options.\n     * @param url\n     * @param options\n     */\n    protected httpDelete<T>(url: string, options?: AxiosRequestConfig, successCallback?: () => T): Promise<T> {\n        this.logger.info(\"[BaseService] Making a DELETE request to: \", url);\n\n        if (!options) {\n            options = {};\n        }\n\n        const config: AxiosRequestConfig = this.axiosConfig(\"delete\", url, options);\n        return AXIOS.request(config)\n            .then(() => {\n                return successCallback ? successCallback() : null;\n            }).catch(error => {\n                return Promise.reject(this.unwrapErrorData(error));\n            });\n    }\n\n    protected apiBaseHref(): string {\n        let artifactsUrl: string|null = this.config.artifactsUrl();\n        if (artifactsUrl == null) {\n            return \"\";\n        }\n        if (artifactsUrl.endsWith(\"/\")) {\n            artifactsUrl = artifactsUrl.substring(0, artifactsUrl.length - 1);\n        }\n        this.logger.debug(\"[BaseService] Base HREF of REST API: \", artifactsUrl);\n        return artifactsUrl;\n    }\n\n    private axiosConfig(method: string, url: string, options: any, data?: any): AxiosRequestConfig {\n        if (typeof data === \"string\") {\n            data = new Blob([data]);\n        }\n        const c: any = {\n            data,\n            method,\n            url,\n            validateStatus: (status) => {\n                return status >= 200 && status < 300;\n            }\n        };\n        return { ...c, ...options };\n    }\n\n    private unwrapErrorData(error: any): any {\n        if (error && error.response && error.response.data) {\n            return {\n                message: error.message,\n                ...error.response.data,\n                status: error.response.status\n            };\n        } else if (error && error.response) {\n            return {\n                message: error.message,\n                status: error.response.status\n            };\n        } else if (error) {\n            console.error(\"Unknown error detected: \", error);\n            return {\n                message: error.message,\n                status: 500\n            };\n        } else {\n            console.error(\"Unknown error detected: \", error);\n            return {\n                message: \"Unknown error\",\n                status: 500\n            };\n        }\n    }\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BaseService } from \"../baseService\";\nimport { DownloadRef, RoleMapping, Rule } from \"../../models\";\nimport { ConfigurationProperty } from \"../../models/configurationProperty.model\";\nimport { UpdateConfigurationProperty } from \"../../models/updateConfigurationProperty.model\";\n\n/**\n * The Admin service.  Used to get global/settings information from the back-end, like global\n * rules and logging settings.\n */\nexport class AdminService extends BaseService {\n\n    public getRules(): Promise<Rule[]> {\n        this.logger.info(\"[AdminService] Getting the global list of rules.\");\n        const endpoint: string = this.endpoint(\"/v2/admin/rules\");\n        return this.httpGet<string[]>(endpoint).then( ruleTypes => {\n            return Promise.all(ruleTypes.map(rt => this.getRule(rt)));\n        });\n    }\n\n    public getRule(type: string): Promise<Rule> {\n        const endpoint: string = this.endpoint(\"/v2/admin/rules/:rule\", {\n            rule: type\n        });\n        return this.httpGet<Rule>(endpoint);\n    }\n\n    public createRule(type: string, config: string): Promise<Rule> {\n        this.logger.info(\"[AdminService] Creating global rule:\", type);\n\n        const endpoint: string = this.endpoint(\"/v2/admin/rules\");\n        const body: Rule = {\n            config,\n            type\n        };\n        return this.httpPostWithReturn(endpoint, body);\n    }\n\n    public updateRule(type: string, config: string): Promise<Rule|null> {\n        this.logger.info(\"[AdminService] Updating global rule:\", type);\n\n        const endpoint: string = this.endpoint(\"/v2/admin/rules/:rule\", {\n            \"rule\": type\n        });\n        const body: Rule = { config, type };\n        return this.httpPutWithReturn<Rule, Rule>(endpoint, body);\n    }\n\n    public deleteRule(type: string): Promise<null> {\n        this.logger.info(\"[AdminService] Deleting global rule:\", type);\n\n        const endpoint: string = this.endpoint(\"/v2/admin/rules/:rule\", {\n            \"rule\": type\n        });\n        return this.httpDelete(endpoint);\n    }\n\n    public getRoleMappings(): Promise<RoleMapping[]> {\n        this.logger.info(\"[AdminService] Getting the list of role mappings.\");\n        const endpoint: string = this.endpoint(\"/v2/admin/roleMappings\");\n        return this.httpGet<RoleMapping[]>(endpoint);\n    }\n\n    public getRoleMapping(principalId: string): Promise<RoleMapping> {\n        const endpoint: string = this.endpoint(\"/v2/admin/roleMappings/:principalId\", {\n            principalId\n        });\n        return this.httpGet<RoleMapping>(endpoint);\n    }\n\n    public createRoleMapping(principalId: string, role: string, principalName: string): Promise<RoleMapping> {\n        this.logger.info(\"[AdminService] Creating a role mapping:\", principalId, role, principalName);\n\n        const endpoint: string = this.endpoint(\"/v2/admin/roleMappings\");\n        const body: RoleMapping = { principalId, role, principalName };\n        return this.httpPost(endpoint, body).then(() => {\n            return body;\n        });\n    }\n\n    public updateRoleMapping(principalId: string, role: string): Promise<RoleMapping> {\n        this.logger.info(\"[AdminService] Updating role mapping:\", principalId, role);\n\n        const endpoint: string = this.endpoint(\"/v2/admin/roleMappings/:principalId\", {\n            principalId\n        });\n        const body: any = { role };\n        return this.httpPut<any>(endpoint, body).then(() => {\n            return { principalId, role, principalName: principalId };\n        });\n    }\n\n    public deleteRoleMapping(principalId: string): Promise<null> {\n        this.logger.info(\"[AdminService] Deleting role mapping for:\", principalId);\n\n        const endpoint: string = this.endpoint(\"/v2/admin/roleMappings/:principalId\", {\n            principalId\n        });\n        return this.httpDelete(endpoint);\n    }\n\n    public exportAs(filename: string): Promise<DownloadRef> {\n        const endpoint: string = this.endpoint(\"/v2/admin/export\", {}, {\n            forBrowser: true\n        });\n        const headers: any = {\n            Accept: \"application/zip\"\n        };\n        return this.httpGet<DownloadRef>(endpoint, this.options(headers)).then(ref => {\n            if (ref.href.startsWith(\"/apis/registry\")) {\n                ref.href = ref.href.replace(\"/apis/registry\", this.apiBaseHref());\n                ref.href = ref.href + \"/\" + filename;\n            }\n\n            return ref;\n        });\n    }\n\n    public importFrom(file: string | File, progressFunction: (progressEvent: any) => void): Promise<void> {\n        const endpoint: string = this.endpoint(\"/v2/admin/import\");\n        const headers: any = {\n            \"Content-Type\": \"application/zip\"\n        };\n        return this.httpPost(endpoint, file, this.options(headers),undefined, progressFunction);\n    }\n\n    public listConfigurationProperties(): Promise<ConfigurationProperty[]> {\n        this.logger.info(\"[AdminService] Getting the dynamic config properties.\");\n        const endpoint: string = this.endpoint(\"/v2/admin/config/properties\");\n        return this.httpGet<ConfigurationProperty[]>(endpoint);\n    }\n\n    public setConfigurationProperty(propertyName: string, newValue: string): Promise<void> {\n        this.logger.info(\"[AdminService] Setting a config property: \", propertyName);\n        const endpoint: string = this.endpoint(\"/v2/admin/config/properties/:propertyName\", {\n            propertyName\n        });\n        const body: UpdateConfigurationProperty = {\n            value: newValue\n        };\n        return this.httpPut<UpdateConfigurationProperty>(endpoint, body);\n    }\n\n    public resetConfigurationProperty(propertyName: string): Promise<void> {\n        this.logger.info(\"[AdminService] Resetting a config property: \", propertyName);\n        const endpoint: string = this.endpoint(\"/v2/admin/config/properties/:propertyName\", {\n            propertyName\n        });\n        return this.httpDelete(endpoint);\n    }\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Alerts, ConfigType, FeaturesConfig, GetTokenAuthConfig, OidcJsAuthConfig } from \"./config.type\";\nimport { Service } from \"../baseService\";\n\nconst DEFAULT_CONFIG: ConfigType = {\n    artifacts: {\n        url: \"http://localhost:8080/apis/registry\"\n    },\n    auth: {\n        options: {\n            clientId: \"registry-ui\",\n            onLoad: \"login-required\",\n            realm: \"registry\",\n            url: \"http://localhost:8090/auth\"\n        },\n        type: \"keycloakjs\",\n        rbacEnabled: true,\n        obacEnabled: false\n    },\n    features: {\n        readOnly: false,\n        breadcrumbs: true,\n        roleManagement: true,\n        settings: true\n    },\n    ui: {\n        contextPath: \"/\",\n        navPrefixPath: \"/\"\n    }\n};\n\n/**\n * A simple configuration service.  Reads information from a global \"ApicurioRegistryConfig\" variable\n * that is typically included via JSONP.\n */\nexport class ConfigService implements Service {\n    private config: ConfigType;\n\n    constructor() {\n        const w: any = window;\n        if (w.ApicurioRegistryConfig) {\n            this.config = w.ApicurioRegistryConfig;\n            console.info(\"[ConfigService] Found app config.\");\n        } else {\n            console.warn(\"[ConfigService] App config not found! (using default)\");\n            this.config = DEFAULT_CONFIG;\n        }\n    }\n\n    public init(): void {\n        // Nothing to init (done in c'tor)\n    }\n\n    public updateConfig(config: ConfigType): void {\n        this.config = config;\n    }\n\n    public artifactsUrl(): string|null {\n        if (!this.config.artifacts) {\n            return null;\n        }\n        return this.config.artifacts.url;\n    }\n\n    public uiContextPath(): string|undefined {\n        if (!this.config.ui || !this.config.ui.contextPath) {\n            return \"/\";\n        }\n        return this.config.ui.contextPath;\n    }\n\n    public uiNavPrefixPath(): string|undefined {\n        if (!this.config.ui || !this.config.ui.navPrefixPath) {\n            return \"\";\n        }\n        if (this.config.ui.navPrefixPath.endsWith(\"/\")) {\n            this.config.ui.navPrefixPath = this.config.ui.navPrefixPath.substr(0, this.config.ui.navPrefixPath.length - 1);\n        }\n        return this.config.ui.navPrefixPath;\n    }\n\n    public features(): FeaturesConfig {\n        const defaults: FeaturesConfig = {\n            readOnly: false,\n            breadcrumbs: true\n        };\n        if (!this.config.features) {\n            return defaults;\n        }\n        return {\n            ...defaults,\n            ...this.config.features\n        };\n    }\n\n    public featureReadOnly(): boolean {\n        return this.features().readOnly || false;\n    }\n\n    public featureBreadcrumbs(): boolean {\n        return this.features().breadcrumbs || false;\n    }\n\n    public featureRoleManagement(): boolean {\n        return this.features().roleManagement || false;\n    }\n\n    public featureSettings(): boolean {\n        return this.features().settings || false;\n    }\n\n    public featureAlertsService(): Alerts | undefined {\n        return this.features().alerts;\n    }\n\n    public authType(): string {\n        if (!this.config.auth || !this.config.auth.type) {\n            return \"\";\n        }\n        return this.config.auth.type;\n    }\n\n    public authRbacEnabled(): boolean {\n        if (!this.config.auth || !this.config.auth.rbacEnabled) {\n            return false;\n        }\n        return this.config.auth.rbacEnabled;\n    }\n\n    public authObacEnabled(): boolean {\n        if (!this.config.auth || !this.config.auth.obacEnabled) {\n            return false;\n        }\n        return this.config.auth.obacEnabled;\n    }\n\n    public authOptions(): any {\n        if (this.config.auth) {\n            const auth: OidcJsAuthConfig = this.config.auth as OidcJsAuthConfig;\n            return auth.options;\n        }\n        return {};\n    }\n\n    public authGetToken(): () => Promise<string> {\n        if (this.config.auth) {\n            const auth: GetTokenAuthConfig = this.config.auth as GetTokenAuthConfig;\n            return auth.getToken;\n        }\n        return () => {\n            console.error(\"[ConfigService] Missing: 'getToken' from auth config.\");\n            return Promise.resolve(\"\");\n        };\n    }\n\n    public principals() {\n        return this.config.principals;\n    }\n\n    public featureMultiTenant(): boolean {\n        return this.features().multiTenant || false;\n    }\n}\n","import { Alerts, AlertVariant, ConfigService } from \"../config\";\nimport { Service } from \"../baseService\";\nimport { ConfigurationProperty } from \"../../models/configurationProperty.model\";\nimport { LoggerService } from \"../logger\";\n\n\nexport class AlertsService implements Service {\n\n    private config: ConfigService = null;\n    private logger: LoggerService = null;\n\n    public init = () => {\n        // no init\n    };\n\n    public settingChanged(property: ConfigurationProperty, newValue: any): void {\n        const alerts: Alerts | undefined = this.config.featureAlertsService();\n        let title: string = `${property.label} updated`;\n        if (newValue === \"true\" || newValue === \"false\") {\n            title = `${property.label} turned ${newValue === \"true\" ? \"on\" : \"off\"}`;\n        }\n        if (alerts && alerts.addAlert) {\n            alerts.addAlert({\n                title,\n                variant: AlertVariant.success,\n                dataTestId: \"toast-setting-changed\"\n            });\n        } else {\n            this.logger.info(\"[AlertsService] Alerts (toast) service not available: \", title);\n            this.logger.debug(\"[AlertsService] Alerts config is: \", alerts);\n        }\n    }\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport { Service } from \"../baseService\";\n\n\nfunction _window(): Window {\n    return window;\n}\n\n\n/**\n * A simple logger service.\n */\nexport class DownloaderService implements Service {\n\n    private window: Window | any;\n\n    public init(): void {\n        this.window = _window();\n    }\n\n    /**\n     * Called to download some content as a file to the user's local filesystem.\n     * @param content\n     * @param contentType\n     * @param filename\n     */\n    public downloadToFS(content: string, contentType: string, filename: string): Promise<boolean> {\n        console.info(\"[DownloaderService] Downloading an API definition.\");\n\n        if (this.window.chrome !== undefined) {\n            // Chrome version\n            const link = document.createElement(\"a\");\n            const blob: Blob = new Blob([content], { type: contentType });\n            link.href = window.URL.createObjectURL(blob);\n            link.download = filename;\n            link.click();\n        } else if (window.navigator !== undefined && window.navigator.msSaveBlob !== undefined) {\n            // IE version\n            const blob: Blob = new Blob([content], { type: contentType });\n            window.navigator.msSaveBlob(blob, filename);\n        } else {\n            // Firefox version\n            const file: File = new File([content], filename, { type: \"application/force-download\" });\n            window.open(URL.createObjectURL(file));\n        }\n        // Not async right now - so just resolve to true\n        return Promise.resolve(true);\n    }\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    ArtifactMetaData,\n    ArtifactOwner,\n    ContentTypes,\n    Rule,\n    SearchedArtifact,\n    SearchedVersion,\n    VersionMetaData\n} from \"../../models\";\nimport { BaseService } from \"../baseService\";\nimport YAML from \"yaml\";\n\nexport interface CreateArtifactData {\n    groupId: string;\n    id: string|null;\n    type: string;\n    fromURL: string|null;\n    sha: string|null;\n    content: string|null;\n}\n\nexport interface CreateVersionData {\n    type: string;\n    content: string;\n}\n\nexport interface GetArtifactsCriteria {\n    type: string;\n    value: string;\n    sortAscending: boolean;\n}\n\nexport interface Paging {\n    page: number;\n    pageSize: number;\n}\n\nexport interface ArtifactsSearchResults {\n    artifacts: SearchedArtifact[];\n    count: number;\n    page: number;\n    pageSize: number;\n}\n\nexport interface EditableMetaData {\n    name: string;\n    description: string;\n    labels: string[];\n    properties: { [key: string]: string|undefined };\n}\n\n/**\n * The artifacts service.  Used to query the backend search API to fetch lists of\n * artifacts and also details about individual artifacts.\n */\nexport class GroupsService extends BaseService {\n\n    public createArtifact(data: CreateArtifactData): Promise<ArtifactMetaData> {\n        const endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts\", { groupId: data.groupId });\n        const headers: any = {};\n        if (data.id) {\n            headers[\"X-Registry-ArtifactId\"] = data.id;\n        }\n        if (data.type) {\n            headers[\"X-Registry-ArtifactType\"] = data.type;\n        }\n        if (data.sha) {\n            headers[\"X-Registry-Hash-Algorithm\"] = \"SHA256\";\n            headers[\"X-Registry-Content-Hash\"] = data.sha;\n        }\n\n        if (data.fromURL) {\n            headers[\"Content-Type\"] = \"application/create.extended+json\";\n            data.content = `{ \"content\": \"${data.fromURL}\" }`;\n        } else {\n            headers[\"Content-Type\"] = this.contentType(data.type, data.content ? data.content : \"\");\n        }\n\n        return this.httpPostWithReturn<any, ArtifactMetaData>(endpoint, data.content, this.options(headers));\n    }\n\n    public createArtifactVersion(groupId: string|null, artifactId: string, data: CreateVersionData): Promise<VersionMetaData> {\n        groupId = this.normalizeGroupId(groupId);\n\n        const endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/versions\", { groupId, artifactId });\n        const headers: any = {};\n        if (data.type) {\n            headers[\"X-Registry-ArtifactType\"] = data.type;\n        }\n        headers[\"Content-Type\"] = this.contentType(data.type, data.content);\n        return this.httpPostWithReturn<any, VersionMetaData>(endpoint, data.content, this.options(headers));\n    }\n\n    public getArtifacts(criteria: GetArtifactsCriteria, paging: Paging): Promise<ArtifactsSearchResults> {\n        this.logger.debug(\"[GroupsService] Getting artifacts: \", criteria, paging);\n        const start: number = (paging.page - 1) * paging.pageSize;\n        const end: number = start + paging.pageSize;\n        const queryParams: any = {\n            limit: end,\n            offset: start,\n            order: criteria.sortAscending ? \"asc\" : \"desc\",\n            orderby: \"name\"\n        };\n        if (criteria.value) {\n            if (criteria.type == \"everything\") {\n                queryParams[\"name\"] = criteria.value;\n                queryParams[\"description\"] = criteria.value;\n                queryParams[\"labels\"] = criteria.value;\n            } else {\n                queryParams[criteria.type] = criteria.value;\n            }\n        }\n        const endpoint: string = this.endpoint(\"/v2/search/artifacts\", {}, queryParams);\n        return this.httpGet<ArtifactsSearchResults>(endpoint, undefined, (data) => {\n            const results: ArtifactsSearchResults = {\n                artifacts: data.artifacts,\n                count: data.count,\n                page: paging.page,\n                pageSize: paging.pageSize\n            };\n            return results;\n        });\n    }\n\n    public getArtifactMetaData(groupId: string|null, artifactId: string, version: string): Promise<ArtifactMetaData> {\n        groupId = this.normalizeGroupId(groupId);\n\n        let endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/versions/:version/meta\", { groupId, artifactId, version });\n        if (version === \"latest\") {\n            endpoint = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/meta\", { groupId, artifactId });\n        }\n        return this.httpGet<ArtifactMetaData>(endpoint);\n    }\n\n    public getLatestArtifact(groupId: string|null, artifactId: string): Promise<string> {\n        return this.getArtifactContent(groupId, artifactId, \"latest\");\n    }\n\n    public updateArtifactMetaData(groupId: string|null, artifactId: string, version: string, metaData: EditableMetaData): Promise<void> {\n        groupId = this.normalizeGroupId(groupId);\n\n        let endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/versions/:version/meta\", { groupId, artifactId, version });\n        if (version === \"latest\") {\n            endpoint = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/meta\", { groupId, artifactId });\n        }\n        return this.httpPut<EditableMetaData>(endpoint, metaData);\n    }\n\n    public updateArtifactOwner(groupId: string|null, artifactId: string, newOwner: string): Promise<void> {\n        groupId = this.normalizeGroupId(groupId);\n\n        const endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/owner\", { groupId, artifactId });\n        const artifactOwner: ArtifactOwner = {\n            owner: newOwner\n        };\n        return this.httpPut<ArtifactOwner>(endpoint, artifactOwner);\n    }\n\n    public getArtifactContent(groupId: string|null, artifactId: string, version: string): Promise<string> {\n        groupId = this.normalizeGroupId(groupId);\n\n        let endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/versions/:version\", { groupId, artifactId, version });\n        if (version === \"latest\") {\n            endpoint = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId\", { groupId, artifactId });\n        }\n\n        const options: any = this.options({\n            \"Accept\": \"*\"\n        });\n        options.maxContentLength = \"5242880\"; // TODO 5MB hard-coded, make this configurable?\n        options.responseType = \"text\";\n        options.transformResponse = (data: any) => data;\n        return this.httpGet<string>(endpoint, options);\n    }\n\n    public getArtifactVersions(groupId: string|null, artifactId: string): Promise<SearchedVersion[]> {\n        groupId = this.normalizeGroupId(groupId);\n\n        this.logger.info(\"[GroupsService] Getting the list of versions for artifact: \", groupId, artifactId);\n        const endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/versions\", { groupId, artifactId }, {\n            limit: 500,\n            offset: 0\n        });\n        return this.httpGet<SearchedVersion[]>(endpoint, undefined, (data) => {\n            return data.versions;\n        });\n    }\n\n    public getArtifactRules(groupId: string|null, artifactId: string): Promise<Rule[]> {\n        groupId = this.normalizeGroupId(groupId);\n\n        this.logger.info(\"[GroupsService] Getting the list of rules for artifact: \", groupId, artifactId);\n        const endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/rules\", { groupId, artifactId });\n        return this.httpGet<string[]>(endpoint).then( ruleTypes => {\n            return Promise.all(ruleTypes.map(rt => this.getArtifactRule(groupId, artifactId, rt)));\n        });\n    }\n\n    public getArtifactRule(groupId: string|null, artifactId: string, type: string): Promise<Rule> {\n        groupId = this.normalizeGroupId(groupId);\n\n        const endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/rules/:rule\", {\n            groupId,\n            artifactId,\n            rule: type\n        });\n        return this.httpGet<Rule>(endpoint);\n    }\n\n    public createArtifactRule(groupId: string|null, artifactId: string, type: string, config: string): Promise<Rule> {\n        groupId = this.normalizeGroupId(groupId);\n\n        this.logger.info(\"[GroupsService] Creating rule:\", type);\n\n        const endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/rules\", { groupId, artifactId });\n        const body: Rule = {\n            config,\n            type\n        };\n        return this.httpPostWithReturn(endpoint, body);\n    }\n\n    public updateArtifactRule(groupId: string|null, artifactId: string, type: string, config: string): Promise<Rule> {\n        groupId = this.normalizeGroupId(groupId);\n\n        this.logger.info(\"[GroupsService] Updating rule:\", type);\n        const endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/rules/:rule\", {\n            groupId,\n            artifactId,\n            \"rule\": type\n        });\n        const body: Rule = { config, type };\n        return this.httpPutWithReturn<Rule, Rule>(endpoint, body);\n    }\n\n    public deleteArtifactRule(groupId: string|null, artifactId: string, type: string): Promise<void> {\n        groupId = this.normalizeGroupId(groupId);\n\n        this.logger.info(\"[GroupsService] Deleting rule:\", type);\n        const endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId/rules/:rule\", {\n            groupId,\n            artifactId,\n            \"rule\": type\n        });\n        return this.httpDelete(endpoint);\n    }\n\n    public deleteArtifact(groupId: string|null, artifactId: string): Promise<void> {\n        groupId = this.normalizeGroupId(groupId);\n\n        this.logger.info(\"[GroupsService] Deleting artifact:\", groupId, artifactId);\n        const endpoint: string = this.endpoint(\"/v2/groups/:groupId/artifacts/:artifactId\", { groupId, artifactId });\n        return this.httpDelete(endpoint);\n    }\n\n    private normalizeGroupId(groupId: string|null): string {\n        return groupId || \"default\";\n    }\n\n    private contentType(type: string, content: string): string {\n        switch (type) {\n            case \"PROTOBUF\":\n                return ContentTypes.APPLICATION_PROTOBUF;\n            case \"WSDL\":\n            case \"XSD\":\n            case \"XML\":\n                return ContentTypes.APPLICATION_XML;\n            case \"GRAPHQL\":\n                return ContentTypes.APPLICATION_GRAPHQL;\n        }\n        if (this.isJson(content)) {\n            return ContentTypes.APPLICATION_JSON;\n        } else if (this.isXml(content)) {\n            return ContentTypes.APPLICATION_XML;\n        } else if (this.isYaml(content)) {\n            return ContentTypes.APPLICATION_YAML;\n        } else {\n            return \"application/octet-stream\";\n        }\n    }\n\n    private isJson(content: string): boolean {\n        try {\n            JSON.parse(content);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    private isXml(content: string): boolean {\n        try {\n            const xmlParser: DOMParser = new DOMParser();\n            const dom: Document = xmlParser.parseFromString(content, \"application/xml\");\n            const isParseError: boolean = dom.getElementsByTagName(\"parsererror\").length !== 0;\n            return !isParseError;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    private isYaml(content: string): boolean {\n        try {\n            const parsedContent: any = YAML.parse(content);\n            return typeof parsedContent === \"object\";\n        } catch (e) {\n            return false;\n        }\n    }\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport { Service } from \"../baseService\";\nimport { ConfigService } from \"../config\";\n\n/**\n * A simple logger service.\n */\nexport class LoggerService implements Service {\n    protected config: ConfigService = null;\n\n    public init(): void {\n        // Nothing to init\n    }\n\n    public debug(message: any, ...optionalParams: any[]): void {\n        console.debug((this.config.featureMultiTenant() ? \"{MT}::\" : \"\") + message, ...optionalParams);\n    }\n\n    public info(message: any, ...optionalParams: any[]): void {\n        console.info((this.config.featureMultiTenant() ? \"{MT}::\" : \"\") + message, ...optionalParams);\n    }\n\n    public warn(message: any, ...optionalParams: any[]): void {\n        console.warn((this.config.featureMultiTenant() ? \"{MT}::\" : \"\") + message, ...optionalParams);\n    }\n\n    public error(message: any, ...optionalParams: any[]): void {\n        console.error((this.config.featureMultiTenant() ? \"{MT}::\" : \"\") + message, ...optionalParams);\n    }\n\n}\n","import Keycloak from \"keycloak-js\";\nimport { ConfigService } from \"../config\";\nimport { Service } from \"../baseService\";\nimport { AxiosRequestConfig } from \"axios\";\nimport { LoggerService } from \"../logger\";\nimport { UsersService } from \"../users\";\nimport { User, UserManager, UserManagerSettings } from \"oidc-client-ts\";\n\nconst KC_CONFIG_OPTIONS: string[] = [\"url\", \"realm\", \"clientId\", \"redirectUri\"];\nconst KC_INIT_OPTIONS: string[] = [\n    \"useNonce\", \"adapter\", \"onLoad\", \"token\", \"refreshToken\", \"idToken\", \"timeSkew\", \"checkLoginIframe\",\n    \"checkLoginIframeInterval\", \"responseMode\", \"redirectUri\", \"silentCheckSsoRedirectUri\", \"flow\",\n    \"pkceMethod\", \"enableLogging\"\n];\n\nfunction only(items: string[], allOptions: any): any {\n    const rval: any = {};\n    items.forEach(item => {\n        if (allOptions[item] !== undefined) {\n            rval[item] = allOptions[item];\n        }\n    });\n    return rval;\n}\n\nexport interface AuthenticatedUser {\n    username: string;\n    displayName: string;\n    fullName: string;\n    roles?: any;\n}\n\n/**\n * Initializes Keycloak instance and calls the provided callback function if successfully authenticated.\n *\n * @param onAuthenticatedCallback\n */\n\nexport class AuthService implements Service {\n\n    protected users: UsersService = null;\n\n    private enabled: boolean = false;\n    private config: ConfigService = null;\n    private logger: LoggerService = null;\n    private keycloak: Keycloak.KeycloakInstance;\n    private user: AuthenticatedUser;\n    private userManager: UserManager;\n    private oidcUser: User;\n\n    public init = () => {\n        if (this.config.authType() === \"oidc\") {\n            this.userManager = new UserManager(this.getClientSettings());\n        }\n    };\n\n    public authenticateUsingOidc = (onAuthenticatedCallback: () => void) => {\n        this.userManager.getUser().then((authenticatedUser) => {\n            if (authenticatedUser) {\n                this.oidcUser = authenticatedUser;\n                this.userManager.startSilentRenew();\n                onAuthenticatedCallback();\n            } else {\n                console.warn(\"Not authenticated!\");\n                this.doLogin();\n            }\n\n        }).catch((error) => {\n            console.log(error);\n            this.user = this.fakeUser();\n            onAuthenticatedCallback();\n        });\n    };\n\n    public authenticateUsingKeycloak = (onAuthenticatedCallback: () => void) => {\n        const configOptions: any = only(KC_CONFIG_OPTIONS, this.config.authOptions());\n        const initOptions: any = only(KC_INIT_OPTIONS, this.config.authOptions());\n\n        this.keycloak = Keycloak(configOptions);\n\n        const addRoles: ((user: AuthenticatedUser) => void) = (user) => {\n            if (this.keycloak.resourceAccess) {\n                Object.keys(this.keycloak.resourceAccess)\n                    .forEach(key => (user.roles = user.roles.concat(this.keycloak.resourceAccess[key].roles)));\n            }\n\n            this.logger.info(\"----------------\");\n            this.logger.info(\"Authenticated!  User info:\", user);\n            this.logger.info(\"----------------\");\n        };\n\n        const infoToUser: (() => AuthenticatedUser) = () => {\n            const ui: any = this.keycloak.userInfo;\n            return {\n                displayName: ui.given_name,\n                fullName: ui.name,\n                roles: [],\n                username: ui.preferred_username\n            };\n        };\n\n        this.keycloak.init(initOptions)\n            .then((authenticated) => {\n                if (authenticated) {\n                    this.keycloak.loadUserInfo().then(() => {\n                        this.user = infoToUser();\n                        addRoles(this.user);\n                        onAuthenticatedCallback();\n                    }).catch(() => {\n                        this.user = this.fakeUser();\n                        addRoles(this.user);\n                        onAuthenticatedCallback();\n                    });\n                } else {\n                    console.warn(\"Not authenticated!\");\n                    this.doLogin();\n                }\n            });\n    };\n\n    public getClientSettings(): UserManagerSettings {\n        const configOptions: any = only(KC_CONFIG_OPTIONS, this.config.authOptions());\n\n        return {\n            authority: configOptions.url,\n            client_id: configOptions.clientId,\n            redirect_uri: configOptions.redirectUri,\n            response_type: \"code\",\n            scope: \"openid profile api1\",\n            filterProtocolClaims: true,\n            loadUserInfo: true\n        };\n    }\n\n    public fakeUser: (() => AuthenticatedUser) = () => {\n        return {\n            displayName: \"User\",\n            fullName: \"User\",\n            roles: [],\n            username: \"User\"\n        };\n    };\n\n    public oidcInfoToUser(user: User): AuthenticatedUser {\n        return {\n            displayName: user.profile.given_name != undefined ? user.profile.given_name : \"User\",\n            fullName: user.profile.preferred_username != undefined ? user.profile.preferred_username : \"User\",\n            username: user.profile.name != undefined ? user.profile.name : \"User\"\n        };\n    }\n\n    public isAuthenticated(): boolean {\n        return (this.isKeycloakAuthenticated() || this.isOidcAuthenticated());\n    }\n\n    public isKeycloakAuthenticated = () => (this.keycloak != null && this.keycloak.authenticated);\n\n    private isOidcAuthenticated(): boolean {\n        return this.userManager != null && this.oidcUser != null && !this.oidcUser.expired;\n    }\n\n    public doLogin = () => {\n        if (this.config.authType() === \"keycloakjs\") {\n            this.keycloak.login();\n        } else if (this.config.authType() === \"oidc\") {\n            this.userManager.signinRedirect().catch(reason => {\n                console.log(reason);\n            });\n        }\n    };\n\n    public doLogout = () => {\n        if (this.config.authType() === \"keycloakjs\") {\n            this.keycloak.logout({\n                redirectUri: window.location.href\n            });\n        } else if (this.config.authType() === \"oidc\") {\n            this.userManager.signoutRedirect({ post_logout_redirect_uri: window.location.href });\n        }\n    };\n\n    public getToken = () => this.keycloak.token;\n\n    public getOidcToken = () => {\n        return this.oidcUser.id_token;\n    };\n\n    public isAuthenticationEnabled(): boolean {\n        return this.enabled;\n    }\n\n    public isRbacEnabled(): boolean {\n        return this.config.authRbacEnabled();\n    }\n\n    public isObacEnabled(): boolean {\n        return this.config.authObacEnabled();\n    }\n\n    public isUserAdmin(): boolean {\n        if (!this.isAuthenticationEnabled()) {\n            return true;\n        }\n        if (!this.isRbacEnabled() && !this.isObacEnabled()) {\n            return true;\n        }\n        return this.users.currentUser().admin;\n    }\n\n    public isUserDeveloper(resourceOwner?: string): boolean {\n        if (!this.isAuthenticationEnabled()) {\n            return true;\n        }\n        if (!this.isRbacEnabled() && !this.isObacEnabled()) {\n            return true;\n        }\n        if (this.isUserAdmin()) {\n            return true;\n        }\n        if (this.isRbacEnabled() && !this.users.currentUser().developer) {\n            return false;\n        }\n        if (this.isObacEnabled() && resourceOwner && this.users.currentUser().username !== resourceOwner) {\n            return false;\n        }\n        return true;\n    }\n\n    public isUserId(userId: string): boolean {\n        return this.users.currentUser().username === userId;\n    }\n\n    public authenticateAndRender(render: () => void): void {\n        if (this.config.authType() === \"keycloakjs\") {\n            this.enabled = true;\n            this.authenticateUsingKeycloak(render);\n        } else if (this.config.authType() === \"oidc\") {\n            this.enabled = true;\n            const url = new URL(window.location.href);\n            if (url.searchParams.get(\"state\")) {\n                this.userManager.signinRedirectCallback().then(user => {\n                    this.oidcUser = user;\n                    render();\n                });\n            } else {\n                this.authenticateUsingOidc(render);\n            }\n        } else {\n            this.enabled = false;\n            render();\n        }\n    }\n\n    public getAuthInterceptor(): (config: AxiosRequestConfig) => Promise<any> {\n        /* eslint-disable @typescript-eslint/no-this-alias */\n        const self: AuthService = this;\n        return (config: AxiosRequestConfig) => {\n            if (self.config.authType() === \"keycloakjs\") {\n                return self.updateKeycloakToken(() => {\n                    config.headers.Authorization = `Bearer ${this.getToken()}`;\n                    return Promise.resolve(config);\n                });\n            } else if (self.config.authType() === \"gettoken\") {\n                this.logger.info(\"[AuthService] Using 'getToken' auth type.\");\n                return self.config.authGetToken()().then(token => {\n                    this.logger.info(\"[AuthService] Token acquired.\");\n                    config.headers.Authorization = `Bearer ${token}`;\n                    return Promise.resolve(config);\n                }).catch(error => {\n                    this.logger.info(\"[AuthService] Failed to acquire token: \", error);\n                    return Promise.reject(error);\n                });\n            } else if (self.config.authType() === \"oidc\") {\n                config.headers.Authorization = `Bearer ${this.getOidcToken()}`;\n                return Promise.resolve(config);\n            } else {\n                return Promise.resolve(config);\n            }\n        };\n    }\n\n    private updateKeycloakToken = (successCallback) => {\n        return this.keycloak.updateToken(5)\n            .then(successCallback)\n            .catch(this.doLogin);\n    };\n}\n","/**\n * @license\n * Copyright 2021 Red Hat\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BaseService } from \"../baseService\";\nimport { UserInfo } from \"../../models\";\n\n/**\n * A service that provides access to the /users endpoint.\n */\nexport class UsersService extends BaseService {\n\n    private currentUserInfo: UserInfo;\n\n    constructor() {\n        super();\n        this.currentUserInfo = {\n            username: \"\",\n            displayName: \"\",\n            admin: false,\n            developer: false,\n            viewer: false\n        };\n    }\n\n    public init(): void {\n        // Nothing to init (done in c'tor)\n    }\n\n    public currentUser(): UserInfo {\n        return this.currentUserInfo;\n    }\n\n    public updateCurrentUser(): Promise<UserInfo> {\n        if (this.auth.isAuthenticated()) {\n            // TODO cache the response for a few minutes to limit the # of times this is called per minute??\n            const endpoint: string = this.endpoint(\"/v2/users/me\");\n            return this.httpGet<UserInfo>(endpoint).then(userInfo => {\n                this.currentUserInfo = userInfo;\n                return userInfo;\n            });\n        } else {\n            return Promise.resolve(this.currentUserInfo);\n        }\n    }\n\n}\n","/**\n * @license\n * Copyright 2020 JBoss Inc\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { GroupsService } from \"./groups\";\nimport { ConfigService } from \"./config\";\nimport { LoggerService } from \"./logger\";\nimport { AdminService } from \"./admin\";\nimport { Service } from \"./baseService\";\nimport { DownloaderService } from \"./downloader\";\nimport { AuthService } from \"./auth\";\nimport { UsersService } from \"./users\";\nimport { AlertsService } from \"./alerts\";\n\n/**\n * Class that provides access to all of the services in the application.\n */\nexport class Services {\n\n    static _isInit: boolean = false;\n\n    public static getGroupsService(): GroupsService {\n        return Services.all.groups;\n    }\n\n    public static getConfigService(): ConfigService {\n        return Services.all.config;\n    }\n\n    public static getDownloaderService(): DownloaderService {\n        return Services.all.downloader;\n    }\n\n    public static getLoggerService(): LoggerService {\n        return Services.all.logger;\n    }\n\n    public static getAdminService(): AdminService {\n        return Services.all.admin;\n    }\n\n    public static getAuthService(): AuthService {\n        return Services.all.auth;\n    }\n\n    public static getUsersService(): UsersService {\n        return Services.all.users;\n    }\n\n    public static getAlertsService(): AlertsService {\n        return Services.all.alerts;\n    }\n\n    private static all: any = {\n        groups: new GroupsService(),\n        users: new UsersService(),\n        config: new ConfigService(),\n        downloader: new DownloaderService(),\n        admin: new AdminService(),\n        logger: new LoggerService(),\n        auth: new AuthService(),\n        alerts: new AlertsService(),\n    };\n\n    // tslint:disable-next-line:member-ordering member-access\n    static _intialize(): void {\n        console.info(\"[Services] _initialize() in Services\");\n        if (Services._isInit) {\n            console.info(\"[Services] Services already intialized...skipping.\");\n            return;\n        }\n        console.info(\"[Services] Actually initializing Services!!!\");\n        // First perform simple service-service injection.\n        Object.keys(Services.all).forEach( svcToInjectIntoName => {\n            const svcToInjectInto: any = Services.all[svcToInjectIntoName];\n            Object.keys(Services.all).filter(key => key !== svcToInjectIntoName).forEach(injectableSvcKey => {\n                if (svcToInjectInto[injectableSvcKey] !== undefined && svcToInjectInto[injectableSvcKey] === null) {\n                    svcToInjectInto[injectableSvcKey] = Services.all[injectableSvcKey];\n                }\n            });\n        });\n        // Once that's done, init() all the services\n        Object.keys(Services.all).forEach( svcToInjectIntoName => {\n            const svcToInit: Service = Services.all[svcToInjectIntoName];\n            svcToInit.init();\n        });\n        Services._isInit = true;\n        Services.getLoggerService().info(\"[Services] Services successfully initialized.\");\n    }\n\n}\nServices._intialize();\n","export default __webpack_public_path__ + \"4169897f.png\";"],"names":["properties","testIdCounter","navigateTo","location","history","PureComponent","HISTORY","info","push","warn","state","initializeState","postConstruct","setHistory","testId","prefix","this","setSingleState","key","value","callback","newState","setMultiState","setState","linkTo","url","uiNavPrefixPath","props","render","className","getClassNames","title","getTitle","type","ArtifactTypes","classes","showDetails","reloadPage","window","reload","PageSection","variant","PageSectionVariants","EmptyState","EmptyStateVariant","EmptyStateIcon","icon","ExclamationTriangleIcon","Title","headingLevel","size","errorMessage","EmptyStateBody","Button","onClick","EmptyStateSecondaryActions","canShowDetails","isShowDetails","id","mode","theme","name","width","editorWidth","height","editorHeight","fontSize","showPrintMargin","showGutter","highlightActiveLine","errorDetail","readOnly","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","useWorker","featureMultiTenant","error","detail","JSON","stringify","onSelect","event","isOpen","document","getElementById","focus","onToggle","dropdownItems","DropdownItem","doLogout","isInline","Dropdown","toggle","DropdownToggle","Avatar","src","alt","isPlain","Modal","ModalVariant","onClose","actions","causes","length","DataList","map","cause","idx","DataListItemRow","DataListItemCells","dataListCells","DataListCell","ExclamationCircleIcon","context","description","header","href","showClose","Spinner","message","newValue","currentTarget","tooltip","toggleIndicator","CaretDownIcon","displayValue","doEnableRule","ruleType","onEnableRule","doDisableRule","onDisableRule","doConfigureRule","config","onConfigureRule","validityRuleActions","isRuleEnabled","ValidityDropdown","getRuleConfig","TrashIcon","compatibilityRuleActions","CompatibilityDropdown","DataListItem","getRuleRowClasses","OkIcon","isDeveloper","feature","isNot","DataListAction","CodeBranchIcon","rules","filter","rule","join","frules","r","SchemaEmptyState","artifactName","basename","registryId","Card","CardTitle","CardBody","ClipboardCopy","isReadOnly","hoverTip","clickTip","Link","to","timer","clipboardCopyFunc","text","clipboard","parentElement","el","createElement","toString","appendChild","select","removeChild","clearTimeout","copySchemaContent","setTimeout","schemaContentData","undefined","componentDidMount","createLoaders","topicName","artifactId1","artifactId2","keySchema","getLatestArtifact","then","response","routePath","postfix","DescriptionListDescription","Grid","hasGutter","span","GridItem","rowSpan","color","ExpandableSection","toggleText","displaySize","isWidthLimited","CodeBlock","CodeBlockAction","ClipboardCopyButton","textId","e","exitDelay","maxWidth","CodeBlockCode","NoMatchingSchema","artifactId","Split","SplitItem","Alert","AlertVariant","Popover","hasAutoWidth","headerContent","bodyContent","Stack","StackItem","SchemaCard","hasKeySchema","hasValueSchema","version","component","DescriptionList","isHorizontal","isAutoColumnWidths","columnModifier","lg","DescriptionListTerm","PermissionDenied","hasPermissionDenied","groupId","Bullseye","componentWillMount","getArtifactsMetadata","componentDidUpdate","prevProps","getArtifactMetaData","catch","error_code","status","updateConfiguration","c","updateConfig","APPLICATION_JSON","APPLICATION_YAML","APPLICATION_XML","APPLICATION_PROTOBUF","APPLICATION_GRAPHQL","READ_ONLY","DEVELOPER","ADMIN","AXIOS","logger","auth","init","initAuthInterceptor","interceptors","request","use","getAuthInterceptor","endpoint","path","params","queryParams","Object","keys","forEach","encodeURIComponent","replace","rval","apiBaseHref","first","options","headers","httpGet","successCallback","ContentTypes","axiosConfig","data","Promise","reject","unwrapErrorData","httpPost","body","progressCallback","fiftyMB","onUploadProgress","maxContentLength","maxBodyLength","httpPostWithReturn","httpPut","httpPutWithReturn","httpDelete","artifactsUrl","endsWith","substring","debug","method","Blob","validateStatus","console","getRules","ruleTypes","all","rt","getRule","createRule","updateRule","deleteRule","getRoleMappings","getRoleMapping","principalId","createRoleMapping","role","principalName","updateRoleMapping","deleteRoleMapping","exportAs","filename","forBrowser","Accept","ref","startsWith","importFrom","file","progressFunction","listConfigurationProperties","setConfigurationProperty","propertyName","resetConfigurationProperty","BaseService","DEFAULT_CONFIG","artifacts","clientId","onLoad","realm","rbacEnabled","obacEnabled","features","breadcrumbs","roleManagement","settings","ui","contextPath","navPrefixPath","w","ApicurioRegistryConfig","uiContextPath","substr","defaults","featureReadOnly","featureBreadcrumbs","featureRoleManagement","featureSettings","featureAlertsService","alerts","authType","authRbacEnabled","authObacEnabled","authOptions","authGetToken","getToken","resolve","principals","multiTenant","settingChanged","property","label","addAlert","success","dataTestId","downloadToFS","content","contentType","chrome","link","blob","URL","createObjectURL","download","click","navigator","msSaveBlob","File","open","createArtifact","sha","fromURL","createArtifactVersion","normalizeGroupId","getArtifacts","criteria","paging","start","page","pageSize","limit","offset","order","sortAscending","orderby","count","getArtifactContent","updateArtifactMetaData","metaData","updateArtifactOwner","newOwner","artifactOwner","owner","responseType","transformResponse","getArtifactVersions","versions","getArtifactRules","getArtifactRule","createArtifactRule","updateArtifactRule","deleteArtifactRule","deleteArtifact","isJson","isXml","isYaml","parse","DOMParser","parseFromString","getElementsByTagName","optionalParams","KC_CONFIG_OPTIONS","KC_INIT_OPTIONS","only","items","allOptions","item","users","enabled","userManager","UserManager","getClientSettings","authenticateUsingOidc","onAuthenticatedCallback","getUser","authenticatedUser","oidcUser","startSilentRenew","doLogin","log","user","fakeUser","authenticateUsingKeycloak","configOptions","initOptions","keycloak","addRoles","resourceAccess","roles","concat","authenticated","loadUserInfo","displayName","userInfo","given_name","fullName","username","preferred_username","isKeycloakAuthenticated","login","signinRedirect","reason","logout","redirectUri","signoutRedirect","post_logout_redirect_uri","token","getOidcToken","id_token","updateKeycloakToken","updateToken","authority","client_id","redirect_uri","response_type","scope","filterProtocolClaims","oidcInfoToUser","profile","isAuthenticated","isOidcAuthenticated","expired","isAuthenticationEnabled","isRbacEnabled","isObacEnabled","isUserAdmin","currentUser","admin","isUserDeveloper","resourceOwner","developer","isUserId","userId","authenticateAndRender","searchParams","get","signinRedirectCallback","self","Authorization","currentUserInfo","viewer","updateCurrentUser","getGroupsService","Services","groups","getConfigService","getDownloaderService","downloader","getLoggerService","getAdminService","getAuthService","getUsersService","getAlertsService","_intialize","_isInit","svcToInjectIntoName","svcToInjectInto","injectableSvcKey","GroupsService","UsersService","ConfigService","DownloaderService","AdminService","LoggerService","AuthService","AlertsService"],"sourceRoot":""}