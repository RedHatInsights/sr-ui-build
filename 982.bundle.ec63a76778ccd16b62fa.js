/*! For license information please see 982.bundle.ec63a76778ccd16b62fa.js.LICENSE.txt */
"use strict";(self.webpackChunk_apicurio_registry_ui=self.webpackChunk_apicurio_registry_ui||[]).push([[982],{24754:(t,e,a)=>{a.d(e,{If:()=>c});var r,n=a(48121),i=a.n(n),o=a(52445),s=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),c=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.render=function(){return this.accept()?i().createElement(i().Fragment,{children:this.props.children}):i().createElement(i().Fragment,null)},e.prototype.initializeState=function(){return{}},e.prototype.accept=function(){return"boolean"==typeof this.props.condition?this.props.condition:this.props.condition()},e}(o.V)},10564:(t,e,a)=>{a.d(e,{C:()=>b});var r,n=a(48121),i=a.n(n),o=a(95995),s=a(95713),c=a(93692),l=a(15392),p=a(5571),u=a(98068),d=a(20301),f=a(49746),m=a(8105),h=a(19162),g=a(46768),v=a(38304),y=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),E=function(){return E=Object.assign||function(t){for(var e,a=1,r=arguments.length;a<r;a++)for(var n in e=arguments[a])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},E.apply(this,arguments)},S=function(){for(var t=0,e=0,a=arguments.length;e<a;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<a;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,n++)r[n]=i[o];return r};var b=function(t){function e(e){var a=t.call(this,e)||this;return a.handleTabClick=function(t,e){a.setSingleState("activeTabKey",e)},a.onUploadVersion=function(){a.setSingleState("isUploadModalOpen",!0)},a.onDeleteArtifact=function(){a.setSingleState("isDeleteModalOpen",!0)},a.doEnableRule=function(t){g.Services.getLoggerService().debug("[ArtifactVersionPage] Enabling rule:",t);var e="FULL";"COMPATIBILITY"===t&&(e="BACKWARD"),g.Services.getGroupsService().createArtifactRule(a.groupId(),a.artifactId(),t,e).catch((function(e){a.handleServerError(e,'Error enabling "'+t+'" artifact rule.')})),a.setSingleState("rules",S(a.rules(),[{config:e,type:t}]))},a.doDisableRule=function(t){g.Services.getLoggerService().debug("[ArtifactVersionPage] Disabling rule:",t),g.Services.getGroupsService().deleteArtifactRule(a.groupId(),a.artifactId(),t).catch((function(e){a.handleServerError(e,'Error disabling "'+t+'" artifact rule.')})),a.setSingleState("rules",a.rules().filter((function(e){return e.type!==t})))},a.doConfigureRule=function(t,e){g.Services.getLoggerService().debug("[ArtifactVersionPage] Configuring rule:",t,e),g.Services.getGroupsService().updateArtifactRule(a.groupId(),a.artifactId(),t,e).catch((function(e){a.handleServerError(e,'Error configuring "'+t+'" artifact rule.')})),a.setSingleState("rules",a.rules().map((function(a){return a.type===t?{config:e,type:a.type}:a})))},a.doDownloadArtifact=function(){var t,e,r,n,i,o=a.state.artifactContent,s=h.ContentTypes.APPLICATION_JSON,c="json";(null===(t=a.state.artifact)||void 0===t?void 0:t.type)===h.ArtifactTypes.PROTOBUF&&(s=h.ContentTypes.APPLICATION_PROTOBUF,c="proto"),(null===(e=a.state.artifact)||void 0===e?void 0:e.type)===h.ArtifactTypes.WSDL&&(s=h.ContentTypes.APPLICATION_XML,c="wsdl"),(null===(r=a.state.artifact)||void 0===r?void 0:r.type)===h.ArtifactTypes.XSD&&(s=h.ContentTypes.APPLICATION_XML,c="xsd"),(null===(n=a.state.artifact)||void 0===n?void 0:n.type)===h.ArtifactTypes.XML&&(s=h.ContentTypes.APPLICATION_XML,c="xml"),(null===(i=a.state.artifact)||void 0===i?void 0:i.type)===h.ArtifactTypes.GRAPHQL&&(s=h.ContentTypes.APPLICATION_JSON,c="graphql");var l=a.artifactNameOrId()+"."+c;g.Services.getDownloaderService().downloadToFS(o,s,l)},a.onUploadFormValid=function(t){a.setSingleState("isUploadFormValid",t)},a.onUploadFormChange=function(t){a.setSingleState("uploadFormData",t)},a.onUploadModalClose=function(){a.setSingleState("isUploadModalOpen",!1)},a.onDeleteModalClose=function(){a.setSingleState("isDeleteModalOpen",!1)},a.doUploadArtifactVersion=function(){if(a.onUploadModalClose(),a.pleaseWait(!0,"Uploading new version, please wait..."),null!==a.state.uploadFormData){var t={content:a.state.uploadFormData,type:a.artifactType()};g.Services.getGroupsService().createArtifactVersion(a.groupId(),a.artifactId(),t).then((function(t){var e=t.groupId?t.groupId:"default",r="/artifacts/"+encodeURIComponent(e)+"/"+encodeURIComponent(t.id)+"/versions/"+t.version;g.Services.getLoggerService().info("[ArtifactVersionPage] Artifact version successfully uploaded.  Redirecting to details: ",r),a.navigateTo(a.linkTo(r))()})).catch((function(t){a.pleaseWait(!1,""),t&&409===t.error_code?a.handleInvalidContentError(t):a.handleServerError(t,"Error uploading artifact version.")}))}},a.doDeleteArtifact=function(){a.onDeleteModalClose(),a.pleaseWait(!0,"Deleting artifact, please wait..."),g.Services.getGroupsService().deleteArtifact(a.groupId(),a.artifactId()).then((function(){a.pleaseWait(!1,""),a.navigateTo(a.linkTo("/artifacts"))()}))},a.openEditMetaDataModal=function(){a.setSingleState("isEditModalOpen",!0)},a.onEditModalClose=function(){a.setSingleState("isEditModalOpen",!1)},a.doEditMetaData=function(t){g.Services.getGroupsService().updateArtifactMetaData(a.groupId(),a.artifactId(),a.versionParam(),t).then((function(){a.state.artifact&&a.setSingleState("artifact",E(E({},a.state.artifact),t))})).catch((function(t){a.handleServerError(t,"Error editing artifact meta-data.")})),a.onEditModalClose()},a.closeInvalidContentModal=function(){a.setSingleState("isInvalidContentModalOpen",!1)},a.pleaseWait=function(t,e){a.setMultiState({isPleaseWaitModalOpen:t,pleaseWaitMessage:e})},a}return y(e,t),e.prototype.renderPage=function(){var t=this.state.artifact?this.state.artifact:new h.ArtifactMetaData,e=[i().createElement(o.Tab,{eventKey:0,title:"Info",key:"info",tabContentId:"tab-info"},i().createElement(c.fP,{artifact:t,rules:this.rules(),onEnableRule:this.doEnableRule,onDisableRule:this.doDisableRule,onConfigureRule:this.doConfigureRule,onDownloadArtifact:this.doDownloadArtifact,onEditMetaData:this.openEditMetaDataModal})),i().createElement(o.Tab,{eventKey:1,title:"Documentation",key:"documentation"},i().createElement(c.pX,{artifactContent:this.state.artifactContent,artifactType:t.type})),i().createElement(o.Tab,{eventKey:2,title:"Content",key:"content"},i().createElement(c.IK,{artifactContent:this.state.artifactContent,artifactType:t.type}))];this.showDocumentationTab()||e.splice(1,1);var a=this.groupIdParam(),r="default"!=a,n=i().createElement(o.Breadcrumb,null,i().createElement(o.BreadcrumbItem,null,i().createElement(u.Link,{to:this.linkTo("/artifacts"),"data-testid":"breadcrumb-lnk-artifacts"},"Artifacts")),i().createElement(o.BreadcrumbItem,null,i().createElement(u.Link,{to:this.linkTo("/artifacts?group="+encodeURIComponent(a)),"data-testid":"breadcrumb-lnk-group"},a)),i().createElement(o.BreadcrumbItem,{isActive:!0},this.artifactId()));return r||(n=i().createElement(o.Breadcrumb,null,i().createElement(o.BreadcrumbItem,null,i().createElement(u.Link,{to:"/artifacts","data-testid":"breadcrumb-lnk-artifacts"},"Artifacts")),i().createElement(o.BreadcrumbItem,{isActive:!0},this.artifactId()))),i().createElement(i().Fragment,null,i().createElement(m.QT,{feature:"breadcrumbs",is:!0},i().createElement(o.PageSection,{className:"ps_header-breadcrumbs",variant:o.PageSectionVariants.light,children:n})),i().createElement(o.PageSection,{className:"ps_artifact-version-header",variant:o.PageSectionVariants.light},i().createElement(l.p,{title:this.nameOrId(),versions:this.versions(),version:this.versionParam(),onUploadVersion:this.onUploadVersion,onDeleteArtifact:this.onDeleteArtifact,groupId:a,artifactId:this.artifactId()})),i().createElement(o.PageSection,{variant:o.PageSectionVariants.light,isFilled:!0,padding:{default:"noPadding"},className:"artifact-details-main"},i().createElement(o.Tabs,{className:"artifact-page-tabs",id:"artifact-page-tabs",unmountOnExit:!0,isFilled:!1,activeKey:this.state.activeTabKey,children:e,onSelect:this.handleTabClick})),i().createElement(o.Modal,{title:"Upload Artifact Version",variant:"large",isOpen:this.state.isUploadModalOpen,onClose:this.onUploadModalClose,className:"upload-artifact-modal pf-m-redhat-font",actions:[i().createElement(o.Button,{key:"upload",variant:"primary","data-testid":"modal-btn-upload",onClick:this.doUploadArtifactVersion,isDisabled:!this.state.isUploadFormValid},"Upload"),i().createElement(o.Button,{key:"cancel",variant:"link","data-testid":"modal-btn-cancel",onClick:this.onUploadModalClose},"Cancel")]},i().createElement(p.G,{onChange:this.onUploadFormChange,onValid:this.onUploadFormValid})),i().createElement(o.Modal,{title:"Delete Artifact",variant:"small",isOpen:this.state.isDeleteModalOpen,onClose:this.onDeleteModalClose,className:"delete-artifact-modal pf-m-redhat-font",actions:[i().createElement(o.Button,{key:"delete",variant:"primary","data-testid":"modal-btn-delete",onClick:this.doDeleteArtifact},"Delete"),i().createElement(o.Button,{key:"cancel",variant:"link","data-testid":"modal-btn-cancel",onClick:this.onDeleteModalClose},"Cancel")]},i().createElement("p",null,"Do you want to delete this artifact and all of its versions?  This action cannot be undone.")),i().createElement(d.X,{name:this.artifactName(),description:this.artifactDescription(),labels:this.artifactLabels(),isOpen:this.state.isEditModalOpen,onClose:this.onEditModalClose,onEditMetaData:this.doEditMetaData}),i().createElement(f.R,{error:this.state.invalidContentError,isOpen:this.state.isInvalidContentModalOpen,onClose:this.closeInvalidContentModal}),i().createElement(v.j,{message:this.state.pleaseWaitMessage,isOpen:this.state.isPleaseWaitModalOpen}))},e.prototype.initializePageState=function(){return{activeTabKey:0,artifact:null,artifactContent:"",artifactIsText:!0,invalidContentError:null,isDeleteModalOpen:!1,isEditModalOpen:!1,isInvalidContentModalOpen:!1,isPleaseWaitModalOpen:!1,isUploadFormValid:!1,isUploadModalOpen:!1,pleaseWaitMessage:"",rules:null,uploadFormData:null,versions:null}},e.prototype.groupIdParam=function(){return this.getPathParam("groupId")},e.prototype.artifactIdParam=function(){return this.getPathParam("artifactId")},e.prototype.versionParam=function(){return this.getPathParam("version")},e.prototype.createLoaders=function(){var t=this,e=this.groupIdParam();"default"==e&&(e=null);var a=this.artifactIdParam();return g.Services.getLoggerService().info("Loading data for artifact: ",a),[g.Services.getGroupsService().getArtifactMetaData(e,a,this.versionParam()).then((function(e){return t.setSingleState("artifact",e)})),g.Services.getGroupsService().getArtifactContent(e,a,this.versionParam()).then((function(e){return t.setSingleState("artifactContent",e)})).catch((function(e){if(g.Services.getLoggerService().warn("Failed to get artifact content: ",e),!function(t){if("string"==typeof t)try{var e=JSON.parse(t);if(e&&e.error_code&&404===e.error_code)return!0}catch(t){}return!1}(e))throw e;t.setSingleState("artifactContent","Artifact version content not available (404 Not Found).")})),g.Services.getGroupsService().getArtifactRules(e,a).then((function(e){return t.setSingleState("rules",e)})),g.Services.getGroupsService().getArtifactVersions(e,a).then((function(e){return t.setSingleState("versions",e.reverse())}))]},e.prototype.showDocumentationTab=function(){return!!this.state.artifact&&("OPENAPI"===this.state.artifact.type&&"DISABLED"!==this.state.artifact.state)},e.prototype.rules=function(){return this.state.rules?this.state.rules:[]},e.prototype.nameOrId=function(){return this.state.artifact?this.state.artifact.name?this.state.artifact.name:this.state.artifact.id:""},e.prototype.versions=function(){return this.state.versions?this.state.versions:[]},e.prototype.artifactId=function(){return this.state.artifact?this.state.artifact.id:""},e.prototype.groupId=function(){return this.state.artifact?this.state.artifact.groupId:null},e.prototype.artifactType=function(){return this.state.artifact?this.state.artifact.type:""},e.prototype.artifactNameOrId=function(){return this.state.artifact?this.state.artifact.name?this.state.artifact.name:this.state.artifact.id:""},e.prototype.artifactName=function(){return this.state.artifact&&this.state.artifact.name?this.state.artifact.name:""},e.prototype.artifactDescription=function(){return this.state.artifact&&this.state.artifact.description?this.state.artifact.description:""},e.prototype.artifactLabels=function(){return this.state.artifact&&this.state.artifact.labels?this.state.artifact.labels:[]},e.prototype.handleInvalidContentError=function(t){g.Services.getLoggerService().info("INVALID CONTENT ERROR",t),this.setMultiState({invalidContentError:t,isInvalidContentModalOpen:!0})},e}(s.I)},7477:(t,e,a)=>{a.d(e,{X:()=>p});var r,n=a(48121),i=a.n(n),o=a(8105),s=a(95995),c=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),l=function(){return l=Object.assign||function(t){for(var e,a=1,r=arguments.length;a<r;a++)for(var n in e=arguments[a])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},l.apply(this,arguments)},p=function(t){function e(e){var a=t.call(this,e)||this;return a.doEdit=function(){a.props.onEditMetaData(a.state.metaData)},a.onNameChange=function(t){a.setSingleState("metaData",l(l({},a.state.metaData),{name:t}))},a.onLabelsChange=function(t){var e=[];t&&t.trim().length>0&&(e=t.trim().split(",").map((function(t){return t.trim()}))),a.setMultiState({labels:t,metaData:l(l({},a.state.metaData),{labels:e})})},a.onDescriptionChange=function(t){a.setSingleState("metaData",l(l({},a.state.metaData),{description:t}))},a}return c(e,t),e.prototype.render=function(){return i().createElement(s.Modal,{title:"Edit Artifact Meta-Data",variant:"large",isOpen:this.props.isOpen,onClose:this.props.onClose,className:"edit-artifact-metaData pf-m-redhat-font",actions:[i().createElement(s.Button,{key:"edit",variant:"primary","data-testid":"modal-btn-edit",onClick:this.doEdit},"Edit"),i().createElement(s.Button,{key:"cancel",variant:"link","data-testid":"modal-btn-cancel",onClick:this.props.onClose},"Cancel")]},i().createElement("p",null,"Use the form below to update the Name and Description of the artifact."),i().createElement(s.Form,null,i().createElement(s.FormGroup,{label:"Name",fieldId:"form-name"},i().createElement(s.TextInput,{isRequired:!1,type:"text",id:"form-name","data-testid":"form-name",name:"form-name","aria-describedby":"form-name-helper",value:this.state.metaData.name,placeholder:"Name of the artifact",onChange:this.onNameChange})),i().createElement(s.FormGroup,{label:"Labels",fieldId:"form-labels",helperText:"A comma-separated list of labels to apply to the artifact."},i().createElement(s.TextInput,{isRequired:!1,type:"text",id:"form-labels","data-testid":"form-labels",name:"form-labels","aria-describedby":"form-labels-helper",value:this.state.labels,placeholder:"Artifact labels",onChange:this.onLabelsChange})),i().createElement(s.FormGroup,{label:"Description",fieldId:"form-description"},i().createElement(s.TextArea,{isRequired:!1,id:"form-description","data-testid":"form-description",name:"form-description","aria-describedby":"form-description-helper",value:this.state.metaData.description,placeholder:"Description of the artifact",onChange:this.onDescriptionChange}))))},e.prototype.componentDidUpdate=function(t){this.props.isOpen&&!t.isOpen&&this.setMultiState({labels:this.props.labels.join(", "),metaData:{description:this.props.description,labels:this.props.labels,name:this.props.name}})},e.prototype.initializeState=function(){return{labels:"",metaData:{description:"",labels:[],name:""}}},e.prototype.labels=function(){return this.state.metaData.labels?this.state.metaData.labels.join(", "):""},e}(o.Vx)},96597:(t,e,a)=>{a.d(e,{p:()=>u});var r,n=a(48121),i=a.n(n),o=a(95995),s=a(8105),c=a(70823),l=a(13294),p=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),u=function(t){function e(e){return t.call(this,e)||this}return p(e,t),e.prototype.render=function(){return i().createElement(o.Flex,{className:"example-border"},i().createElement(o.FlexItem,null,i().createElement(o.TextContent,null,i().createElement(o.Text,{component:o.TextVariants.h1},this.props.title))),i().createElement(o.FlexItem,{align:{default:"alignRight"}},i().createElement(c.Q,{version:this.props.version,versions:this.props.versions,groupId:this.props.groupId,artifactId:this.props.artifactId}),i().createElement(s.No,{isDeveloper:!0},i().createElement(l.Q,{feature:"readOnly",isNot:!0},i().createElement(o.Button,{id:"delete-artifact-button",variant:"secondary","data-testid":"header-btn-delete",onClick:this.props.onDeleteArtifact},"Delete"),i().createElement(o.Button,{id:"upload-version-button",variant:"primary","data-testid":"header-btn-upload-version",onClick:this.props.onUploadVersion},"Upload new version")))))},e.prototype.initializeState=function(){return{}},e}(s.Vx)},70823:(t,e,a)=>{a.d(e,{Q:()=>m});var r,n=a(48121),i=a.n(n),o=a(95995),s=a(8105),c=a(93568),l=a(37073),p=a.n(l),u=a(98068),d=a(46768),f=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),m=function(t){function e(e){var a=t.call(this,e)||this;return a.onToggle=function(t){a.setSingleState("isOpen",t)},a}return f(e,t),e.prototype.render=function(){var t=this;return i().createElement(o.Dropdown,{className:this.dropdownClasses(),toggle:i().createElement(o.DropdownToggle,{"data-testid":"versions-toggle",onToggle:this.onToggle},"Version: ",this.props.version),isOpen:this.state.isOpen},i().createElement("div",{className:"version-filter",style:{display:"none"}},i().createElement(o.InputGroup,null,i().createElement(o.TextInput,{name:"filter",id:"versionFilter",type:"search","data-testid":"versions-form-filter","aria-label":"Version filter"}),i().createElement(o.Button,{variant:o.ButtonVariant.control,"data-testid":"versions-form-btn-search","aria-label":"search button for search input"},i().createElement(c.SearchIcon,null)))),i().createElement("div",{className:"version-header"},i().createElement("div",{className:"version-item"},i().createElement("span",{className:"name"},"Version"),i().createElement("span",{className:"date"},"Created On"))),i().createElement("div",{className:"version-list"},i().createElement(u.Link,{key:"latest","data-testid":"versions-lnk-latest",to:this.linkTo("/artifacts/"+encodeURIComponent(this.props.groupId)+"/"+encodeURIComponent(this.props.artifactId)+"/versions/latest"),className:"version-item latest"},i().createElement("span",{className:"name"},"latest"),i().createElement("span",{className:"date"})),this.props.versions.map((function(e,a){return i().createElement(u.Link,{key:e.version,"data-testid":"versions-lnk-"+a,to:t.linkTo("/artifacts/"+encodeURIComponent(t.props.groupId)+"/"+encodeURIComponent(t.props.artifactId)+"/versions/"+e.version),className:"version-item"},i().createElement("span",{className:"name"},e.version),i().createElement("span",{className:"date"},i().createElement(p(),{date:e.createdOn,fromNow:!0})))}))))},e.prototype.initializeState=function(){return{isOpen:!1}},e.prototype.dropdownClasses=function(){var t=["version-selector-dropdown"];return d.Services.getConfigService().featureReadOnly()&&t.push("dropdown-align-right"),t.join(" ")},e}(s.Vx)},11054:(t,e,a)=>{a.d(e,{I:()=>d});var r,n=a(48121),i=a.n(n),o=a(8105),s=a(80250),c=a.n(s),l=(a(90252),a(12501),a(13202),a(62568),a(42270),a(95995)),p=a(46768),u=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),d=function(t){function e(e){var a=t.call(this,e)||this;return a.format=function(){if(a.state.contentIsJson)try{var t=JSON.parse(a.props.artifactContent);t&&a.setSingleState("content",JSON.stringify(t,null,2))}catch(t){p.Services.getLoggerService().warn("Failed to format content!"),p.Services.getLoggerService().error(t)}},a}return u(e,t),e.prototype.componentDidMount=function(){var t=document.getElementById("ace-wrapper");if(t){var e=t.clientHeight;e&&this.setSingleState("editorHeight",e+"px")}},e.prototype.render=function(){return i().createElement("div",{className:"ace-wrapper",id:"ace-wrapper"},i().createElement(c(),{"data-testid":"ace-content",mode:this.editorMode(),theme:"monokai",name:"artifactContent",className:"artifactContent",width:this.state.editorWidth,height:this.state.editorHeight,fontSize:14,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!1,value:this.state.content,readOnly:!0,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2,useWorker:!1}}),i().createElement(l.Button,{className:this.state.formatBtnClasses,key:"format",variant:"primary","data-testid":"modal-btn-edit",onClick:this.format},"Format"))},e.prototype.initializeState=function(){var t=this.isJson(this.props.artifactContent),e="format-btn";return t||(e+=" hidden"),{content:this.props.artifactContent,contentIsJson:t,editorHeight:"500px",editorWidth:"100%",formatBtnClasses:e}},e.prototype.editorMode=function(){return"PROTOBUF"===this.props.artifactType?"protobuf":"WSDL"===this.props.artifactType||"XSD"===this.props.artifactType||"XML"===this.props.artifactType?"xml":"GRAPHQL"===this.props.artifactType?"graphqlschema":"json"},e.prototype.isJson=function(t){try{if(JSON.parse(t))return!0}catch(t){}return!1},e}(o.Vx)},54882:(t,e,a)=>{a.d(e,{p:()=>u});var r,n=a(48121),i=a.n(n),o=a(8105),s=a(17189),c=a(75921),l=a(46768),p=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),u=function(t){function e(e){return t.call(this,e)||this}return p(e,t),e.prototype.render=function(){if(this.isError())return i().createElement(c.L,{error:{errorMessage:"Artifact isn't a valid OpenAPI structure",error:this.state.error}});var t=null;return"OPENAPI"===this.props.artifactType&&(t=i().createElement(s.RedocStandalone,{spec:this.state.parsedContent})),null!==t?t:i().createElement("h1",null,"Unsupported Type: ",this.props.artifactType)},e.prototype.initializeState=function(){try{return{parsedContent:JSON.parse(this.props.artifactContent),error:void 0}}catch(t){return l.Services.getLoggerService().warn("Failed to parse content:"),l.Services.getLoggerService().error(t),{parsedContent:void 0,error:t}}},e.prototype.isError=function(){return!!this.state.error},e}(o.Vx)},75921:(t,e,a)=>{a.d(e,{L:()=>d});var r,n=a(48121),i=a.n(n),o=a(8105),s=a(80250),c=a.n(s),l=(a(79253),a(42557),a(95995)),p=a(93568),u=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),d=function(t){function e(e){var a=t.call(this,e)||this;return a.showDetails=function(){a.setSingleState("isShowDetails",!0)},a}return u(e,t),e.prototype.render=function(){return i().createElement("div",{className:"centerizer"},i().createElement(l.EmptyState,{variant:l.EmptyStateVariant.large},i().createElement(l.EmptyStateIcon,{icon:p.ExclamationTriangleIcon}),i().createElement(l.Title,{headingLevel:"h5",size:"lg"},this.errorMessage()),i().createElement(l.EmptyStateBody,null,this.errorDescription()),i().createElement(l.EmptyStateSecondaryActions,null,i().createElement(l.Button,{variant:"link","data-testid":"error-btn-details",onClick:this.showDetails},"Show details"))),i().createElement("div",{className:"separator"},"Â "),this.state.isShowDetails?i().createElement("div",{className:"ace-wrapper pf-c-empty-state pf-m-lg",id:"ace-wrapper"},i().createElement(c(),{"data-testid":"ace-details",mode:"json",theme:"tomorrow",name:"errorDetail",className:"errorDetail",width:this.state.editorWidth,height:this.state.editorHeight,fontSize:14,showPrintMargin:!1,showGutter:!1,highlightActiveLine:!1,value:this.errorDetail(),readOnly:!0,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2,useWorker:!1}})):i().createElement("div",null))},e.prototype.initializeState=function(){return{editorHeight:"250px",editorWidth:"100%",isShowDetails:!1}},e.prototype.errorMessage=function(){return this.props.error?this.props.error.errorMessage:"Internal server error"},e.prototype.errorDescription=function(){return this.props.children?this.props.children:"The content you are trying to visualize is not valid (we could not parse it).  If possible, we'll try to provide you with some more information about the problem (see below)."},e.prototype.errorDetail=function(){return this.props.error&&this.props.error.error&&this.props.error.error.detail?this.props.error.error.detail:this.props.error&&this.props.error.error&&this.props.error.error.message?this.props.error.error.message:this.props.error&&this.props.error.error?JSON.stringify(this.props.error.error,null,3):"Error info not available"},e}(o.Vx)},87578:(t,e,a)=>{a.d(e,{f:()=>m});var r,n=a(48121),i=a.n(n),o=a(8105),s=a(95995),c=a(93568),l=a(37073),p=a.n(l),u=a(13294),d=a(24754),f=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),m=function(t){function e(e){var a=t.call(this,e)||this;return a.isArtifactInGroup=function(){var t=a.props.artifact.groupId;return null!=t&&"default"!=t},a}return f(e,t),e.prototype.render=function(){return i().createElement(s.Flex,{className:"artifact-tab-content"},i().createElement(s.FlexItem,{className:"artifact-basics"},i().createElement("div",{className:"title-and-type"},i().createElement(s.Split,null,i().createElement(s.SplitItem,{className:"type"},i().createElement(o.fN,{type:this.props.artifact.type})),i().createElement(s.SplitItem,{className:"title",isFilled:!0},"Version Metadata"),i().createElement(s.SplitItem,{className:"actions"},i().createElement(o.No,{isDeveloper:!0},i().createElement(u.Q,{feature:"readOnly",isNot:!0},i().createElement(s.Button,{id:"edit-action","data-testid":"artifact-btn-edit",title:"Edit artifact meta-data",onClick:this.props.onEditMetaData,variant:"plain"},i().createElement(c.EditIcon,null))))))),i().createElement("div",{className:"metaData"},i().createElement("div",{className:"metaDataItem"},i().createElement("span",{className:"label"},"Name"),i().createElement("span",{className:"value"},this.props.artifact.name)),i().createElement(d.If,{condition:this.isArtifactInGroup},i().createElement("div",{className:"metaDataItem"},i().createElement("span",{className:"label"},"Group"),i().createElement("span",{className:"value"},this.props.artifact.groupId))),i().createElement("div",{className:"metaDataItem"},i().createElement("span",{className:"label"},"ID"),i().createElement("span",{className:"value"},this.props.artifact.id)),i().createElement("div",{className:"metaDataItem"},i().createElement("span",{className:"label"},"Status"),i().createElement("span",{className:"value"},this.props.artifact.state)),i().createElement("div",{className:"metaDataItem"},i().createElement("span",{className:"label"},"Created"),i().createElement("span",{className:"value"},i().createElement(p(),{date:this.props.artifact.createdOn,fromNow:!0}))),i().createElement("div",{className:"metaDataItem"},i().createElement("span",{className:"label"},"Modified"),i().createElement("span",{className:"value"},i().createElement(p(),{date:this.props.artifact.modifiedOn,fromNow:!0}))),i().createElement("div",{className:"metaDataItem"},i().createElement("span",{className:"label"},"Global ID"),i().createElement("span",{className:"value"},this.props.artifact.globalId)),i().createElement("div",{className:"metaDataItem"},i().createElement("span",{className:"label"},"Content ID"),i().createElement("span",{className:"value"},this.props.artifact.contentId))),i().createElement("div",{className:"description"},this.description()),i().createElement("div",{className:"labels"},this.labels().map((function(t){return i().createElement(s.Badge,{key:t,isRead:!0},t)}))),i().createElement("div",{className:"actions"},i().createElement(s.Button,{id:"download-action","data-testid":"artifact-btn-download",title:"Download artifact content",onClick:this.props.onDownloadArtifact,variant:"secondary"},i().createElement(c.DownloadIcon,null)," Download"))),i().createElement(s.FlexItem,{className:"artifact-rules"},i().createElement("div",{className:"rules-label"},"Content Rules"),i().createElement(o.RB,{rules:this.props.rules,onEnableRule:this.props.onEnableRule,onDisableRule:this.props.onDisableRule,onConfigureRule:this.props.onConfigureRule})))},e.prototype.initializeState=function(){return{}},e.prototype.nameOrId=function(){return this.props.artifact.name?this.props.artifact.name:this.props.artifact.id},e.prototype.labels=function(){return this.props.artifact.labels?this.props.artifact.labels:[]},e.prototype.description=function(){return this.props.artifact.description?this.props.artifact.description:"An artifact of type "+this.props.artifact.type+" with no description."},e}(o.Vx)},95042:(t,e,a)=>{a.d(e,{G:()=>l});var r,n=a(48121),i=a.n(n),o=a(8105),s=a(95995),c=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),l=function(t){function e(e){var a=t.call(this,e)||this;return a.onContentChange=function(t,e,r){a.setSingleState("content",t,(function(){a.fireOnChange(),a.checkValid()}))},a.onFileReadStarted=function(){a.setSingleState("contentIsLoading",!0)},a.onFileReadFinished=function(){a.setSingleState("contentIsLoading",!1)},a}return c(e,t),e.prototype.render=function(){return i().createElement(s.Form,null,i().createElement(s.FormGroup,{label:"Artifact",isRequired:!0,fieldId:"form-artifact"},i().createElement(s.FileUpload,{id:"artifact-content","data-testid":"form-upload",type:"text",filename:this.state.contentFilename,value:this.state.content,isRequired:!0,allowEditingUploadedText:!0,onChange:this.onContentChange,onReadStarted:this.onFileReadStarted,onReadFinished:this.onFileReadFinished,isLoading:this.state.contentIsLoading})))},e.prototype.initializeState=function(){return{content:"",contentFilename:"",contentIsLoading:!1,valid:!1}},e.prototype.checkValid=function(){var t=this,e=this.currentData(),a=this.state.valid,r=this.isValid(e),n=a!==r;this.setState({valid:r},(function(){n&&t.fireOnValid()}))},e.prototype.isValid=function(t){return!!t},e.prototype.currentData=function(){return this.state.content},e.prototype.fireOnChange=function(){this.props.onChange&&this.props.onChange(this.currentData())},e.prototype.fireOnValid=function(){this.props.onValid&&this.props.onValid(this.state.valid)},e}(o.Vx)},95713:(t,e,a)=>{a.d(e,{I:()=>v});var r,n,i=a(48121),o=a.n(i),s=a(8105),c=a(46768),l=a(95995),p=a(93568),u=(a(79253),a(42557),a(93548)),d=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},r(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),f=function(t){function e(e){var a=t.call(this,e)||this;return a.navigateBack=function(){window.history.back()},a}return d(e,t),e.prototype.render=function(){return o().createElement(o().Fragment,null,o().createElement(l.PageSection,{className:"ps_error",variant:l.PageSectionVariants.light},o().createElement("div",{className:"centerizer"},o().createElement(l.EmptyState,{variant:l.EmptyStateVariant.large},o().createElement(l.EmptyStateIcon,{icon:p.LockedIcon}),o().createElement(l.Title,{headingLevel:"h5",size:"lg"},"Access Denied"),o().createElement(l.EmptyStateBody,null,"You are not authorized to access this registry instance.  Please request access from your administrator and then try again."),o().createElement(l.EmptyStateSecondaryActions,null,o().createElement(l.Button,{variant:"link","data-testid":"error-btn-artifacts",onClick:this.navigateBack},"Go Back"))))))},e}(u.m),m=function(){var t=function(e,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},t(e,a)};return function(e,a){function r(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}(),h=function(){return h=Object.assign||function(t){for(var e,a=1,r=arguments.length;a<r;a++)for(var n in e=arguments[a])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},h.apply(this,arguments)},g=function(){for(var t=0,e=0,a=arguments.length;e<a;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<a;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,n++)r[n]=i[o];return r};!function(t){t[t.React=0]="React",t[t.Server=1]="Server"}(n||(n={}));var v=function(t){function e(e){var a=t.call(this,e)||this;return setTimeout((function(){a.loadPageData()}),10),a}return m(e,t),e.prototype.initializeState=function(){return h(h({},this.initializePageState()),{isLoading:!0})},e.prototype.componentDidCatch=function(t,e){this.handleError(n.React,t,e)},e.prototype.render=function(){return this.isError()?this.is403Error()?o().createElement(f,{error:this.state.error}):o().createElement(s.mf,{error:this.state.error}):this.isLoading()?o().createElement(o().Fragment,null,o().createElement(l.PageSection,{variant:l.PageSectionVariants.default,isFilled:!0},o().createElement(l.Flex,null,o().createElement(l.FlexItem,null,o().createElement(l.Spinner,{size:"lg"})),o().createElement(l.FlexItem,null,o().createElement("span",null,"Loading..."))))):this.renderPage()},e.prototype.postConstruct=function(){s.Vx.setHistory(this.props.history),t.prototype.postConstruct.call(this)},e.prototype.createLoaders=function(){return null},e.prototype.handleServerError=function(t,e){this.handleError(n.Server,t,e)},e.prototype.getPathParam=function(t){return decodeURIComponent(this.props.match.params[t])},e.prototype.isLoading=function(){return!!this.state.isLoading},e.prototype.loadPageData=function(){var t=this,e=this.createLoaders();null==e&&(e=[]),Array.isArray(e)||(e=[e]),0===(e=g([c.Services.getUsersService().updateCurrentUser()],e)).length?this.setSingleState("isLoading",!1):(this.setSingleState("isLoading",!0),Promise.all(e).then((function(){t.setSingleState("isLoading",!1)})).catch((function(e){c.Services.getLoggerService().debug("[PageComponent] Page data load failed, retrying.");var a=t.getRetries();a<5?(t.incrementRetries(),setTimeout((function(){t.loadPageData()}),100*Math.pow(2,a))):t.handleServerError(e,"Error loading page data.")})))},e.prototype.getRetries=function(){return void 0!==this.state.pageLoadRetries?this.state.pageLoadRetries:0},e.prototype.incrementRetries=function(){var t=this.getRetries()+1;this.setSingleState("pageLoadRetries",t)},e.prototype.isError=function(){return!!this.state.isError},e.prototype.is403Error=function(){return this.state.error&&this.state.error.error.status&&403==this.state.error.error.status},e.prototype.handleError=function(t,e,a){c.Services.getLoggerService().error("[PageComponent] Handling an error of type: ",t),c.Services.getLoggerService().error("[PageComponent] ",a),c.Services.getLoggerService().error("[PageComponent] ",e),this.setMultiState({error:{error:e,errorMessage:a,type:t},isError:!0})},e}(s.Vx)}}]);
