/*! For license information please see 2292.4e624ad9.js.LICENSE.txt */
"use strict";(self.webpackChunk_apicurio_registry_ui=self.webpackChunk_apicurio_registry_ui||[]).push([[2292],{92908:(e,t,l)=>{l.r(t),l.d(t,{default:()=>a});var r,n=l(85029),i=l(2331),o=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)t.hasOwnProperty(l)&&(e[l]=t[l])},r(e,t)},function(e,t){function l(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(l.prototype=t.prototype,new l)});const a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.postConstruct=function(){i.m.updateConfiguration(this.props),e.prototype.postConstruct.call(this)},t.prototype.groupIdParam=function(){return this.props.groupId},t.prototype.artifactIdParam=function(){return this.props.artifactId},t.prototype.versionParam=function(){return this.props.version},t}(n.C)},23311:(e,t,l)=>{l.d(t,{XT:()=>r.X});var r=l(47230);l(68470)},27297:(e,t,l)=>{l.d(t,{p:()=>r.p});var r=l(72896);l(85654)},54287:(e,t,l)=>{l.d(t,{IK:()=>r.I,fP:()=>i.f,pX:()=>n.p});var r=l(29646),n=l(72627),i=l(74789);l(4080)},11635:(e,t,l)=>{l.d(t,{G:()=>r.G});var r=l(75602)},89872:(e,t,l)=>{l.d(t,{C0:()=>i.C,gx:()=>r.g,jx:()=>i.j,st:()=>n.s});var r=l(55194),n=l(51680),i=l(95101)},18338:(e,t,l)=>{l.d(t,{jx:()=>r.jx});var r=l(89872);l(58306)},58306:(e,t,l)=>{l.d(t,{s:()=>F});var r,n=l(93264),i=l.n(n),o=(l(77685),l(99922)),a=l(67646),p=l(37799),s=l(99926),c=l(89872),u=l(79824),d=l(8556),g=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)t.hasOwnProperty(l)&&(e[l]=t[l])},r(e,t)},function(e,t){function l(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(l.prototype=t.prototype,new l)}),h=function(){return h=Object.assign||function(e){for(var t,l=1,r=arguments.length;l<r;l++)for(var n in t=arguments[l])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},h.apply(this,arguments)},f=function(){for(var e=0,t=0,l=arguments.length;t<l;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<l;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,n++)r[n]=i[o];return r},S=["Account","Role"],F=function(e){function t(t){var l=e.call(this,t)||this;return l.onRoleFilterToggle=function(e){l.setSingleState("roleListFilterOpened",e)},l.onRoleFilterSelectToggle=function(e){l.setSingleState("roleFilterSelectInputOpened",e)},l.onRoleFilterSelect=function(e,t,r){l.setMultiState({roleFilterSelected:t,roleListFilterOpened:!1})},l.onRoleFilterInputChange=function(e){l.setSingleState("roleFilterTextInputValue",e)},l.onRoleFilterTextInputKeydown=function(e){"Enter"===e.key&&l.onRoleFilterApplyClick()},l.onRoleFilterApplyClick=function(){var e,t,r={principalId:l.state.roleFilterSelected==S[0]?l.state.roleFilterTextInputValue:null===(e=l.state.roleFilter)||void 0===e?void 0:e.principalId,role:l.state.roleFilterSelected==S[1]?l.state.roleFilterSelectInputValue:l.state.roleFilter.role,principalName:l.state.roleFilterSelected==S[0]?l.state.roleFilterTextInputValue:null===(t=l.state.roleFilter)||void 0===t?void 0:t.principalId};l.setMultiState({roleFilter:r,roleFilterTextInputValue:""})},l.onCreateRoleMapping=function(){l.setSingleState("isCreateRoleMappingModalOpen",!0)},l.isAccountFilterSelected=function(){return l.state.roleFilterSelected==S[0]},l.isRoleFilterSelected=function(){return l.state.roleFilterSelected==S[1]},l.onRoleFilterSelectChange=function(e,t,r){l.setMultiState({roleFilterSelectInputValue:t,roleFilterSelectInputOpened:!1},(function(){return l.onRoleFilterApplyClick()}))},l.closeRoleMappingModal=function(){l.setMultiState({selectedRole:void 0,isRoleMappingUpdate:!1,isCreateRoleMappingModalOpen:!1})},l.onEditRoleMapping=function(e){l.setMultiState({selectedRole:e,isRoleMappingUpdate:!0}),l.onCreateRoleMapping()},l.updateRoleMapping=function(e,t){l.pleaseWait(!0,"Granting access, please wait..."),s.K9.getAdminService().updateRoleMapping(e.id,t).then((function(t){var r=l.state.roles;r.forEach((function(l,n){l.principalId===t.principalId&&(r[n]=h(h({},t),{principalName:e.displayName}))})),l.pleaseWait(!1,""),l.setSingleState("roles",f(r))})).catch((function(e){return l.handleServerError(e,"Error updating access.")}))},l.createRoleMapping=function(e,t,r){l.closeRoleMappingModal(),r?l.updateRoleMapping(e,t):(l.pleaseWait(!0,"Granting access, please wait..."),s.K9.getAdminService().createRoleMapping(e.id,t,e.displayName).then((function(e){l.pleaseWait(!1,""),l.setSingleState("roles",f([e],l.state.roles))})).catch((function(r){409===(null==r?void 0:r.error_code)?l.updateRoleMapping(e,t):l.handleServerError(r,"Error granting access.")})))},l.onRevokeRoleMapping=function(e){l.pleaseWait(!0,"Revoking access for "+e+", please wait..."),s.K9.getAdminService().deleteRoleMapping(e).then((function(){l.pleaseWait(!1,""),l.removeMapping(e)})).catch((function(e){return l.handleServerError(e,"Error revoking access.")}))},l.pleaseWait=function(e,t){l.setMultiState({isPleaseWaitModalOpen:e,pleaseWaitMessage:t})},l}return g(t,e),t.prototype.renderPage=function(){var e=this;return i().createElement(i().Fragment,null,i().createElement(o.PageSection,{className:"ps_roles-header",variant:o.PageSectionVariants.light,padding:{default:"noPadding"}},i().createElement(u.N4,{tabKey:2})),i().createElement(o.PageSection,{variant:o.PageSectionVariants.default,isFilled:!0,className:"ps_role-section"},0===this.state.roles.length?i().createElement(c.gx,{onCreateRoleMapping:this.onCreateRoleMapping}):i().createElement(i().Fragment,null,i().createElement(o.Toolbar,{id:"toolbar",clearAllFilters:function(){e.setSingleState("roleFilter",{principalId:"",role:"",principalName:""})}},i().createElement(o.ToolbarContent,null,i().createElement(o.ToolbarGroup,null,i().createElement(o.ToolbarItem,{className:"ps_role-filter-select-toolbar-item"},i().createElement(o.Select,{variant:o.SelectVariant.single,"aria-label":"Filter On",onToggle:this.onRoleFilterToggle,onSelect:this.onRoleFilterSelect,selections:this.state.roleFilterSelected,isOpen:this.state.roleListFilterOpened},S.map((function(e,t){return i().createElement(o.SelectOption,{key:t,value:e})})))),i().createElement(o.ToolbarItem,null,i().createElement(o.InputGroup,null,this.isRoleFilterSelected()?i().createElement(o.Select,{variant:o.SelectVariant.single,"aria-label":"Role",onToggle:this.onRoleFilterSelectToggle,onSelect:this.onRoleFilterSelectChange,isOpen:this.state.roleFilterSelectInputOpened,placeholderText:"Filter by role"},i().createElement(o.SelectOption,{key:1,value:"Administrator"}),i().createElement(o.SelectOption,{key:2,value:"Manager"}),i().createElement(o.SelectOption,{key:3,value:"Viewer"})):i().createElement(o.TextInput,{value:this.state.roleFilterTextInputValue,placeholder:"Filter by account",name:"roleFilterInput",id:"roleFilterInput",type:"search","aria-label":"role filter input",onKeyDown:this.onRoleFilterTextInputKeydown,onChange:this.onRoleFilterInputChange}),i().createElement(d.If,{condition:this.isAccountFilterSelected},i().createElement(o.Button,{variant:o.ButtonVariant.control,"aria-label":"search button for search input",onClick:this.onRoleFilterApplyClick},i().createElement(a.SearchIcon,null))))),i().createElement(o.ToolbarItem,null,i().createElement(o.Button,{variant:"primary","data-testid":"btn-grant-access",onClick:this.onCreateRoleMapping},"Grant access")),i().createElement(o.ToolbarFilter,{chips:this.state.roleFilter.principalId.length>0?[this.state.roleFilter.principalId]:void 0,deleteChip:function(){e.setSingleState("roleFilter",{principalId:"",role:e.state.roleFilter.role,principalName:""})},categoryName:"Account"}," "),i().createElement(o.ToolbarFilter,{chips:this.state.roleFilter.role.length>0?[this.state.roleFilter.role]:void 0,deleteChip:function(){e.setSingleState("roleFilter",{principalId:e.state.roleFilter.principalId,role:"",principalName:e.state.roleFilter.principalName})},categoryName:"Role"}," ")))),i().createElement(c.st,{roles:this.state.roles,roleFilter:this.state.roleFilter,onRevoke:this.onRevokeRoleMapping,onEditRoleMapping:this.onEditRoleMapping}))),i().createElement(c.C0,{isOpen:this.state.isCreateRoleMappingModalOpen,isUpdateAccess:this.state.isRoleMappingUpdate,onClose:this.closeRoleMappingModal,onGrant:this.createRoleMapping,roles:this.state.isRoleMappingUpdate?this.state.roles:null,defaultRole:this.state.selectedRole}),i().createElement(u.jb,{message:this.state.pleaseWaitMessage,isOpen:this.state.isPleaseWaitModalOpen}))},t.prototype.initializePageState=function(){return{isCreateRoleMappingModalOpen:!1,isPleaseWaitModalOpen:!1,isRoleMappingUpdate:!1,pleaseWaitMessage:"",selectedRole:void 0,roles:[],roleFilter:{principalId:"",role:"",principalName:""},roleListFilterOpened:!1,roleFilterSelected:S[0],roleFilterTextInputValue:"",roleFilterSelectInputValue:"",roleFilterSelectInputOpened:!1}},t.prototype.createLoaders=function(){var e=this;return s.K9.getAdminService().getRoleMappings().then((function(t){e.setMultiState({isLoading:!1,roles:t})}))},t.prototype.removeMapping=function(e){var t=this.state.roles.filter((function(t){return t.principalId!==e}));this.setSingleState("roles",t)},t}(p.I)}}]);
//# sourceMappingURL=2292.4e624ad9.js.map